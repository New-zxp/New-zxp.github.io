<!DOCTYPE html><html lang="cn" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>前端 | Snoopy的小窝</title><meta name="author" content="Snoopy"><meta name="copyright" content="Snoopy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="TT外卖项目介绍">
<meta property="og:type" content="article">
<meta property="og:title" content="前端">
<meta property="og:url" content="http://example.com/2022-08-27-%E5%89%8D%E7%AB%AF.html">
<meta property="og:site_name" content="Snoopy的小窝">
<meta property="og:description" content="TT外卖项目介绍">
<meta property="og:locale">
<meta property="og:image" content="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/1.jpg">
<meta property="article:published_time" content="2022-08-27T02:37:48.000Z">
<meta property="article:modified_time" content="2024-05-09T03:19:03.776Z">
<meta property="article:author" content="Snoopy">
<meta property="article:tag" content="HTML">
<meta property="article:tag" content="CSS">
<meta property="article:tag" content="JS">
<meta property="article:tag" content="VUE">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/1.jpg"><link rel="shortcut icon" href="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/favicon.png"><link rel="canonical" href="http://example.com/2022-08-27-%E5%89%8D%E7%AB%AF.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//static.cloudflareinsights.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;c283732c5e7b4e58a56ee18077e56d1d&quot;}"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '前端',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-09 11:19:03'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/1.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Snoopy的小窝"><img class="site-icon" src="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/favicon.png"/><span class="site-name">Snoopy的小窝</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">前端</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-08-27T02:37:48.000Z" title="Created 2022-08-27 10:37:48">2022-08-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-05-09T03:19:03.776Z" title="Updated 2024-05-09 11:19:03">2024-05-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">31.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>155mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="前端"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><p>HTML 是什么：即 HyperText Markup language 超文本标记语言，咱们熟知的网页就是用它编写的，HTML 的作用是定义网页的内容和结构。    </p>
<ul>
<li>HyperText 是指用超链接的方式组织网页，把网页联系起来</li>
<li>Markup 是指用 <code>&lt;标签&gt;</code> 的方式赋予内容不同的功能和含义</li>
</ul>
<p>CSS 是什么：即 Cascading  Style  Sheets 级联（层叠）样式表，它描述了网页的表现与展示效果</p>
<h2 id="HTML-元素"><a href="#HTML-元素" class="headerlink" title="HTML 元素"></a>HTML 元素</h2><p>HTML 由一系列元素 <code>elements</code> 组成，例如</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>整体称之为元素</p>
</li>
<li><p><code>&lt;p&gt;</code> 和 <code>&lt;/p&gt;</code> 分别称为起始和结束标签</p>
</li>
<li><p>标签包围起来的 Hello, world 称之为内容</p>
</li>
<li><p>p 是预先定义好的 html 标签，作用是将内容作为一个单独的段落</p>
</li>
</ul>
<p>元素还可以有属性，如</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>属性一般是预先定义好的，这里的 id 属性是给元素一个唯一的标识</li>
<li>id属性不会在页面展示出来  </li>
<li>一个元素可以有多个属性</li>
<li>title属性：光标移到该处会出现标题信息</li>
</ul>
<p>元素之间可以嵌套，如</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>HTML 是一门非常<span class="tag">&lt;<span class="name">b</span>&gt;</span>强大<span class="tag">&lt;/<span class="name">b</span>&gt;</span>的语言<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>不包含内容的元素称之为空元素，如</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.png&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.png&quot;</span>/&gt;</span><span class="comment">&lt;!--第二种写法--&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>img 作用是用来展示图片</li>
<li>src 属性用来指明图片路径</li>
</ul>
<h2 id="HTML-页面"><a href="#HTML-页面" class="headerlink" title="HTML 页面"></a>HTML 页面</h2><p>前面介绍的只是单独的 HTML 元素，它们可以充当一份完整的 HTML 页面的组成部分</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span><span class="comment">&lt;!--文档类型声明--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>测试页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.png&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>html</code> 元素囊括了页面中所有其它元素，整个页面只需一个，称为根元素</li>
<li><code>head</code> 元素包含的是那些不用于展现内容的元素，如 <code>title</code>，<code>link</code>，<code>meta</code> 等</li>
<li><code>body</code> 元素包含了对用户展现内容的元素，例如后面会学到的用于展示文本、图片、视频、音频的各种元素</li>
</ul>
<p>! + tab自动补全</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span><span class="comment">&lt;!--声明网页语言是英文，zh表示中文，不加声明默认是中文--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><span class="comment">&lt;!--声明字符编码--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><span class="comment">&lt;!--浏览器兼容模式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>这是一个页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello,world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;图片找不到了&quot;</span> <span class="attr">width</span>=<span class="string">&quot;1920&quot;</span> <span class="attr">height</span>=<span class="string">&quot;1080&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>alt：图片缺失时显示的文字</p>
<p>width：图片宽度，单位是像素</p>
<p>height：图片高度：单位是像素</p>
<p>height和width单独出现时：另一个等比例缩放</p>
<h2 id="常见元素"><a href="#常见元素" class="headerlink" title="常见元素"></a>常见元素</h2><h3 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h3><h4 id="Heading"><a href="#Heading" class="headerlink" title="Heading"></a>Heading</h4><p>h1最大，h6最小</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>1号标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>2号标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>3号标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>4号标题<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>5号标题<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>6号标题<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="Paragraph"><a href="#Paragraph" class="headerlink" title="Paragraph"></a>Paragraph</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="List"><a href="#List" class="headerlink" title="List"></a>List</h4><p>无序列表 unordered list</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>有序列表</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>多级列表</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    	北京市</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>海淀区<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>朝阳区<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>昌平区<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    	河北省</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>石家庄<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>保定<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="Anchor"><a href="#Anchor" class="headerlink" title="Anchor"></a>Anchor</h4><p>锚，超链接</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;2.html&quot;</span>&gt;</span>本地网页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.bilibili.com&quot;</span>&gt;</span>逼站<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#p1&quot;</span>&gt;</span>页面内跳转<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>哈哈哈<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>回到顶部<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="comment">&lt;!-- 不加任何符号就是回到顶部 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="hr"><a href="#hr" class="headerlink" title="hr"></a>hr</h4><p>分割线</p>
<p>————————————————</p>
<h4 id="br"><a href="#br" class="headerlink" title="br"></a>br</h4><p>换行</p>
<h3 id="多媒体"><a href="#多媒体" class="headerlink" title="多媒体"></a>多媒体</h3><h4 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;文件路径&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>src 格式有 3 种</p>
<ul>
<li><p>文件地址</p>
<p>不加前缀默认当前地址</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;C:\Users\98110\Pictures\wlop\wlop.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;error&quot;</span> <span class="attr">width</span>=<span class="string">&quot;1280&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;wlop.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;error&quot;</span> <span class="attr">width</span>=<span class="string">&quot;1280&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>data URL，格式如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">data:媒体类型;base64,数据</span><br></pre></td></tr></table></figure>

<p>在idea中进行图片编码的获取</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Users\\98110\\Pictures\\wlop\\wlop.jpg&quot;</span>);<span class="comment">//创建图片文件对象</span></span><br><span class="line"><span class="type">byte</span>[] bytes = Files.readAllBytes(file.toPath());<span class="comment">//获取当前图片的所有字节</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> Base64.getEncoder().encodeToString(bytes);<span class="comment">//获取Base64的编码器，并以Base64编码成字符串</span></span><br></pre></td></tr></table></figure>

<p>把获取的字符串放在数据的位置</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;data:image/jpg;base64,数据&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>object URL，需要配合 javascript 使用</p>
</li>
</ul>
<h4 id="Video"><a href="#Video" class="headerlink" title="Video"></a>Video</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;1.mp4&quot;</span> <span class="attr">width</span>=<span class="string">&quot;1000&quot;</span> <span class="attr">controls</span> &gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>controls：添加控制器</p>
<h4 id="Audio"><a href="#Audio" class="headerlink" title="Audio"></a>Audio</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;文件路径&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h3><h4 id="作用与语法"><a href="#作用与语法" class="headerlink" title="作用与语法"></a>作用与语法</h4><p>表单的作用：<strong>收集</strong>用户填入的<strong>数据</strong>，并将这些数据<strong>提交给服务器</strong></p>
<p>表单的语法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;服务器地址&quot;</span> <span class="attr">method</span>=<span class="string">&quot;请求方式&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;数据格式&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 表单项 --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交按钮&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>method 请求方式有 <ul>
<li>get （默认）提交时，数据跟在 URL 地址之后</li>
<li>post 提交时，数据在请求体内</li>
</ul>
</li>
<li>enctype 在 post 请求时，指定请求体的数据格式<ul>
<li>application/x-www-form-urlencoded（默认）</li>
<li>multipart/form-data</li>
</ul>
</li>
<li>其中表单项提供多种收集数据的方式<ul>
<li>有 name 属性的表单项数据，才会被发送给服务器</li>
</ul>
</li>
</ul>
<p><strong>谷歌搜索</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;https://www.google.com/search&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;q&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;click&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>和自己的服务器交互</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/search&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;click&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/search&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">(String username)</span>&#123;</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;收到&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="常见的表单项"><a href="#常见的表单项" class="headerlink" title="常见的表单项"></a>常见的表单项</h4><h5 id="文本框"><a href="#文本框" class="headerlink" title="文本框"></a>文本框</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;uesrname&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="密码框"><a href="#密码框" class="headerlink" title="密码框"></a>密码框</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="隐藏框"><a href="#隐藏框" class="headerlink" title="隐藏框"></a>隐藏框</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="日期框"><a href="#日期框" class="headerlink" title="日期框"></a>日期框</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里的日期格式要和java里对应，如果提交的时yyyy-MM-dd，那java接收时相应字段应该一致</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line"><span class="keyword">private</span> LocalDate birthday;</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">test</span><span class="params">(<span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> LocalDate birthday)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="单选"><a href="#单选" class="headerlink" title="单选"></a>单选</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>checked：默认选中</p>
<p>name要保持一致</p>
<h5 id="多选"><a href="#多选" class="headerlink" title="多选"></a>多选</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;唱歌&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;逛街&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;游戏&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/search&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用文件上传时，必须指定表单请求方式method=”post”   enctype=”multipart/form-data”</p>
<p>Java进行接收时数据类型</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">test</span><span class="params">(MultipartFile avatar)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>Java报错：”The field avatar exceeds its maximum permitted size of 1048576 bytes”</p>
<p>原因：SpringBoot内嵌的 tomcat 默认的所有上传的文件大小为 1MB，超出这个大小就会报错</p>
<p>解决方法：在SpringBoot中配置</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.servlet.multipart.max-file-size</span> = <span class="string">100MB</span></span><br><span class="line"><span class="attr">spring.servlet.multipart.max-request-size</span> = <span class="string">1000MB</span></span><br></pre></td></tr></table></figure>



<h2 id="HTTP-请求"><a href="#HTTP-请求" class="headerlink" title="HTTP 请求"></a>HTTP 请求</h2><h3 id="请求组成"><a href="#请求组成" class="headerlink" title="请求组成"></a>请求组成</h3><p>请求由三部分组成</p>
<ol>
<li>请求行</li>
<li>请求头</li>
<li>请求体</li>
</ol>
<p>可以用 telnet 程序测试</p>
<h3 id="请求方式与数据格式"><a href="#请求方式与数据格式" class="headerlink" title="请求方式与数据格式"></a>请求方式与数据格式</h3><h4 id="get-请求示例"><a href="#get-请求示例" class="headerlink" title="get 请求示例"></a>get 请求示例</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET /test2?name=%E5%BC%A0&amp;age=20 HTTP/1.1</span><br><span class="line">Host: localhost</span><br></pre></td></tr></table></figure>

<ul>
<li>第一行是请求行，GET是请求方式，/test2?name=%E5%BC%A0&amp;age=20是请求路径URI，HTTP/1.1是协议</li>
<li>%E5%BC%A0 是【张】经过 URL 编码后的结果</li>
<li>第二行是请求头</li>
</ul>
<h4 id="post-请求示例"><a href="#post-请求示例" class="headerlink" title="post 请求示例"></a>post 请求示例</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">POST /test2 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Content-Length: 21</span><br><span class="line"></span><br><span class="line">name=%E5%BC%A0&amp;age=18</span><br></pre></td></tr></table></figure>

<ul>
<li><p>第一行是请求行</p>
</li>
<li><p>第二行到第四行往后是请求头</p>
</li>
<li><p>Content-Type：请求体的数据格式</p>
</li>
<li><p>Content-Length：请求体长度，字节数，可以用下面方法快速得到长度</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;&quot;.length</span><br></pre></td></tr></table></figure></li>
<li><p>请求体：空行之下的内容</p>
</li>
</ul>
<p>application/x-www-form-urlencoed 格式细节：</p>
<ul>
<li>参数分成名字和值，中间用 = 分隔，例如name=zhangsan</li>
<li>多个参数使用 &amp; 进行分隔，name=zhangsan&amp;age=10</li>
<li>汉字等特殊字符需要encodeURIComponent() 编码为 【%E5%BC%A0】后才能发送</li>
</ul>
<h4 id="json-请求示例"><a href="#json-请求示例" class="headerlink" title="json 请求示例"></a>json 请求示例</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">POST /test3 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Content-Length: 25</span><br><span class="line"></span><br><span class="line">&#123;&quot;name&quot;:&quot;zhang&quot;,&quot;age&quot;:18&#125;</span><br></pre></td></tr></table></figure>



<p>json 对象格式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&quot;属性名&quot;:属性值&#125;</span><br></pre></td></tr></table></figure>

<p>其中属性值可以是</p>
<ul>
<li><p>字符串 “”</p>
</li>
<li><p>数字</p>
</li>
<li><p>true, false</p>
</li>
<li><p>null</p>
</li>
<li><p>对象</p>
<p>例如{“name”:”zhang”,”age”:18}</p>
</li>
<li><p>数组</p>
<p>json 数组格式：[元素1, 元素2, …]</p>
</li>
</ul>
<p>接收json数据格式需要注解@RequestBody：从请求体中找到数据，并按json格式转换成对象</p>
<p>@ResponseBody：把Java对象转为json格式数据返回</p>
<p>Json数据可以含有中文，不需要像application/x-www-form-urlencoed 格式一样需要编码</p>
<p>值得注意的是一个汉字占用三个字节，因此每多一个汉字加两个字节</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Content-Length: 23</span><br><span class="line"></span><br><span class="line">&#123;&quot;name&quot;:&quot;张&quot;,&quot;age&quot;:18&#125;</span><br></pre></td></tr></table></figure>



<h4 id="multipart-请求示例"><a href="#multipart-请求示例" class="headerlink" title="multipart 请求示例"></a>multipart 请求示例</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">POST /test2 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Content-Type: multipart/form-data; boundary=123</span><br><span class="line">Content-Length: 125</span><br><span class="line"></span><br><span class="line">--123</span><br><span class="line">Content-Disposition: form-data; name=&quot;name&quot;</span><br><span class="line"></span><br><span class="line">lisi</span><br><span class="line">--123</span><br><span class="line">Content-Disposition: form-data; name=&quot;age&quot;</span><br><span class="line"></span><br><span class="line">30</span><br><span class="line">--123--</span><br></pre></td></tr></table></figure>

<ul>
<li>boundary=123 用来定义分隔符</li>
<li>起始分隔符是 <code>--分隔符</code></li>
<li>结束分隔符是 <code>--分隔符--</code></li>
<li>计算带有换行的内容长度用``进行包裹</li>
<li>长度计算时换行符也要计算在内，JavaScript计算的结果+行数 = 116 + 9 = 125</li>
</ul>
<h4 id="数据格式小结"><a href="#数据格式小结" class="headerlink" title="数据格式小结"></a>数据格式小结</h4><p>客户端发送</p>
<ul>
<li>编码 <ul>
<li>application/x-www-form-urlencoded ：url 编码</li>
<li>application/json：utf-8 编码</li>
<li>multipart/form-data：每部分编码可以不同</li>
</ul>
</li>
<li>表单只支持以 application/x-www-form-urlencoded 和 multipart/form-data 格式发送数据</li>
<li>文件上传需要用 multipart/form-data 格式</li>
<li>js (javaScript)代码可以支持任意格式发送数据 </li>
</ul>
<p>服务端接收</p>
<ul>
<li>对 application/x-www-form-urlencoded 和 multipart/form-data 格式的数据，Spring 接收方式是统一的，只需要用 java bean 的属性名对应请求参数名即可</li>
<li>对于 applicaiton/json 格式的数据，Spring 接收需要使用 @RequestBody 注解 + java bean 的方式</li>
</ul>
<h3 id="session-原理"><a href="#session-原理" class="headerlink" title="session 原理"></a>session 原理</h3><p>Http 无状态，有会话</p>
<ul>
<li>无状态是指，请求之间相互独立，第一次请求的数据，第二次请求不能重用</li>
<li>有会话是指，客户端和服务端都有相应的技术，可以暂存数据，让数据在请求间共享</li>
</ul>
<p>服务端使用了 session 技术来暂存数据</p>
<p>存</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET /s1?name=zhang HTTP/1.1</span><br><span class="line">Host: localhost</span><br></pre></td></tr></table></figure>

<p>取</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET /s2 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Cookie: JSESSIONID=560FA845D02AE09B176E1BC5D9816A5D</span><br></pre></td></tr></table></figure>



<p>session 技术实现身份验证</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant Client</span><br><span class="line">participant L as LoginController</span><br><span class="line">participant i as LoginInterceptor</span><br><span class="line">participant Session</span><br><span class="line">rect rgb(200, 223, 255)</span><br><span class="line">Client -&gt;&gt; +L : 登录请求</span><br><span class="line">L -&gt;&gt; L : 检查用户名，密码，验证通过</span><br><span class="line">L -&gt;&gt; +Session : 存入用户名</span><br><span class="line">Session --&gt;&gt; -L: </span><br><span class="line">L --&gt;&gt; -Client: 登录成功</span><br><span class="line">end</span><br><span class="line">rect rgb(200, 190, 255)</span><br><span class="line">Client -&gt;&gt; +i : 其它请求</span><br><span class="line">i -&gt;&gt; +Session : 获取用户名</span><br><span class="line">Session --&gt;&gt; -i : </span><br><span class="line">i -&gt;&gt; i: 用户名存在，放行</span><br><span class="line">i --&gt;&gt; -Client : </span><br><span class="line">end</span><br></pre></td></tr></table></figure>







<h3 id="jwt-原理"><a href="#jwt-原理" class="headerlink" title="jwt 原理"></a>jwt 原理</h3><p>Session实现身份验证对于单体项目比较合适，对于分布式项目jwt更合适</p>
<p>jwt 技术实现身份验证</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant Client</span><br><span class="line">participant L as LoginController</span><br><span class="line">participant i as LoginInterceptor</span><br><span class="line"></span><br><span class="line">rect rgb(200, 223, 255)</span><br><span class="line">Client -&gt;&gt; +L : 登录请求</span><br><span class="line">L -&gt;&gt; L : 检查用户名，密码，验证通过</span><br><span class="line">L --&gt;&gt; -Client : 登录成功，返回token</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">rect rgb(150, 190, 155)</span><br><span class="line">Client -&gt;&gt; +i : 其它请求，携带token</span><br><span class="line">i -&gt;&gt; i : 校验token，校验无误，放行</span><br><span class="line">i --&gt;&gt; -Client : </span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p><strong>生成 token</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET /j1?name=zhang&amp;pass=123 HTTP/1.1</span><br><span class="line">Host: localhost</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j1&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">j1</span><span class="params">(String name, String password)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">&quot;zhang&quot;</span>.equals(name) &amp;&amp; <span class="string">&quot;123&quot;</span>.equals(password))&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> Jwts.builder().setSubject(name).signWith(key).compact();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;验证身份通过：&quot;</span> + token;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;验证失败&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>校验 token</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET /j2 HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Authorization: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9._1-P_TLlzQPb1_lCyGwplMZaKQ8Mcw_plBbYPZ3OX28</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">SecretKey</span> <span class="variable">key</span> <span class="operator">=</span> Keys.secretKeyFor(SignatrureAlgorithm.HS256)</span><br><span class="line"><span class="meta">@RequestMapping(&quot;j2&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">j2</span><span class="params">(RequestHeader String authorization)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        System.out.println(authorization);</span><br><span class="line">        Jws&lt;Claims&gt; jws = Jwts.parserBuilder().setSigningKey(key).build.parseClaimsJws(authorization);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;校验通过，你是：&quot;</span> + jws.getBody().getSubject();</span><br><span class="line">    &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;校验失败&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>token组成</strong></p>
<p>token：eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9._1-P_TLlzQPb1_lCyGwplMZaKQ8Mcw_plBbYPZ3OX28</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Base64.getDecoder().decode(<span class="string">&quot;eyJhbGciOiJIUzI1NiJ9&quot;</span>);<span class="comment">//Base64解码</span></span><br><span class="line">Base64.getDecoder().decode(<span class="string">&quot;eyJzdWIiOiJhZG1pbiJ9&quot;</span>);<span class="comment">//Base64解码</span></span><br></pre></td></tr></table></figure>

<ul>
<li>第一部分：签名算法，”alg” : “HS256”(不加密)</li>
<li>第二部分：数据，”sub” : “zhang”(不加密)，因此不要把敏感数据放在这里</li>
<li>第三部分：签名(加密)</li>
</ul>
<h2 id="Element-UI"><a href="#Element-UI" class="headerlink" title="Element-UI"></a>Element-UI</h2><p><strong>Element</strong>：是饿了么公司前端开发团队提供的一套基于 Vue 的网站组件库，用于快速构建网页。</p>
<ul>
<li><p>将element-ui文件夹拷贝到webapp或静态资源目录下</p>
</li>
<li><p>创建页面，并在页面引入Element 的css、js文件 和 Vue.js</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;element-ui/lib/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>创建Vue核心对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt; </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123; </span><br><span class="line"><span class="attr">el</span>:<span class="string">&quot;#app&quot;</span> &#125;) &lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;ch&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>学生信息管理系统<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-header</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">&quot;200px&quot;</span>&gt;</span>Aside<span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-main</span>&gt;</span>Main<span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.el-header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#B3C0D1</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: left;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.el-aside</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#D3DCE6</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.el-main</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#E9EEF3</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">590px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../element-ui/lib/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><p>即 Cascading  Style  Sheets，它描述了网页的表现与展示效果</p>
<p>在html中引用CSS</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;login.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">或者直接在html中添加</span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.heart</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>) <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><p>优先级：id选择器 &gt; class选择器 &gt; 元素选择器</p>
<ul>
<li><p>type 选择器 - 根据标签名进行匹配（元素选择器）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>111111111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>222222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>333333333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: aqua;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>class 选择器 - 根据元素的 class 属性进行匹配</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>111111111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>222222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>333333333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.c1</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: bisque;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>id 选择器  - 根据元素的 id 属性进行匹配</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>111111111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>222222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p3&quot;</span>&gt;</span>333333333333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#p1</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: aqua;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#p2</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: bisque;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#p3</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: blueviolet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="属性和值"><a href="#属性和值" class="headerlink" title="属性和值"></a>属性和值</h2><ul>
<li>background-color : red;</li>
<li>…</li>
<li>display</li>
</ul>
<h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p>与布局相关的 html 元素</p>
<ul>
<li>div</li>
<li>template</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border</span>: thick double gray<span class="comment">/*边框线*/</span></span><br><span class="line">padding-top: <span class="number">100px</span>;<span class="comment">/*设置元素与该布局(div)的上下间距*/</span></span><br><span class="line"><span class="attribute">padding-bottom</span>: <span class="number">100px</span>;</span><br></pre></td></tr></table></figure>

<h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">color</span>: black;<span class="comment">/*设置字体颜色为黑色*/</span></span><br><span class="line"><span class="attribute">font-weight</span>: bold;<span class="comment">/*设置字体为加粗*/</span></span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">&quot;Helvetica Neue&quot;</span>, sans-serif;<span class="comment">/*设置字体为黑体*/</span></span><br><span class="line"><span class="attribute">font-size</span>: large;<span class="comment">/*字体大小*/</span></span><br></pre></td></tr></table></figure>

<h2 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-align</span>: center;<span class="comment">/*对齐方式为居中*/</span></span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">50px</span>;<span class="comment">/**设置行高**/</span></span><br></pre></td></tr></table></figure>



<h1 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h1><p>它是一种脚本语言，可以用来更改页面内容，控制多媒体，制作图像、动画等等</p>
<ul>
<li><p>js 代码位置</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="comment">// js 代码</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>引入 js 脚本</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js脚本路径&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意，到了框架之后，引入方式会有不同</p>
</li>
<li><p>简单的Javascript代码。一种是镶嵌在HTML内，一种是单独的js文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        a.<span class="property">innerText</span> = <span class="string">&quot;22222&quot;</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>document：代表整个html文档</p>
</li>
<li><p>getElementById：根据Id获取元素</p>
</li>
<li><p>innerText：修改文字内容</p>
</li>
</ul>
</li>
</ul>
<h2 id="变量与数据类型"><a href="#变量与数据类型" class="headerlink" title="变量与数据类型"></a>变量与数据类型</h2><h3 id="声明变量"><a href="#声明变量" class="headerlink" title="声明变量"></a>声明变量</h3><h4 id="let-star"><a href="#let-star" class="headerlink" title="let :star:"></a>let :star:</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> 变量名 = 值;</span><br></pre></td></tr></table></figure>

<p>let 声明的变量可以被多次赋值，例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">100</span>;  <span class="comment">// 初始值是 100</span></span><br><span class="line">a = <span class="number">200</span>;	  <span class="comment">// 被重新赋值为 200</span></span><br></pre></td></tr></table></figure>

<h4 id="const-star"><a href="#const-star" class="headerlink" title="const :star:"></a>const :star:</h4><ul>
<li>const 修饰的叫常量，只能赋值一次</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> b = <span class="number">300</span>; <span class="comment">// 初始值是 300</span></span><br><span class="line">b = <span class="number">400</span>;	   <span class="comment">// error, 不能再次赋值</span></span><br></pre></td></tr></table></figure>

<ul>
<li>const 并不意味着它引用的内容不可修改，例如</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> c = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">c[<span class="number">2</span>] = <span class="number">4</span>; 	        <span class="comment">// ok, 数组内容被修改成 [1,2,4]</span></span><br><span class="line">c = [<span class="number">5</span>,<span class="number">6</span>];			<span class="comment">// error, 不能再次赋值</span></span><br></pre></td></tr></table></figure>

<h4 id="var"><a href="#var" class="headerlink" title="var"></a>var</h4><p>var 声明的变量可以被多次赋值，例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="number">100</span>;</span><br><span class="line">f = <span class="number">200</span>;</span><br></pre></td></tr></table></figure>



<h3 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h3><h4 id="undefined-和-null"><a href="#undefined-和-null" class="headerlink" title="undefined 和 null"></a>undefined 和 null</h4><ul>
<li>执行表达式或函数，没有返回结果，出现 undefined</li>
<li>访问数组不存在的元素，访问对象不存在的属性，出现 undefined</li>
<li>定义变量，没有初始化，出现 undefined</li>
</ul>
<p>例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);  	<span class="comment">// 函数没有返回值, 结果是  undefined</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;		 	<span class="comment">// 表达式没有返回值, 结果是 undefined</span></span><br><span class="line"><span class="keyword">let</span> b = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b[<span class="number">10</span>]); <span class="comment">// 数组未定义元素是 undefined</span></span><br><span class="line"><span class="keyword">let</span> c = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;张三&quot;</span>&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">age</span>); <span class="comment">// 对象未定义属性是 undefined</span></span><br><span class="line"><span class="keyword">let</span> d;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d);		<span class="comment">// 变量未初始化是 undefined</span></span><br></pre></td></tr></table></figure>

<p>二者共同点</p>
<ul>
<li>都没有属性、方法</li>
<li>二者合称 Nullish</li>
</ul>
<p>二者区别</p>
<ul>
<li>undefined 由 js 产生</li>
<li>null 由程序员提供</li>
</ul>
<h4 id="string-star"><a href="#string-star" class="headerlink" title="string :star:"></a>string :star:</h4><p>js 字符串三种写法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;hello&quot;</span>;  <span class="comment">// 双引号</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&#x27;world&#x27;</span>;  <span class="comment">// 单引号</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="string">`hello`</span>;  <span class="comment">// 反引号</span></span><br></pre></td></tr></table></figure>



<p>html 代码如下，用 java 和 js 中的字符串如何表示？</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;1.html&quot;</span>&gt;</span>超链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>java 显得比较繁琐</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;&lt;a href=\&quot;1.html\&quot;&gt;超链接&lt;/a&gt;&quot;</span>;<span class="comment">//加入反斜杠</span></span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;1.html&quot;&gt;超链接&lt;/a&gt;&quot;&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>js 就比较灵活</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 = <span class="string">&#x27;&lt;a href=&quot;1.html&quot;&gt;超链接&lt;/a&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s2 = <span class="string">`&lt;a href=&quot;1.html&quot;&gt;超链接&lt;/a&gt;`</span>;</span><br></pre></td></tr></table></figure>



<p>模板字符串（Template strings）</p>
<p>需求：拼接 URI 的请求参数，如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/test?name=zhang&amp;age=18</span><br><span class="line">/test?name=li&amp;age=20</span><br></pre></td></tr></table></figure>

<p>传统方法拼接</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = ; <span class="comment">// zhang li ...</span></span><br><span class="line"><span class="keyword">let</span> age = ; <span class="comment">// 18 20 ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> uri = <span class="string">&quot;/test?name=&quot;</span> + name + <span class="string">&quot;&amp;age=&quot;</span> + age;</span><br></pre></td></tr></table></figure>

<p>模板字符串方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = zhang;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> uri = <span class="string">`/test?name=<span class="subst">$&#123;name&#125;</span>&amp;age=<span class="subst">$&#123;age&#125;</span>`</span>; <span class="comment">//模板字符串方式必须用反引号包裹</span></span><br></pre></td></tr></table></figure>



<h4 id="number-和-bigint-star"><a href="#number-和-bigint-star" class="headerlink" title="number 和 bigint:star:"></a>number 和 bigint:star:</h4><p>number 类型标识的是双精度浮动小数，例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">10</span> / <span class="number">3</span>;   <span class="comment">// 结果 3.3333333333333335</span></span><br></pre></td></tr></table></figure>

<p>既然是浮点小数，那么可以除零</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">10</span> / <span class="number">0</span>;	  <span class="comment">// 结果 Infinity 正无穷大</span></span><br><span class="line">-<span class="number">10</span> / <span class="number">0</span>;  <span class="comment">// 结果 -Infinity 负无穷大</span></span><br></pre></td></tr></table></figure>

<p>浮点小数都有运算精度问题，例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">2.0</span> - <span class="number">1.1</span>; <span class="comment">// 结果 0.8999999999999999</span></span><br></pre></td></tr></table></figure>

<p>字符串转数字</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;10&quot;</span>); 	<span class="comment">// 结果是数字 10 </span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;10.5&quot;</span>);	<span class="comment">// 结果是数字 10, 去除了小数部分</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;10&quot;</span>) / <span class="number">3</span>; <span class="comment">// 结果仍视为 number 浮点数, 因此结果为 3.3333333333333335</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;abc&quot;</span>);	<span class="comment">// 转换失败，结果是特殊值 NaN (Not a Number)</span></span><br></pre></td></tr></table></figure>

<p>要表示真正的整数，需要用 bigint，数字的结尾用 n 表示它是一个 bigint 类型</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">10n</span> / <span class="number">3n</span>;			<span class="comment">// 结果 3n, 按整数除法处理</span></span><br></pre></td></tr></table></figure>



<h4 id="boolean-star"><a href="#boolean-star" class="headerlink" title="boolean :star:"></a>boolean :star:</h4><ul>
<li>Truthy</li>
<li>Falsy</li>
</ul>
<p>在 js 中，并不是 boolean 才能用于条件判断，你可以在 if 语句中使用【数字】、【字符串】… 作为判断条件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(b) &#123; <span class="comment">// true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入了&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>这时就有一个规则，当需要条件判断时，这个值被当作 true 还是 false，当作 true 的值归类为 truthy，当作 false 的值归类为 falsy</p>
<p>下面值都是 falsy</p>
<ul>
<li><code>false</code></li>
<li><code>Nullish (null, undefined)</code></li>
<li><code>0, 0n, NaN</code></li>
<li><code>&quot;&quot; &#39;&#39; ``</code>  即长度为零的字符串</li>
</ul>
<p>剩余的值绝大部分都是 truthy</p>
<p>有几个容易被当作 falsy 实际是 truthy 的</p>
<ul>
<li><code>&quot;false&quot;, &quot;0&quot;</code> 即字符串的 false 和 字符串的零</li>
<li><code>[]</code> 空数组</li>
<li><code>&#123;&#125;</code> 空对象</li>
</ul>
<h4 id="symbol"><a href="#symbol" class="headerlink" title="symbol"></a>symbol</h4><ul>
<li>很少使用</li>
</ul>
<h3 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h3><h4 id="Function-star-star"><a href="#Function-star-star" class="headerlink" title="Function :star::star:"></a>Function :star::star:</h4><h5 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> 函数名(参数) &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 结果;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123; <span class="comment">//不需要声明函数类型</span></span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">函数名(实参);</span><br></pre></td></tr></table></figure>

<p>例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>);     <span class="comment">// 返回 3</span></span><br></pre></td></tr></table></figure>

<p>js 中的函数调用特点：对参数的<strong>类型</strong>和<strong>个数</strong>都没有限制，例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>);  <span class="comment">// 返回 ab</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);   <span class="comment">// 返回 9, 第三个参数没有被用到, 不会报错</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>);			<span class="comment">// 返回 NaN, 这时 b 没有定义是 undefined, undefined 做数学运算结果就是 NaN</span></span><br></pre></td></tr></table></figure>



<h5 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h5><p>java 中（spring）要实现默认参数的效果得这么做：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">page</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@RequestParam(defaultValue=&quot;1&quot;)</span> <span class="type">int</span> page, </span></span><br><span class="line"><span class="params">        <span class="meta">@RequestParam(defaultValue=&quot;10&quot;)</span> <span class="type">int</span> size</span></span><br><span class="line"><span class="params">    )</span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pagination</span>(<span class="params">page = <span class="number">1</span>, size = <span class="number">10</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(page, size);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h5><p>语法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params">参数</span>) &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 结果;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>第一种场景：定义完毕后立刻调用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;)(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>第二种场景：作为其它对象的方法，例如</p>
<p>页面有元素</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>点我啊<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此元素有一个 onclick 方法，会在鼠标单击这个元素后被执行，onclick 方法刚开始是 null，需要赋值后才能使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">onclick</span> = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;鼠标单击了...&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h5 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(参数) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 结果;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果没有参数，() 还是要保留</li>
<li>如果只有一个参数，() 可以省略</li>
<li>如果函数体内只有一行代码，{} 可以省略</li>
<li>如果这一行代码就是结果，return 可以省略</li>
</ul>
<p>例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">onclick</span> = <span class="function">() =&gt;</span>  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aa&quot;</span>);</span><br></pre></td></tr></table></figure>



<h5 id="函数是对象"><a href="#函数是对象" class="headerlink" title="函数是对象"></a>函数是对象</h5><p>以下形式在 js 中非常常见！</p>
<ol>
<li>可以参与赋值，例，具名函数也能参与赋值</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">abc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;bb&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p1&quot;</span>).<span class="property">onclick</span> = abc;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>有属性、有方法，执行 <code>console.dir(abc)</code>，输出结果如下</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ƒ abc()</span><br><span class="line">    arguments: null</span><br><span class="line">    caller: null</span><br><span class="line">    length: 0</span><br><span class="line">    name: &quot;abc&quot;</span><br><span class="line">    ➡prototype: &#123;constructor: ƒ&#125;</span><br><span class="line">    [[FunctionLocation]]: VM1962:1</span><br><span class="line">    ➡[[Prototype]]: ƒ ()</span><br><span class="line">    ➡[[Scopes]]: Scopes[1]</span><br></pre></td></tr></table></figure>

<ul>
<li><p>其中带有 f 标记的是方法，不带的是属性</p>
</li>
<li><p>带有 ➡ 符号的可以继续展开，限于篇幅省略了</p>
</li>
<li><p>带有 <code>[[ ]]</code> 的是内置属性，不能访问，只能查看</p>
</li>
<li><p>相对重要的是 <code>[[Prototype]]</code> 和 <code>[[Scopes]]</code> 会在后面继承和作用域时讲到</p>
</li>
</ul>
<ol start="3">
<li>可以作为方法参数</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params">fn</span>) &#123;          <span class="comment">// fn 将来可以是一个函数对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">    <span class="title function_">fn</span>();                 <span class="comment">// 调用函数对象</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">b</span>(a)</span><br></pre></td></tr></table></figure>



<ol start="4">
<li>可以作为方法返回值</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">d</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">c</span>()()</span><br></pre></td></tr></table></figure>



<h5 id="函数作用域"><a href="#函数作用域" class="headerlink" title="函数作用域"></a>函数作用域</h5><p>函数可以嵌套（js 代码中很常见，只是嵌套的形式更多是匿名函数，箭头函数）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看下面的例子</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> z = <span class="number">30</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 看这里</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">b</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>以函数为分界线划定作用域，所有函数之外是全局作用域</li>
<li>查找变量时，由内向外查找<ul>
<li>在内层作用域找到变量，就会停止查找，不会再找外层</li>
<li>所有作用域都找不到变量，报错</li>
</ul>
</li>
<li>作用域本质上是函数对象的属性，可以通过 console.dir 来查看调试</li>
</ul>
<h5 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>()();  <span class="comment">// 在外面执行了 b</span></span><br></pre></td></tr></table></figure>

<ul>
<li>函数定义时，它的作用域已经确定好了，因此无论函数将来去了哪，都能从它的作用域中找到当时那些变量</li>
<li>别被概念忽悠了，闭包就是指<strong>函数能够访问自己的作用域中变量</strong></li>
</ul>
<h5 id="let、var-与作用域"><a href="#let、var-与作用域" class="headerlink" title="let、var 与作用域"></a>let、var 与作用域</h5><p>如果函数外层引用的是 let 变量，那么外层普通的 {} 也会作为作用域边界，最外层的 let 也占一个 script 作用域</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果函数外层引用的是 var 变量，外层普通的 {} 不会视为边界</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果 var 变量出现了重名，则他俩会被视为同一作用域中的同一个变量</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> e = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> e = <span class="number">20</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);	<span class="comment">// 打印 20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);		<span class="comment">// 因为是同一个变量，还是打印 20</span></span><br></pre></td></tr></table></figure>

<p>如果是 let，则视为两个作用域中的两个变量</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> e = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> e = <span class="number">20</span>;	</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);	<span class="comment">// 打印 20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);		<span class="comment">// 打印 10</span></span><br></pre></td></tr></table></figure>

<p>要想里面的 e 和外面的 e 能区分开来，最简单的办法是改成 let，或者用函数来界定作用域范围</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> e = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> e = <span class="number">20</span>;</span><br><span class="line">    	<span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">b</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);	</span><br></pre></td></tr></table></figure>



<h4 id="Array-star"><a href="#Array-star" class="headerlink" title="Array :star:"></a>Array :star:</h4><p>语法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建数组</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取数组元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">0</span>]); <span class="comment">// 输出 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改数组元素</span></span><br><span class="line">array[<span class="number">0</span>] = <span class="number">5</span>;		 <span class="comment">// 数组元素变成了 [5,2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历数组元素，其中 length 是数组属性，代表数组长度</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>API</p>
<ul>
<li>push、shift、splice</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]; </span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">push</span>(<span class="number">4</span>);    	<span class="comment">// 向数组尾部(右侧)添加元素, 结果 [1,2,3,4]</span></span><br><span class="line">arr.<span class="title function_">shift</span>();		<span class="comment">// 从数组头部(左侧)移除元素, 结果 [2,3,4]</span></span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">1</span>,<span class="number">1</span>);	<span class="comment">// 删除【参数1】索引位置的【参数2】个元素，结果 [2,4]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>join</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">join</span>(); 		<span class="comment">// 默认使用【,】作为连接符，结果 &#x27;a,b,c&#x27;</span></span><br><span class="line">arr.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);		<span class="comment">// 结果 &#x27;abc&#x27;</span></span><br><span class="line">arr.<span class="title function_">join</span>(<span class="string">&#x27;-&#x27;</span>);		<span class="comment">// 结果 &#x27;a-b-c&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>map、filter、forEach</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">i</span>) &#123;   <span class="comment">// 代表的新旧元素之间的变换规则</span></span><br><span class="line">    <span class="keyword">return</span> i * <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// arr.map(a) // 具名函数，结果 [10,20,30,60]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// arr.map( (i) =&gt; &#123;return i * 10&#125; ); // 箭头函数</span></span><br><span class="line">arr.<span class="title function_">map</span>( <span class="function"><span class="params">i</span> =&gt;</span> i * <span class="number">10</span> ); <span class="comment">// 箭头函数</span></span><br></pre></td></tr></table></figure>

<ul>
<li>传给 map 的函数，参数代表旧元素，返回值代表新元素</li>
</ul>
<p>map 的内部实现（伪代码）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">map</span>(<span class="params">a</span>) &#123; <span class="comment">// 参数是一个函数</span></span><br><span class="line">    <span class="keyword">let</span> narr = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> o = arr[i]; <span class="comment">// 旧元素</span></span><br><span class="line">        <span class="keyword">let</span> n = <span class="title function_">a</span>(o);   <span class="comment">// 新元素</span></span><br><span class="line">        narr.<span class="title function_">push</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> narr;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>filter 例子</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>];</span><br><span class="line">arr.<span class="title function_">filter</span>( <span class="function">(<span class="params">i</span>)=&gt;</span> i % <span class="number">2</span> == <span class="number">1</span> ); <span class="comment">// 结果 [1,3]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>传给 filter 的函数，参数代表旧元素，返回 true 表示要留下的元素</li>
</ul>
<p>forEach 例子</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*for(let i = 0; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="comment">    console.log(arr[i]);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">forEach</span>( <span class="function">(<span class="params">i</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(i) );</span><br></pre></td></tr></table></figure>

<p>两个称呼</p>
<ul>
<li>高阶函数，map，filter，forEach</li>
<li>回调函数，例如作为参数传入的函数</li>
</ul>
<h4 id="Object-star-star"><a href="#Object-star-star" class="headerlink" title="Object :star::star:"></a>Object :star::star:</h4><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    属性名: 值,</span><br><span class="line">    方法名: 函数,</span><br><span class="line">    get 属性名() &#123;&#125;,</span><br><span class="line">    set 属性名(新值) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例1</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu1 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小明&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">study</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;爱学习&quot;</span>);</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例2</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;小黑&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">let</span> study = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;爱学习&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu2 = &#123; name, age, study &#125;</span><br></pre></td></tr></table></figure>

<p>例3（重点）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu3 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小白&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="title function_">study</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;爱学习&quot;</span>);</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意</strong>：对象方法这么写，仅限于对象内部</li>
</ul>
<p>例4</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu4 = &#123;</span><br><span class="line">    <span class="attr">_name</span>: <span class="literal">null</span>, <span class="comment">/*类似于java中私有成员变量*/</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>() &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入了get&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入了set&quot;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用 get，set</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">stu4.<span class="property">name</span> = <span class="string">&quot;小白&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(stu4.<span class="property">name</span>)</span><br></pre></td></tr></table></figure>



<h5 id="特色：属性增删"><a href="#特色：属性增删" class="headerlink" title="特色：属性增删"></a>特色：属性增删</h5><p>对比一下 Java 中的 Object</p>
<ul>
<li>Java 的 Object 是以类作为模板来创建，对象不能脱离类模板的范围，一个对象的属性、能用的方法都是确定好的</li>
<li>js 的对象，不需要什么模板，它的属性和方法可以随时加减</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;;</span><br><span class="line">stu.<span class="property">age</span> = <span class="number">18</span>;					<span class="comment">// 添加属性</span></span><br><span class="line"><span class="keyword">delete</span> stu.<span class="property">age</span>;					<span class="comment">// 删除属性</span></span><br><span class="line"></span><br><span class="line">stu.<span class="property">study</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;		<span class="comment">// 添加方法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;在学习&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>添加 get，set，需要借助 Object.definePropery</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;<span class="attr">_name</span>:<span class="literal">null</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(stu, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>参数1：目标对象</li>
<li>参数2：属性名</li>
<li>参数3：get，set 的定义</li>
</ul>
<h5 id="特色：this"><a href="#特色：this" class="headerlink" title="特色：this"></a>特色：this</h5><p>先来对 Java 中的 this 有个理解</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">(Student <span class="built_in">this</span>, String subject)</span> &#123;</span><br><span class="line">            System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot;在学习 &quot;</span> + subject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;小明&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 下面的代码，本质上是执行 study(stu, &quot;java&quot;)，因此 this 就是 stu</span></span><br><span class="line">        stu.study(<span class="string">&quot;java&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Java 中的 this 是个隐式参数</li>
<li>Java 中，我们说 this 代表的就是调用方法的那个对象</li>
</ul>
<p>js 中的 this 也是隐式参数，但它与函数运行时上下文相关</p>
<p>例如，一个“落单”的函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">study</span>(<span class="params">subject</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;在学习 &quot;</span> + subject)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试一下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">study</span>(<span class="string">&quot;js&quot;</span>);  <span class="comment">// 输出 在学习 js</span></span><br></pre></td></tr></table></figure>

<p>这是因为此时函数执行，全局对象 window 被当作了 this，window 对象的 name 属性是空串</p>
<p>同样的函数，如果作为对象的方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;小白&quot;</span>,</span><br><span class="line">    study</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种情况下，会将当前对象作为 this</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">stu.<span class="title function_">study</span>(<span class="string">&#x27;js&#x27;</span>); 	<span class="comment">// 输出 小白在学习 js</span></span><br></pre></td></tr></table></figure>



<p>还可以动态改变 this</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;<span class="attr">name</span>:<span class="string">&quot;小黑&quot;</span>&#125;;</span><br><span class="line">study.<span class="title function_">call</span>(stu, <span class="string">&quot;js&quot;</span>);	<span class="comment">// 输出 小黑在学习 js</span></span><br></pre></td></tr></table></figure>

<p>这回 study 执行时，就把 call 的第一个参数 stu 作为 this</p>
<p>一个例外是，在<strong>箭头函数</strong>内出现的 this，以外层 this 理解 </p>
<p>用匿名函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小花&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;小黑&quot;</span>,<span class="string">&quot;小明&quot;</span>],</span><br><span class="line">    <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;与&quot;</span> + e + <span class="string">&quot;在玩耍&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">stu.<span class="title function_">play</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>this.name 所在的函数是【落单】的函数，因此 this 代表 window</li>
</ul>
<p>输出结果为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">与小白在玩耍</span><br><span class="line">与小黑在玩耍</span><br><span class="line">与小明在玩耍</span><br></pre></td></tr></table></figure>

<p>用箭头函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小花&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;小黑&quot;</span>,<span class="string">&quot;小明&quot;</span>],</span><br><span class="line">    <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;与&quot;</span> + e + <span class="string">&quot;在玩耍&quot;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>this.name 所在的函数是箭头函数，因此 this 要看它外层的 play 函数，play 又是属于 stu 的方法，因此 this 代表 stu 对象</li>
</ul>
<p>输出结果为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">小花与小白在玩耍</span><br><span class="line">小花与小黑在玩耍</span><br><span class="line">小花与小明在玩耍</span><br></pre></td></tr></table></figure>

<p>不用箭头函数的做法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;小花&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&quot;小白&quot;</span>,<span class="string">&quot;小黑&quot;</span>,<span class="string">&quot;小明&quot;</span>],</span><br><span class="line">    <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> me = <span class="variable language_">this</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(me.<span class="property">name</span> + <span class="string">&quot;与&quot;</span> + e + <span class="string">&quot;在玩耍&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="特色：原型继承"><a href="#特色：原型继承" class="headerlink" title="特色：原型继承"></a>特色：原型继承</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> father = &#123;</span><br><span class="line">    <span class="attr">f1</span>: <span class="string">&#x27;父属性&#x27;</span>,</span><br><span class="line">    <span class="attr">m1</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;父方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> son = <span class="title class_">Object</span>.<span class="title function_">create</span>(father);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(son.<span class="property">f1</span>);  <span class="comment">// 打印 父属性</span></span><br><span class="line">son.<span class="title function_">m1</span>();			  <span class="comment">// 打印 父方法</span></span><br></pre></td></tr></table></figure>

<ul>
<li>father 是父对象，son 去调用 .m1 或 .f1 时，自身对象没有，就到父对象找</li>
<li>son 自己可以添加自己的属性和方法</li>
<li>son 里有特殊属性 <code>__proto__</code> 代表它的父对象，js 术语： son 的原型对象</li>
<li>不同浏览器对打印 son 的 <code>__proto__</code> 属性时显示不同<ul>
<li>Edge 打印 console.dir(son) 显示 <code>[[Prototype]]</code></li>
<li>Firefox 打印 console.dir(son) 显示 <code>&lt;prototype&gt;</code></li>
</ul>
</li>
</ul>
<h5 id="特色：基于函数的原型继承"><a href="#特色：基于函数的原型继承" class="headerlink" title="特色：基于函数的原型继承"></a>特色：基于函数的原型继承</h5><p>出于方便的原因，js 又提供了一种基于函数的原型继承</p>
<blockquote>
<p><strong>函数职责</strong></p>
<ol>
<li><p>负责创建子对象，给子对象提供属性、方法，功能上相当于构造方法</p>
</li>
<li><p>函数有个特殊的属性 prototype，它就是函数创建的子对象的父对象</p>
<p><strong>注意！</strong>名字有差异，这个属性的作用就是为新对象提供原型</p>
</li>
</ol>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">cons</span>(<span class="params">f2</span>) &#123;</span><br><span class="line">    <span class="comment">// 创建子对象(this), 给子对象提供属性和方法</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">f2</span> = f2;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">m2</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;子方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// cons.prototype 就是父对象</span></span><br><span class="line">cons.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">f1</span> = <span class="string">&quot;父属性&quot;</span>;</span><br><span class="line">cons.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">m1</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;父方法&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配合 new 关键字，创建子对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> son = <span class="keyword">new</span> <span class="title function_">cons</span>(<span class="string">&quot;子属性&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>子对象的 <code>__proto__</code> 就是函数的 <code>prototype</code> 属性</p>
<h5 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h5><p>之前我们讲 http 请求格式时，讲过 json 这种数据格式，它的语法看起来与 js 对象非常相似，例如：</p>
<p>一个 json 对象可以长这样：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">18</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>一个 js 对象长这样：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么他们的区别在哪儿呢？我总结了这么几点</p>
<ol>
<li>本质不同<ul>
<li>json 对象本质上是个字符串，它的职责是作为客户端和服务器之间传递数据的一种格式，它的属性只是样子货</li>
<li>js 对象是切切实实的对象，可以有属性方法</li>
</ul>
</li>
<li>语法细节不同<ul>
<li>json 中只能有 null、true|false、数字、字符串（只有双引号）、对象、数组</li>
<li>json 中不能有除以上的其它 js 对象的特性，如方法等</li>
<li>json 中的属性必须用双引号引起来</li>
</ul>
</li>
</ol>
<p>json 字符串与 js 对象的转换</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">JSON</span>.<span class="title function_">parse</span>(json字符串);  <span class="comment">// 返回js对象</span></span><br><span class="line"><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(js对象);  <span class="comment">// 返回json字符串</span></span><br></pre></td></tr></table></figure>



<h3 id="动态类型"><a href="#动态类型" class="headerlink" title="动态类型"></a>动态类型</h3><p>静态类型语言，如 Java，值有类型，变量也有类型、赋值给变量时，类型要相符</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">b</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;  <span class="comment">// 错误</span></span><br></pre></td></tr></table></figure>

<p>而 js 属于动态类型语言，值有类型，但变量没有类型，赋值给变量时，没要求</p>
<p>例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">100</span>;</span><br><span class="line">b = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">b = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<p>动态类型看起来比较灵活，但变量没有类型，会给后期维护带来困难，例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="comment">// obj 的类型未知，必须根据不同类型做出相应的容错处理</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="运算符与表达式"><a href="#运算符与表达式" class="headerlink" title="运算符与表达式"></a>运算符与表达式</h2><ul>
<li><code>+ - * / % ** </code></li>
<li><code>+= -= *= /= %= **=</code></li>
<li><code>++ --</code></li>
<li>位运算、移位运算</li>
<li><code>== != &gt; &gt;= &lt; &lt;=</code></li>
<li><code>=== !==</code> :star:</li>
<li><code>&amp;&amp; || !</code> :star:</li>
<li><code>?? ?.</code> :star:</li>
<li><code>...</code> :star:</li>
<li>解构赋值 :star:</li>
</ul>
<h3 id=""><a href="#" class="headerlink" title="==="></a>===</h3><p>严格相等运算符，用作逻辑判等</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> == <span class="number">1</span>    	<span class="comment">// 返回 true </span></span><br><span class="line"><span class="number">1</span> == <span class="string">&#x27;1&#x27;</span>	<span class="comment">// 返回 true，会先将右侧的字符串转为数字，再做比较</span></span><br><span class="line"><span class="number">1</span> === <span class="string">&#x27;1&#x27;</span>	<span class="comment">// 返回 false，类型不等，直接返回 false</span></span><br></pre></td></tr></table></figure>

<p>typeof 查看某个值的类型</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span>	<span class="comment">// 返回 &#x27;number&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&#x27;1&#x27;</span>	<span class="comment">// 返回 &#x27;string&#x27;</span></span><br></pre></td></tr></table></figure>



<h3 id="-1"><a href="#-1" class="headerlink" title="||"></a>||</h3><p>需求，如果参数 n 没有传递，给它一个【男】</p>
<p><strong>推荐</strong>做法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n = <span class="string">&#x27;男&#x27;</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可能的做法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(n === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        n = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还可能是这样</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    n = (n === <span class="literal">undefined</span>) ? <span class="string">&#x27;男&#x27;</span> : n;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一些老旧代码中可能的做法（不推荐）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    n = n || <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>它的语法是</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">值<span class="number">1</span> || 值<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>如果值1 是 Truthy，返回值1，如果值1 是 Falsy 返回值 2</p>
<h3 id="与"><a href="#与" class="headerlink" title="?? 与 ?."></a>?? 与 ?.</h3><h4 id="-2"><a href="#-2" class="headerlink" title="??"></a>??</h4><p>需求，如果参数 n 没有传递或是 null，给它一个【男】</p>
<p>如果用传统办法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(n === <span class="literal">undefined</span> || n === <span class="literal">null</span>) &#123;</span><br><span class="line">        n = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用 ??</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    n = n ?? <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">值1 ?? 值2</span><br></pre></td></tr></table></figure>

<ul>
<li>值1 是 nullish，返回值2</li>
<li>值1 不是 nullish，返回值1</li>
</ul>
<h4 id="-3"><a href="#-3" class="headerlink" title="?."></a>?.</h4><p>需求，函数参数是一个对象，可能包含有子属性</p>
<p>例如，参数可能是</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu1 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">address</span>: &#123;</span><br><span class="line">        <span class="attr">city</span>: <span class="string">&#x27;北京&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu2 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;李四&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stu3 = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;李四&quot;</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在要访问子属性（有问题）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>.<span class="property">city</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在希望当某个属性是 nullish 时，短路并返回 undefined，可以用 ?.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>?.<span class="property">city</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用传统办法 </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(stu.<span class="property">address</span> === <span class="literal">undefined</span> || stu.<span class="property">address</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>.<span class="property">city</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="…"><a href="#…" class="headerlink" title="…"></a>…</h3><p>展开运算符</p>
<p>作用1：打散数组，把元素传递给多个参数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">a,b,c</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需求，把数组元素依次传递给函数参数</p>
<p>传统写法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(arr[<span class="number">0</span>],arr[<span class="number">1</span>],arr[<span class="number">2</span>]);		<span class="comment">// 输出 1,2,3</span></span><br></pre></td></tr></table></figure>

<p>展开运算符写法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(...arr);					<span class="comment">// 输出 1,2,3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打散可以理解为【去掉了】数组外侧的中括号，只剩下数组元素</li>
</ul>
<p>作用2：复制数组或对象</p>
<p>数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [...arr1];		<span class="comment">// 复制数组</span></span><br></pre></td></tr></table></figure>

<p>对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;...obj1&#125;;		<span class="comment">// 复制对象</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：展开运算符复制属于浅拷贝，例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">address</span>: &#123;<span class="attr">city</span>: <span class="string">&#x27;北京&#x27;</span>&#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o2 = &#123;...o1&#125;;</span><br><span class="line"><span class="comment">//o1的city信息改变，o2也会随之变化，但是name属性不随o1变化</span></span><br></pre></td></tr></table></figure>



<p>作用3：合并数组或对象</p>
<p>合并数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = [<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> a2 = [<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b1 = [...a1,...a2];		<span class="comment">// 结果 [1,2,3,4]</span></span><br><span class="line"><span class="keyword">let</span> b2 = [...a2,<span class="number">5</span>,...a1]	<span class="comment">// 结果 [3,4,5,1,2]</span></span><br></pre></td></tr></table></figure>

<p>合并对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> o2 = &#123;<span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> o3 = &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n1 = &#123;...o1, ...o2&#125;;	<span class="comment">// 结果 &#123;name:&#x27;张三&#x27;,age:18&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n2 = &#123;...o3, ...o2, ...o1&#125;; <span class="comment">// 结果&#123;name:&#x27;李四&#x27;,age:18&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>复制对象时出现同名属性，后面的会覆盖前面的</li>
</ul>
<h3 id="-4"><a href="#-4" class="headerlink" title="[] {}"></a>[] {}</h3><p>解构赋值</p>
<h4 id="-5"><a href="#-5" class="headerlink" title="[]"></a>[]</h4><p>用在声明变量时</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = arr;	<span class="comment">// 结果 a=1, b=2, c=3</span></span><br></pre></td></tr></table></figure>

<p>用在声明参数时</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">[a,b,c]</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) 	<span class="comment">// 结果 a=1, b=2, c=3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(arr);				</span><br></pre></td></tr></table></figure>



<h4 id="-6"><a href="#-6" class="headerlink" title="{}"></a>{}</h4><p>用在声明变量时</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;name,age&#125; = obj;	<span class="comment">// 结果 name=张三, age=18</span></span><br></pre></td></tr></table></figure>

<p>用在声明参数时</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">&#123;name, age&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name, age); <span class="comment">// 结果 name=张三, age=18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(obj)</span><br></pre></td></tr></table></figure>



<h2 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h2><ul>
<li><code>if ... else</code></li>
<li><code>switch</code></li>
<li><code>while</code></li>
<li><code>do ... while</code></li>
<li><code>for</code> </li>
<li><code>for ... in</code> :star:</li>
<li><code>for ... of</code> :star:</li>
<li><code>try ... catch</code> :star:</li>
</ul>
<h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><p>主要用来遍历对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> father = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>, <span class="attr">study</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> n <span class="keyword">in</span> father) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>其中 const n 代表遍历出来的属性名</li>
<li>注意1：方法名也能被遍历出来（它其实也算一种特殊属性）</li>
<li>注意2：遍历子对象时，父对象的属性会跟着遍历出来</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> son = <span class="title class_">Object</span>.<span class="title function_">create</span>(father);</span><br><span class="line">son.<span class="property">sex</span> = <span class="string">&quot;男&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> n <span class="keyword">in</span> son) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意3：在 for in 内获取属性值，要使用 [] 语法，而不能用 . 语法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> n <span class="keyword">in</span> son) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n, son[n]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="for-of"><a href="#for-of" class="headerlink" title="for of"></a>for of</h3><p>主要用来遍历数组，也可以是其它可迭代对象，如 Map，Set 等</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> i <span class="keyword">of</span> a1) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a2 = [</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>:<span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>:<span class="number">22</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> obj <span class="keyword">of</span> a2) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>, obj.<span class="property">age</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> &#123;name,age&#125; <span class="keyword">of</span> a2) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name, age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="try-catch"><a href="#try-catch" class="headerlink" title="try catch"></a>try catch</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stu1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>, <span class="attr">address</span>: &#123;<span class="attr">city</span>:<span class="string">&#x27;北京&#x27;</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">let</span> stu2 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">stu</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(stu.<span class="property">address</span>.<span class="property">city</span>)   </span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;出现了异常&#x27;</span>, e.<span class="property">message</span>)</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;finally&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>(stu1)<span class="comment">//北京</span></span><br><span class="line"><span class="title function_">test</span>(stu2)<span class="comment">//出现了异常，cannot read properties of undefined </span></span><br></pre></td></tr></table></figure>



<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><h4 id="安装-nvm"><a href="#安装-nvm" class="headerlink" title="安装 nvm"></a>安装 nvm</h4><p>nvm 即 (node version manager)，好处是方便切换 node.js 版本</p>
<p>安装注意事项</p>
<ol>
<li>要卸载掉现有的 nodejs</li>
<li>提示选择 nvm 和 nodejs 目录时，一定要避免目录中出现空格</li>
<li>选用【以管理员身份运行】cmd 程序来执行 nvm 命令</li>
<li>首次运行前设置好国内镜像地址</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm node_mirror http://npm.taobao.org/mirrors/node/</span><br><span class="line">nvm npm_mirror https://npm.taobao.org/mirrors/npm/</span><br></pre></td></tr></table></figure>

<p>首先查看有哪些可用版本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm list available</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">|   CURRENT    |     LTS      |  OLD STABLE  | OLD UNSTABLE |</span><br><span class="line">|--------------|--------------|--------------|--------------|</span><br><span class="line">|    18.7.0    |   16.16.0    |   0.12.18    |   0.11.16    |</span><br><span class="line">|    18.6.0    |   16.15.1    |   0.12.17    |   0.11.15    |</span><br><span class="line">|    18.5.0    |   16.15.0    |   0.12.16    |   0.11.14    |</span><br><span class="line">|    18.4.0    |   16.14.2    |   0.12.15    |   0.11.13    |</span><br><span class="line">|    18.3.0    |   16.14.1    |   0.12.14    |   0.11.12    |</span><br><span class="line">|    18.2.0    |   16.14.0    |   0.12.13    |   0.11.11    |</span><br><span class="line">|    18.1.0    |   16.13.2    |   0.12.12    |   0.11.10    |</span><br><span class="line">|    18.0.0    |   16.13.1    |   0.12.11    |    0.11.9    |</span><br><span class="line">|    17.9.1    |   16.13.0    |   0.12.10    |    0.11.8    |</span><br><span class="line">|    17.9.0    |   14.20.0    |    0.12.9    |    0.11.7    |</span><br><span class="line">|    17.8.0    |   14.19.3    |    0.12.8    |    0.11.6    |</span><br><span class="line">|    17.7.2    |   14.19.2    |    0.12.7    |    0.11.5    |</span><br><span class="line">|    17.7.1    |   14.19.1    |    0.12.6    |    0.11.4    |</span><br><span class="line">|    17.7.0    |   14.19.0    |    0.12.5    |    0.11.3    |</span><br><span class="line">|    17.6.0    |   14.18.3    |    0.12.4    |    0.11.2    |</span><br><span class="line">|    17.5.0    |   14.18.2    |    0.12.3    |    0.11.1    |</span><br><span class="line">|    17.4.0    |   14.18.1    |    0.12.2    |    0.11.0    |</span><br><span class="line">|    17.3.1    |   14.18.0    |    0.12.1    |    0.9.12    |</span><br><span class="line">|    17.3.0    |   14.17.6    |    0.12.0    |    0.9.11    |</span><br><span class="line">|    17.2.0    |   14.17.5    |   0.10.48    |    0.9.10    |</span><br></pre></td></tr></table></figure>

<p>建议安装 LTS（长期支持版）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm install 16.16.0</span><br><span class="line">nvm install 14.20.0</span><br></pre></td></tr></table></figure>

<p>执行 <code>nvm list</code> 会列出已安装版本</p>
<p>切换到 16.16.0</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm use 16.16.0</span><br></pre></td></tr></table></figure>

<p>切换到 14.20.0</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm use 14.20.0</span><br></pre></td></tr></table></figure>

<p>安装后 nvm 自己的环境变量会自动添加，但可能需要手工添加 nodejs 的 PATH 环境变量</p>
<h4 id="检查-npm"><a href="#检查-npm" class="headerlink" title="检查 npm"></a>检查 npm</h4><p>npm 是 js 的包管理器，就类似于 java 界的 maven，要确保它使用的是国内镜像</p>
<p>检查镜像</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm get registry</span><br></pre></td></tr></table></figure>

<p>如果返回的不是 <code>https://registry.npm.taobao.org/</code>，需要做如下设置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure>



<h4 id="搭建前端服务器"><a href="#搭建前端服务器" class="headerlink" title="搭建前端服务器"></a>搭建前端服务器</h4><p>新建一个保存项目的 client 文件夹，进入文件夹执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install express --save-dev   </span><br></pre></td></tr></table></figure>

<p>修改 package.json 文件</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;express&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.18.1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>其中 devDependencies 是 npm install –save-dev 添加的</li>
</ul>
<p>编写 main.js 代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&#x27;express&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;./&#x27;</span>))</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">7070</span>)</span><br></pre></td></tr></table></figure>

<p>执行 js 代码（运行前端服务器）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node main.js</span><br></pre></td></tr></table></figure>



<h3 id="前端案例"><a href="#前端案例" class="headerlink" title="前端案例"></a>前端案例</h3><ul>
<li>前端只有静态页面，使用 Express 服务器</li>
<li>后端使用 Tomcat 服务器，通过 SpringBoot、MyBatis 等框架获取数据库数据</li>
</ul>
<h4 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h4><ul>
<li>document.getElementById - 根据 id 值查找一个元素</li>
<li>[document|元素].querySelector - 根据选择器查找第一个匹配元素</li>
<li>[document|元素].querySelectorAll - 根据选择器查找所有匹配元素</li>
</ul>
<p>例如，有下面的 html 代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>学生列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;thead&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row bold&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>编号<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tbody&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>18<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.title&#x27;</span>); <span class="comment">// 找到 &lt;div class=&quot;title&quot;&gt;学生列表&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.col&#x27;</span>); <span class="comment">// 找到 &lt;div class=&quot;col&quot;&gt;编号&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.col&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  找到的是一个集合</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;编号&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;姓名&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;性别&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;年龄&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;1&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;张三&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;男&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;18&lt;/div&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>执行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> thead = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.thead&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只在 thead 元素范围内找</span></span><br><span class="line">thead.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.col&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  找到的是一个集合</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;编号&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;姓名&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;性别&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class=&quot;col&quot;&gt;年龄&lt;/div&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>根据 id 属性查找既可以用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;id值&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>也可以用 </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#id值&quot;</span>)</span><br></pre></td></tr></table></figure>



<h4 id="修改元素内容"><a href="#修改元素内容" class="headerlink" title="修改元素内容"></a>修改元素内容</h4><ul>
<li>元素.innerHTML</li>
<li>元素.textContent</li>
</ul>
<p>例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.title&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;侠客列表&#x27;</span></span><br></pre></td></tr></table></figure>

<p>innerHTML会解析内容中的标签，textContext 不会解析内容中的标签</p>
<p>给 innerHTML 或 textContent 赋值空串，可以实现清空标签内容的效果</p>
<h4 id="利用模板"><a href="#利用模板" class="headerlink" title="利用模板"></a>利用模板</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>学生列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;thead&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row bold&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>编号<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tbody&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;tp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col&quot;</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 将来这些数据从 java 端返回</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> array = [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>, <span class="attr">age</span>: <span class="number">17</span> &#125;</span></span><br><span class="line"><span class="language-javascript">    ];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> tp = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tp&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> row = tp.<span class="property">content</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> [c1,c2,c3,c4] = row.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.col&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> tbody = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tbody&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span>(<span class="keyword">const</span> &#123;id,name,sex,age&#125; <span class="keyword">of</span> array) &#123;</span></span><br><span class="line"><span class="language-javascript">        c1.<span class="property">textContent</span> = id;</span></span><br><span class="line"><span class="language-javascript">        c2.<span class="property">textContent</span> = name;</span></span><br><span class="line"><span class="language-javascript">        c3.<span class="property">textContent</span> = sex;</span></span><br><span class="line"><span class="language-javascript">        c4.<span class="property">textContent</span> = age;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 复制元素</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> newRow = <span class="variable language_">document</span>.importNode(row, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 建立父子关系，左边父，右边子</span></span></span><br><span class="line"><span class="language-javascript">        tbody.<span class="title function_">appendChild</span>(newRow);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="Fetch-API"><a href="#Fetch-API" class="headerlink" title="Fetch API"></a>Fetch API</h4><p>Fetch API 可以用来获取远程数据，它有两种方式接收结果，同步方式与异步方式</p>
<p>格式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(url, options) <span class="comment">// 返回 Promise</span></span><br></pre></td></tr></table></figure>

<p>同步方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> 结果 = <span class="keyword">await</span> <span class="title class_">Promise</span></span><br><span class="line"><span class="comment">// 后续代码</span></span><br></pre></td></tr></table></figure>

<ul>
<li>await 关键字必须在一个标记了 async 的 function 内来使用</li>
<li>后续代码不会在结果返回前执行</li>
</ul>
<p>异步方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Promise</span></span><br><span class="line">	.<span class="title function_">then</span>(结果 =&gt; &#123; ... &#125;)</span><br><span class="line"><span class="comment">// 后续代码                 </span></span><br></pre></td></tr></table></figure>

<ul>
<li>后续代码不必等待结果返回就可以执行</li>
</ul>
<p>例：</p>
<p>在 express 服务器上有 students.json 文件</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;男&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">18</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;女&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">17</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<p>现在用 fetch api 获取这些数据，并展示</p>
<p>同步方式</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">findStudents</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 获取响应对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;students.json&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 获取响应体, 按json格式转换为js数组</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> array = <span class="keyword">await</span> resp.<span class="title function_">json</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 显示数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> tp = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tp&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> row = tp.<span class="property">content</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> [c1,c2,c3,c4] = row.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.col&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> tbody = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tbody&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span>(<span class="keyword">const</span> &#123;id,name,sex,age&#125; <span class="keyword">of</span> array) &#123;</span></span><br><span class="line"><span class="language-javascript">                c1.<span class="property">textContent</span> = id;</span></span><br><span class="line"><span class="language-javascript">                c2.<span class="property">textContent</span> = name;</span></span><br><span class="line"><span class="language-javascript">                c3.<span class="property">textContent</span> = sex;</span></span><br><span class="line"><span class="language-javascript">                c4.<span class="property">textContent</span> = age;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 复制元素</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> newRow = <span class="variable language_">document</span>.importNode(row, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 建立父子关系</span></span></span><br><span class="line"><span class="language-javascript">                tbody.<span class="title function_">appendChild</span>(newRow);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">findStudents</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>fetch(‘students.json’) 内部会发送请求，但响应结果不能立刻返回，因此 await 就是等待响应结果返回</li>
<li>其中 resp.json() 也不是立刻能返回结果，它返回的也是 Promise 对象，也要配合 await 取结果</li>
</ul>
<p>异步方式</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">fetch</span>(<span class="string">&#x27;students.json&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>( <span class="function"><span class="params">resp</span> =&gt;</span> resp.<span class="title function_">json</span>() )</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>( <span class="function"><span class="params">array</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        	<span class="comment">// 显示数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> tp = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tp&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> row = tp.<span class="property">content</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> [c1,c2,c3,c4] = row.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.col&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> tbody = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tbody&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span>(<span class="keyword">const</span> &#123;id,name,sex,age&#125; <span class="keyword">of</span> array) &#123;</span></span><br><span class="line"><span class="language-javascript">                c1.<span class="property">textContent</span> = id;</span></span><br><span class="line"><span class="language-javascript">                c2.<span class="property">textContent</span> = name;</span></span><br><span class="line"><span class="language-javascript">                c3.<span class="property">textContent</span> = sex;</span></span><br><span class="line"><span class="language-javascript">                c4.<span class="property">textContent</span> = age;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 复制元素</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> newRow = <span class="variable language_">document</span>.importNode(row, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 建立父子关系</span></span></span><br><span class="line"><span class="language-javascript">                tbody.<span class="title function_">appendChild</span>(newRow);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>( <span class="function"><span class="params">e</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e) )</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>第一个 then 是在响应返回后，才会调用它里面的箭头函数，箭头函数参数即 resp  响应对象</li>
<li>第二个 then 是在 json 解析完成后，才会调用它里面的箭头函数，箭头函数参数即解析结果（本例是 array 数组）</li>
<li>上一个 then 返回的是 Promise 对象时，才能链式调用下一个 then</li>
</ul>
<p>代理解决</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install http-proxy-middleware --save-dev</span><br></pre></td></tr></table></figure>

<p>在 express 服务器启动代码中加入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createProxyMiddleware&#125; <span class="keyword">from</span> <span class="string">&#x27;http-proxy-middleware&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span>, <span class="title function_">createProxyMiddleware</span>(&#123; <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>, <span class="attr">changeOrigin</span>: <span class="literal">true</span> &#125;));</span><br></pre></td></tr></table></figure>

<p>fetch 代码改为</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://localhost:7070/api/students&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/students&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h4 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h4><p>单个导出 const、let、function</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一齐导出</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;a,b,c&#125;</span><br></pre></td></tr></table></figure>

<p>导出 default，只能有一个</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> b;</span><br></pre></td></tr></table></figure>



<p>import 语法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">import</span> 语句</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>import 需要遵循同源策略</li>
</ul>
<p>整个导入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="variable language_">module</span> <span class="keyword">from</span> <span class="string">&#x27;/1.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>.<span class="property">a</span>)		<span class="comment">// 输出10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>.<span class="property">b</span>)		<span class="comment">// 输出20</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="title function_">c</span>()					<span class="comment">// 输出c</span></span><br></pre></td></tr></table></figure>

<p>单个导入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;a,c&#125; <span class="keyword">from</span> <span class="string">&#x27;/1.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)				<span class="comment">// 输出10</span></span><br><span class="line"><span class="title function_">c</span>()							<span class="comment">// 输出c</span></span><br></pre></td></tr></table></figure>

<p>导入默认</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> x <span class="keyword">from</span> <span class="string">&#x27;/1.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x)				<span class="comment">// 输出20</span></span><br></pre></td></tr></table></figure>

<p>​    </p>
<h1 id="Vue-3"><a href="#Vue-3" class="headerlink" title="Vue 3"></a>Vue 3</h1><h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><h3 id="动态类型的问题"><a href="#动态类型的问题" class="headerlink" title="动态类型的问题"></a>动态类型的问题</h3><p>前面我们讲过 js 属于动态类型语言，例如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">obj</span>) &#123;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>obj 可能只是个字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;hello, world&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>obj 也有可能是个函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="function">()=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello, world&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>obj 类型不确定，就给后期使用者带来了麻烦，一旦参数传不对，代码就崩溃了</p>
<p>动态类型意味着</p>
<ul>
<li>运行代码时才知道发生什么 (running the code to see what happens)</li>
</ul>
<p>静态类型意味着</p>
<ul>
<li>在代码运行前，就对它的行为做出预测 (make predications about what code is expected before it runs)</li>
</ul>
<p>下面的 <strong>typescript</strong> 代码，就在代码运行前对参数加入了约束限制</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">msg : <span class="built_in">string</span></span>) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>限制了参数只能做 string 那些事</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">msg : <span class="built_in">Function</span></span>) &#123;</span><br><span class="line">  <span class="title function_">msg</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>限制了参数只能做函数那些事</li>
</ul>
<h3 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h3><p>安装 typescript 编译器</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>

<p>编写 ts 代码</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params">msg: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">hello</span>(<span class="string">&#x27;hello,world&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>执行 tsc 编译命令</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">tsc xxx.ts</span><br></pre></td></tr></table></figure>

<p>编译生成 js 代码，编译后进行了类型擦除</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">hello</span>(<span class="string">&#x27;hello,world&#x27;</span>);</span><br></pre></td></tr></table></figure>



<p>再来一个例子，用 interface 定义用户类型</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">u: User</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">name</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">age</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhangs&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>编译后</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">u</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">name</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">age</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhangs&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;);</span><br></pre></td></tr></table></figure>



<p>可见，typescript 属于编译时实施类型检查（静态类型）的技术</p>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>例</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>字符串类型</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>数字类型</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>布尔类型</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>数组类型</td>
<td>number[],string[], boolean[] 依此类推</td>
<td></td>
</tr>
<tr>
<td>任意类型</td>
<td>any</td>
<td>相当于又回到了没有类型的时代</td>
</tr>
<tr>
<td>复杂类型</td>
<td>type 与 interface</td>
<td></td>
</tr>
<tr>
<td>函数类型</td>
<td>() =&gt; void</td>
<td>对函数的参数和返回值进行说明</td>
</tr>
<tr>
<td>字面量类型</td>
<td>“a”|”b”|”c”</td>
<td>限制变量或参数的取值</td>
</tr>
<tr>
<td>nullish类型</td>
<td>null 与 undefined</td>
<td></td>
</tr>
<tr>
<td>泛型</td>
<td><code>&lt;T&gt;</code>，<code>&lt;T extends 父类型&gt;</code></td>
<td></td>
</tr>
</tbody></table>
<h4 id="标注位置"><a href="#标注位置" class="headerlink" title="标注位置"></a>标注位置</h4><h5 id="标注变量"><a href="#标注变量" class="headerlink" title="标注变量"></a>标注变量</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;hello,world&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一般可以省略，因为可以根据后面的字面量推断出前面变量类型</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> message = <span class="string">&#x27;hello,world&#x27;</span></span><br></pre></td></tr></table></figure>



<h5 id="标注参数"><a href="#标注参数" class="headerlink" title="标注参数"></a>标注参数</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>很多时候，都能够推断出参数类型</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> names = [<span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Eve&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> lowercaseNames = names.<span class="title function_">map</span>(<span class="function">(<span class="params">e: <span class="built_in">string</span></span>) =&gt;</span> e.<span class="title function_">toLowerCase</span>())</span><br></pre></td></tr></table></figure>

<ul>
<li>可以用类型推断，推断出 e 是 string 类型</li>
</ul>
<h5 id="标注返回值"><a href="#标注返回值" class="headerlink" title="标注返回值"></a>标注返回值</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) : <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>一般也可以省略，因为可以根据返回值做类型推断</li>
</ul>
<h4 id="复杂类型"><a href="#复杂类型" class="headerlink" title="复杂类型"></a>复杂类型</h4><h5 id="type"><a href="#type" class="headerlink" title="type"></a>type</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Cat</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c1</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小白&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">c2</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小花&#x27;</span> &#125;					  <span class="comment">// 错误: 缺少 age 属性</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c3</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小黑&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span>, <span class="attr">sex</span>: <span class="string">&#x27;公&#x27;</span> &#125; <span class="comment">// 错误: 多出 sex 属性</span></span><br></pre></td></tr></table></figure>



<h5 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c1</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小白&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">c2</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小花&#x27;</span> &#125;					  <span class="comment">// 错误: 缺少 age 属性</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c3</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小黑&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span>, <span class="attr">sex</span>: <span class="string">&#x27;公&#x27;</span> &#125; <span class="comment">// 错误: 多出 sex 属性</span></span><br></pre></td></tr></table></figure>



<h5 id="可选属性"><a href="#可选属性" class="headerlink" title="可选属性"></a>可选属性</h5><p>如果需要某个属性可选，可以用下面的语法</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  age?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c1</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小白&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">c2</span>: <span class="title class_">Cat</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;小花&#x27;</span> &#125;					  <span class="comment">// 正确: age 属性可选</span></span><br></pre></td></tr></table></figure>

<ul>
<li>可选属性要注意处理 undefined 值</li>
</ul>
<h5 id="鸭子类型"><a href="#鸭子类型" class="headerlink" title="鸭子类型"></a>鸭子类型</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">cat: Cat</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(cat.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c1 = &#123; <span class="attr">name</span>: <span class="string">&#x27;小白&#x27;</span>, <span class="attr">age</span>: <span class="number">1</span> &#125; </span><br><span class="line"><span class="title function_">test</span>(c1)</span><br></pre></td></tr></table></figure>

<ul>
<li>const c1 并没有声明类型为 Cat，但它与 Cat 类型有一样的属性，也可以被当作是 Cat 类型</li>
</ul>
<h4 id="方法类型"><a href="#方法类型" class="headerlink" title="方法类型"></a>方法类型</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Api</span> &#123;</span><br><span class="line">  <span class="title function_">foo</span>(): <span class="built_in">void</span>,</span><br><span class="line">  <span class="title function_">bar</span>(<span class="attr">str</span>: <span class="built_in">string</span>): <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">api: Api</span>) &#123;</span><br><span class="line">  api.<span class="title function_">foo</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(api.<span class="title function_">bar</span>(<span class="string">&#x27;hello&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(&#123;</span><br><span class="line">  <span class="title function_">foo</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ok&#x27;</span>) &#125;,</span><br><span class="line">  <span class="title function_">bar</span>(<span class="params">str: <span class="built_in">string</span></span>) &#123; <span class="keyword">return</span> str.<span class="title function_">toUpperCase</span>() &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="字面量类型"><a href="#字面量类型" class="headerlink" title="字面量类型"></a>字面量类型</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printText</span>(<span class="params">s: <span class="built_in">string</span>, alignment: <span class="string">&quot;left&quot;</span> | <span class="string">&quot;right&quot;</span> | <span class="string">&quot;center&quot;</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s, alignment)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printText</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"><span class="title function_">printText</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;aaa&#x27;</span>) <span class="comment">// 错误: 取值只能是 left | right | center</span></span><br></pre></td></tr></table></figure>



<h4 id="nullish-类型"><a href="#nullish-类型" class="headerlink" title="nullish 类型"></a>nullish 类型</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">x?: <span class="built_in">string</span> | <span class="literal">null</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x?.<span class="title function_">toUpperCase</span>())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;aaa&#x27;</span>)</span><br><span class="line"><span class="title function_">test</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="title function_">test</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>x?: string | null 表示可能是 undefined 或者是 string 或者是 null</li>
</ul>
<h4 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h4><p>下面的几个类型声明显然有一定的相似性</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">RefString</span> &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">RefNumber</span> &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">RefBoolean</span> &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">boolean</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">r1</span>: <span class="title class_">RefString</span> = &#123; <span class="attr">value</span>: <span class="string">&#x27;hello&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">r2</span>: <span class="title class_">RefNumber</span> = &#123; <span class="attr">value</span>: <span class="number">123</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">r3</span>: <span class="title class_">RefBoolean</span> = &#123; <span class="attr">value</span>: <span class="literal">true</span> &#125;</span><br></pre></td></tr></table></figure>

<p>可以改进为</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Ref</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">value</span>: T</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">r1</span>: <span class="title class_">Ref</span>&lt;<span class="built_in">string</span>&gt; = &#123; <span class="attr">value</span>: <span class="string">&#x27;hello&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">r2</span>: <span class="title class_">Ref</span>&lt;<span class="built_in">number</span>&gt; = &#123; <span class="attr">value</span>: <span class="number">123</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">r3</span>: <span class="title class_">Ref</span>&lt;<span class="built_in">boolean</span>&gt; = &#123; <span class="attr">value</span>: <span class="literal">true</span> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>泛型的要点就是 <code>&lt;类型参数&gt;</code>，把【类型】也当作一个变化的要素，像参数一样传递过来，这样就可以派生出结构相似的新类型</li>
</ul>
<p>函数定义也支持泛型</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> ref&lt;T&gt;(<span class="attr">n</span>: T): <span class="title class_">Ref</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">value</span>: n &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> v1 = <span class="title function_">ref</span>(<span class="string">&quot;hello&quot;</span>); 	<span class="comment">// Ref&lt;string&gt;</span></span><br><span class="line"><span class="keyword">const</span> v2 = <span class="title function_">ref</span>(<span class="number">123.3333</span>);	<span class="comment">// Ref&lt;number&gt;</span></span><br><span class="line"></span><br><span class="line">v1.<span class="property">value</span>.<span class="title function_">toLocaleLowerCase</span>()</span><br><span class="line">v2.<span class="property">value</span>.<span class="title function_">toFixed</span>(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>



<h3 id="意义"><a href="#意义" class="headerlink" title="意义"></a>意义</h3><h4 id="更好理解框架"><a href="#更好理解框架" class="headerlink" title="更好理解框架"></a>更好理解框架</h4><p>现在越来越多的前端框架采用 typescript，如果懂 typescript 语法，可以更好地阅读框架代码</p>
<p>以 Map 为例</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;()</span><br><span class="line">map</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>)</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>)</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value,key,m</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value, key)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>注意编译需要 <code>tsc --target es6 .\xxx.ts</code></li>
</ul>
<h4 id="更好的提示"><a href="#更好的提示" class="headerlink" title="更好的提示"></a>更好的提示</h4><p>例如，从服务器返回的一段 json，如果不用 typescript，则编辑器也不能给出准确的提示</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">User</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">`&#123; &quot;name&quot;:&quot;张三&quot;, &quot;age&quot;:18 &#125;`</span>)</span><br></pre></td></tr></table></figure>



<h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><blockquote>
<p>关于 TypeScript 与 JavaScript 中的类语法不是重点，class 相关语法只是起到辅助作用，更重要的是前面讲的 interface</p>
</blockquote>
<h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>其实会被编译成这个样子（默认 –target=es3）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">User</span> = <span class="comment">/** <span class="doctag">@class</span> */</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">User</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">User</span>;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>所以 js 中的 class，并不等价于 java 中的 class，它还是基于原型实现的，原理参考第二章（036、037）</p>
<h4 id="只读属性"><a href="#只读属性" class="headerlink" title="只读属性"></a>只读属性</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line">u.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span>				<span class="comment">// 编译错误</span></span><br></pre></td></tr></table></figure>

<ul>
<li>readonly 是 typescript 特有的，表示该属性只读</li>
</ul>
<h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>]正在学习`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line">u.<span class="title function_">study</span>()</span><br></pre></td></tr></table></figure>



<h4 id="get，set"><a href="#get，set" class="headerlink" title="get，set"></a>get，set</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">_name</span>: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">name</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">name</span>)</span><br><span class="line">u.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(u.<span class="property">name</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>注意，需要在编译时加上 <code>tsc --target es6 .\xxx.ts</code> 选项</li>
<li>es6 等价于 es2015，再此之上还有 es2016 … es2022</li>
</ul>
<h4 id="类与接口"><a href="#类与接口" class="headerlink" title="类与接口"></a>类与接口</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="title function_">study</span>(<span class="attr">course</span>: <span class="built_in">string</span>): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserImpl</span> <span class="keyword">implements</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">study</span>(<span class="params">course: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>]正在学习[<span class="subst">$&#123;course&#125;</span>]`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">foo</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">User</span> = <span class="keyword">new</span> <span class="title class_">UserImpl</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line">user.<span class="title function_">study</span>(<span class="string">&#x27;Typescript&#x27;</span>)</span><br><span class="line">user.<span class="title function_">foo</span>() <span class="comment">// 错误，必须是接口中定义的方法</span></span><br></pre></td></tr></table></figure>



<h4 id="继承与接口"><a href="#继承与接口" class="headerlink" title="继承与接口"></a>继承与接口</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Flyable</span> &#123;</span><br><span class="line">  <span class="title function_">fly</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bird</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> <span class="keyword">implements</span> <span class="title class_">Flyable</span> &#123;</span><br><span class="line">  <span class="title function_">fly</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>在飞翔`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">b</span>: <span class="title class_">Flyable</span> &amp; <span class="title class_">Animal</span> = <span class="keyword">new</span> <span class="title class_">Bird</span>(<span class="string">&quot;小花&quot;</span>)</span><br><span class="line">b.<span class="title function_">fly</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>Flyable &amp; Animal 表示变量是 flyable 类型，同时也是 Animal 类型</li>
</ul>
<h4 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">  <span class="title function_">study</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`father study`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Father</span> &#123;  </span><br><span class="line">  <span class="title function_">study</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">study</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`son study`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f</span>: <span class="title class_">Father</span> = <span class="keyword">new</span> <span class="title class_">Son</span>()</span><br><span class="line">f.<span class="title function_">study</span>()</span><br></pre></td></tr></table></figure>



<h2 id="Vue3-基础"><a href="#Vue3-基础" class="headerlink" title="Vue3 基础"></a>Vue3 基础</h2><h3 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h3><ul>
<li>只要协议、主机、端口之一不同，就不同源，例如<ul>
<li><a target="_blank" rel="noopener" href="http://localhost:7070/a">http://localhost:7070/a</a> 和 <a target="_blank" rel="noopener" href="https://localhost:7070/b">https://localhost:7070/b</a> 就不同源</li>
</ul>
</li>
<li>同源检查是浏览器的行为，而且只针对 fetch、xhr 请求<ul>
<li>如果是其它客户端，例如 java http client，postman，它们是不做同源检查的</li>
<li>通过表单提交、浏览器直接输入 url 地址这些方式发送的请求，也不会做同源检查</li>
</ul>
</li>
<li>更多相关知识请参考<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS">跨源资源共享（CORS） - HTTP | MDN (mozilla.org)</a></li>
</ul>
</li>
</ul>
<h4 id="代理解决"><a href="#代理解决" class="headerlink" title="代理解决"></a>代理解决</h4><p>修改vite.config.ts，以”/api”开头的请求都会访问代理8080，否则仍然请求7070</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">7070</span>,</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="注解解决"><a href="#注解解决" class="headerlink" title="注解解决"></a>注解解决</h4><p>在Controller层的方法上使用<code>@CrossOrigin</code>注解来为该方法单独配置跨域，如果需要允许来自多个域的请求访问，可以使用数组传递多个域名：@CrossOrigin(origins = {“<a target="_blank" rel="noopener" href="http://example.com&quot;/">http://example.com&quot;</a>, “<a target="_blank" rel="noopener" href="http://foo.com&quot;}/">http://foo.com&quot;}</a>)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@CrossOrigin(origins = &quot;*&quot;)</span><span class="comment">//该类的所有方法允许跨域。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="meta">@CrossOrigin(origins = &quot;http://localhost:7070&quot;)</span><span class="comment">//指定具体ip允许跨域</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还可以使用<code>allowedHeaders</code>和<code>allowedMethods</code>属性来限制请求的头和方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//只允许包含header1和header2头的GET和POST请求来自http://example.com域访问</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@CrossOrigin(origins = &quot;http://example.com&quot;, allowedHeaders = &#123;&quot;header1&quot;, &quot;header2&quot;&#125;, allowedMethods = &#123;RequestMethod.GET, RequestMethod.POST&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h3><ul>
<li>Vue <ul>
<li><strong>选项式 API</strong> 还是 <strong>组合式 API</strong>✔️</li>
<li><strong>HTML</strong> 还是 <strong>单文件组件</strong>✔️</li>
</ul>
</li>
<li>语法<ul>
<li><strong>javascript</strong> 还是 <strong>typescript</strong>✔️</li>
</ul>
</li>
<li>构建工具<ul>
<li><strong>@vue/cli</strong> 还是 <strong>vite</strong>✔️</li>
</ul>
</li>
<li>路由<ul>
<li><strong>vue-router</strong>✔️</li>
</ul>
</li>
<li>共享存储<ul>
<li><strong>vuex</strong> 还是 <strong>pinia</strong>✔️</li>
</ul>
</li>
<li>视图组件<ul>
<li><strong>ElementUI</strong> 还是 <strong>Antdv</strong>✔️</li>
</ul>
</li>
</ul>
<h3 id="环境准备-1"><a href="#环境准备-1" class="headerlink" title="环境准备"></a>环境准备</h3><h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><p>采用 vite 作为前端项目的打包，构建工具</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm init vite@latest</span><br></pre></td></tr></table></figure>

<p>按提示操作</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> 项目目录</span><br><span class="line">npm install</span><br><span class="line">npm run dev//运行</span><br></pre></td></tr></table></figure>



<h4 id="编码-IDE"><a href="#编码-IDE" class="headerlink" title="编码 IDE"></a>编码 IDE</h4><p>推荐采用微软的 VSCode 作为开发工具，到它的官网 <a target="_blank" rel="noopener" href="https://code.visualstudio.com/">Visual Studio Code - Code Editing. Redefined</a> 下载安装即可</p>
<p>要对 *.vue 做语法支持，还要安装一个 Volar 插件</p>
<h4 id="安装-devtools"><a href="#安装-devtools" class="headerlink" title="安装 devtools"></a>安装 devtools</h4><ul>
<li>devtools 插件网址：<a target="_blank" rel="noopener" href="https://devtools.vuejs.org/guide/installation.html">https://devtools.vuejs.org/guide/installation.html</a></li>
</ul>
<h4 id="修改端口"><a href="#修改端口" class="headerlink" title="修改端口"></a>修改端口</h4><p>打开项目根目录下 vite.config.ts</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">7070</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>文档地址：<a target="_blank" rel="noopener" href="https://vitejs.cn/config/#server-port">Vite中文网 (vitejs.cn)</a></li>
</ul>
<h4 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a>配置代理</h4><p>为了避免前后端服务器联调时， fetch、xhr 请求产生跨域问题，需要配置代理，同样是修改项目根目录下 vite.config.ts</p>
<p>以”/api”开头的请求都会访问代理8080，否则仍然请求7070</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">7070</span>,</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>文档地址：Vite中文网 <a target="_blank" rel="noopener" href="https://vitejs.cn/config/#server-proxy">(vitejs.cn)</a></li>
</ul>
<h4 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">index.html</span><br><span class="line">package.json</span><br><span class="line">tsconfig.json</span><br><span class="line">vite.config.ts</span><br><span class="line">├─public</span><br><span class="line">└─src</span><br><span class="line">    ├─assets</span><br><span class="line">    ├─components</span><br><span class="line">    ├─model</span><br><span class="line">    ├─router</span><br><span class="line">    ├─store</span><br><span class="line">    └─views</span><br></pre></td></tr></table></figure>

<ul>
<li>index.html 为主页面</li>
<li>package.json npm 配置文件</li>
<li>tsconfig.json typescript 配置文件</li>
<li>vite.config.ts vite 配置文件</li>
<li>public 静态资源</li>
<li>src/components 可重用组件</li>
<li>src/model 模型定义</li>
<li>src/router 路由</li>
<li>src/store 共享存储</li>
<li>src/views 视图组件</li>
</ul>
<h3 id="Vue-组件"><a href="#Vue-组件" class="headerlink" title="Vue 组件"></a>Vue 组件</h3><p>Vue 的组件文件以 .vue 结尾，每个组件由三部分组成</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>script 代码部分，控制模板的数据来源和行为</li>
<li>template 模板部分，由它生成 html 代码</li>
<li>style 样式部分，一般不咋关心</li>
</ul>
<p>根组件是 src/App.vue，先来个 Hello,world 例子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">let msg = ref(&quot;hello&quot;); // 把数据变成响应式的</span><br><span class="line"></span><br><span class="line">function change() &#123;</span><br><span class="line">  msg.value = &quot;world&quot;;</span><br><span class="line">  console.log(msg);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; value=&quot;修改msg&quot; @click=&quot;change&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>{ {msg} } 用来把一个变量绑定到页面上某个位置</li>
<li>绑定的变量必须用 ref 函数来封装<ul>
<li>ref 返回的是【响应式】数据，即数据一旦变化，页面展示也跟着变化</li>
</ul>
</li>
</ul>
<h4 id="main-ts"><a href="#main-ts" class="headerlink" title="main.ts"></a>main.ts</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">  .<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>createApp 是创建一个 Vue 应用程序，它接收的参数 App 即之前我们看到的根组件</li>
<li>mount 就是把根组件生成的 html 代码片段【挂载】到 index.html 中 id 为 app 的 html 元素上</li>
</ul>
<p>可以修改自己的组件文件，挂载到主页面</p>
<p>新建 src/views/E0.vue，内容如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const msg = ref(&#x27;Hello, World!!&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>修改 main.ts 将自己的组件文件挂载</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="comment">// import App from &#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">E0</span> <span class="keyword">from</span> <span class="string">&#x27;./views/E0.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="variable constant_">E0</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>以后我们用这样的方式演示课堂案例</li>
</ul>
<p>F12打开浏览器控制台，进入 Vue 的开发工具，尝试做如下修改</p>
<p>当把 msg 的值由 “Hello, World” 改为 “你好” 时，会发现页面展示同步发生了变化</p>
<h4 id="ref-与-reactive"><a href="#ref-与-reactive" class="headerlink" title="ref 与 reactive"></a>ref 与 reactive</h4><p>vue 提供了两个函数，都可以将数据变为【响应式】的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">const msg = ref(&#x27;Hello, World&#x27;)</span><br><span class="line">const user = reactive(&#123; name: &#x27;张三&#x27; &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;msg&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;user.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>ref 能将任意类型的数据变为【响应式】的</li>
<li>reactive 只能将对象类型变为【响应式】，对基本类型无效（例如 string，number，boolean）</li>
</ul>
<p>还有一点不同</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">const u1 = ref(&#123; name: &#x27;张三&#x27; &#125;)</span><br><span class="line">const u2 = reactive(&#123; name: &#x27;张三&#x27; &#125;)</span><br><span class="line"></span><br><span class="line">function test() &#123;</span><br><span class="line">  console.log(u1.value)</span><br><span class="line">  console.log(u2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;u1.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;u2.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在 template 模板中使用 ref 包装的数据，直接写【变量名】就可以了</li>
<li>但在代码中要使用 ref 包装的数据，必须用【变量名.value】才能访问到</li>
<li>reactive 包装的数据，在模板中和代码中都是一致的</li>
</ul>
<h4 id="属性绑定"><a href="#属性绑定" class="headerlink" title="属性绑定"></a>属性绑定</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const path = ref(&#x27;/src/assets/vue.svg&#x27;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img :src=&quot;path&quot; alt=&quot;&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>【:属性名】用来将标签属性与【响应式】变量绑定</li>
</ul>
<p>vue中public下的文件不带public前缀</p>
<h4 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const count = ref(0)</span><br><span class="line">function dec() &#123;</span><br><span class="line">  count.value--</span><br><span class="line">&#125;</span><br><span class="line">function inc() &#123;</span><br><span class="line">  count.value++</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; value=&quot;-&quot; @click=&quot;dec&quot;&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; value=&quot;+&quot; @click=&quot;inc&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>【@事件名】用来将标签属性与函数绑定，事件发生后执行函数内代码</li>
</ul>
<h4 id="表单绑定"><a href="#表单绑定" class="headerlink" title="表单绑定"></a>表单绑定</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const user = ref(&#123;</span><br><span class="line">  name:&#x27;张三&#x27;,</span><br><span class="line">  age:18,</span><br><span class="line">  sex:&#x27;男&#x27;,</span><br><span class="line">  fav:[&#x27;游泳&#x27;,&#x27;打球&#x27;]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function saveUser() &#123;</span><br><span class="line">  console.log(user.value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;outer&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请输入姓名&lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; v-model=&quot;user.name&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请输入年龄&lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; v-model=&quot;user.age&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请选择性别&lt;/label&gt;</span><br><span class="line">      男 &lt;input type=&quot;radio&quot; value=&quot;男&quot; v-model=&quot;user.sex&quot;/&gt; </span><br><span class="line">      女 &lt;input type=&quot;radio&quot; value=&quot;女&quot; v-model=&quot;user.sex&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请选择爱好&lt;/label&gt;</span><br><span class="line">      游泳 &lt;input type=&quot;checkbox&quot; value=&quot;游泳&quot; v-model=&quot;user.fav&quot;/&gt; </span><br><span class="line">      打球 &lt;input type=&quot;checkbox&quot; value=&quot;打球&quot; v-model=&quot;user.fav&quot;/&gt; </span><br><span class="line">      健身 &lt;input type=&quot;checkbox&quot; value=&quot;健身&quot; v-model=&quot;user.fav&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=&quot;button&quot; value=&quot;保存&quot; @click=&quot;saveUser&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  div &#123;</span><br><span class="line">    margin-bottom: 8px;</span><br><span class="line">  &#125;</span><br><span class="line">  .outer &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    position: relative;</span><br><span class="line">    padding-left: 80px;</span><br><span class="line">  &#125;</span><br><span class="line">  label &#123;</span><br><span class="line">    text-align: left;</span><br><span class="line">    width: 100px;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left :0;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>用 v-model 实现双向绑定，即 <ul>
<li>javascript 数据可以同步到表单标签</li>
<li>反过来用户在表单标签输入的新值也会同步到 javascript 这边</li>
</ul>
</li>
<li>双向绑定只适用于表单这种带【输入】功能的标签，其它标签的数据绑定，单向就足够了</li>
<li>复选框这种标签，双向绑定的 javascript 数据类型一般用数组</li>
</ul>
<h4 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h4><p>有时在数据展示时要做简单的计算</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const firstName = ref(&#x27;三&#x27;)</span><br><span class="line">const lastName = ref(&#x27;张&#x27;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;lastName + firstName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123;lastName + firstName&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h4&gt;&#123;&#123;lastName + firstName&#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>看起来较为繁琐，可以用计算属性改进</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, computed &#125; from &#x27;vue&#x27;</span><br><span class="line">const firstName = ref(&#x27;三&#x27;)</span><br><span class="line">const lastName = ref(&#x27;张&#x27;)</span><br><span class="line">const fullName = computed(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;enter&#x27;)</span><br><span class="line">  return lastName.value + firstName.value</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;fullName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123;fullName&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h4&gt;&#123;&#123;fullName&#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>fullName 即为计算属性，它具备缓存功能，即 firstName 和 lastName 的值发生了变化，才会重新计算</li>
<li>如果用函数实现相同功能，则没有缓存功能</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const firstName = ref(&#x27;三&#x27;)</span><br><span class="line">const lastName = ref(&#x27;张&#x27;)</span><br><span class="line">function fullName() &#123;</span><br><span class="line">  console.log(&#x27;enter&#x27;)</span><br><span class="line">  return lastName.value + firstName.value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123;fullName()&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123;fullName()&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h4&gt;&#123;&#123;fullName()&#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<h4 id="xhr"><a href="#xhr" class="headerlink" title="xhr"></a>xhr</h4><p>XMLHttpRequest</p>
<p>浏览器中有两套 API 可以和后端交互，发送请求、接收响应，fetch api 前面我们已经介绍过了，另一套 api 是 xhr，基本用法如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">//响应返回后自动执行onload函数</span></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">response</span>)</span><br><span class="line">&#125;</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://localhost:8080/api/students&#x27;</span>)</span><br><span class="line">xhr.<span class="property">responseType</span> = <span class="string">&quot;json&quot;</span> <span class="comment">//注明响应数据的格式</span></span><br><span class="line">xhr.<span class="title function_">send</span>() <span class="comment">//发送请求</span></span><br></pre></td></tr></table></figure>

<p>但这套 api 虽然功能强大，但比较老，不直接支持 Promise，因此有必要对其进行改造</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">get</span>(<span class="params">url: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">    xhr.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span>(xhr.<span class="property">status</span> === <span class="number">200</span>)&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(xhr.<span class="property">response</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(xhr.<span class="property">status</span> === <span class="number">404</span>) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(xhr.<span class="property">response</span>)</span><br><span class="line">      &#125; <span class="comment">// 其它情况也需考虑，这里简化处理</span></span><br><span class="line">    &#125;</span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, url)</span><br><span class="line">    xhr.<span class="property">responseType</span> = <span class="string">&#x27;json&#x27;</span></span><br><span class="line">    xhr.<span class="title function_">send</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Promise 对象适合用来封装异步操作，并可以配合 await 一齐使用</li>
<li>Promise 在构造时，需要一个箭头函数，箭头函数有两个参数 resolve 和 reject<ul>
<li>resolve 是异步操作成功时被调用，把成功的结果传递给它，最后会作为 await 的结果返回</li>
<li>reject 在异步操作失败时被调用，把失败的结果传递给它，最后在 catch 块被捉住</li>
</ul>
</li>
<li>await 会一直等到 Promise 内调用了 resolve 或 reject 才会继续向下运行</li>
</ul>
<p>调用示例1：同步接收结果，不走代理</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/api/students&quot;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(resp)</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用示例2：走代理</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> resp = <span class="keyword">await</span> <span class="title function_">get</span>(<span class="string">&#x27;/api/students&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(resp)  </span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>走代理明显慢不少</li>
</ul>
<h4 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h4><ul>
<li>200 表示响应成功</li>
<li>400 请求数据不正确 age=abc</li>
<li>401 身份验证没通过</li>
<li>403 没有权限</li>
<li>404 资源不存在</li>
<li>405 不支持请求方式 post</li>
<li>500 服务器内部错误</li>
</ul>
<h4 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h4><p>axios 它的底层是用了 XMLHttpRequest（xhr）方式发送请求和接收响应，xhr 相对于之前讲过的 fetch api 来说，功能更强大，但由于是比较老的 api，不支持 Promise，axios 对 xhr 进行了封装，使之支持 Promise，并提供了对请求、响应的统一拦截功能</p>
<h5 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h5><p>axios 就是对 xhr api 的封装，手法与前面例子类似</p>
<p>安装</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure>

<p>一个简单的例子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">let count = ref(0);</span><br><span class="line"></span><br><span class="line">async function getStudents() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    const resp = await axios.get(&quot;/api/students&quot;);</span><br><span class="line">    count.value = resp.data.data.length;</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.log(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  getStudents()</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;学生人数为：&#123;&#123; count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>onMounted 指 vue 组件生成的 html 代码片段，挂载完毕后被执行</li>
</ul>
<p>再来看一个 post 例子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">const student = ref(&#123;</span><br><span class="line">  name: &#x27;&#x27;,</span><br><span class="line">  sex: &#x27;男&#x27;,</span><br><span class="line">  age: 18</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">async function addStudent() &#123;</span><br><span class="line">  console.log(student.value)</span><br><span class="line">  const resp = await axios.post(&#x27;/api/students&#x27;, student.value)</span><br><span class="line">  console.log(resp.data.data)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; placeholder=&quot;请输入姓名&quot; v-model=&quot;student.name&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;label for=&quot;&quot;&gt;请选择性别&lt;/label&gt;</span><br><span class="line">      男 &lt;input type=&quot;radio&quot; value=&quot;男&quot; v-model=&quot;student.sex&quot;/&gt; </span><br><span class="line">      女 &lt;input type=&quot;radio&quot; value=&quot;女&quot; v-model=&quot;student.sex&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=&quot;number&quot; placeholder=&quot;请输入年龄&quot; v-model=&quot;student.age&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=&quot;button&quot; value=&quot;添加&quot; @click=&quot;addStudent&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">div &#123;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h5 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h5><p>开发环境：npm run dev</p>
<p>生产环境：npm run bulid：对项目进行打包</p>
<ul>
<li>开发环境下，联调的后端服务器地址是 <code>http://localhost:8080</code>，</li>
<li>上线改为生产环境后，后端服务器地址为 <code>http://itheima.com</code></li>
</ul>
<p>这就要求我们区分开发环境和生产环境，这件事交给构建工具 vite 来做</p>
<p>默认情况下，vite 支持上面两种环境，分别对应根目录下两个配置文件 </p>
<ul>
<li>.env.development - 开发环境</li>
<li>.env.production - 生产环境</li>
</ul>
<p>针对以上需求，分别在两个文件中加入</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">VITE_BACKEND_API_BASE_URL</span> = <span class="string">&#x27;http://localhost:8080&#x27; //VITE_后的东西自己定义</span></span><br></pre></td></tr></table></figure>

<p>和</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">VITE_BACKEND_API_BASE_URL</span> = <span class="string">&#x27;http://itheima.com&#x27;</span></span><br></pre></td></tr></table></figure>

<p>然后在代码中使用 vite 给我们提供的特殊对象 <code>import.meta.env</code>，就可以获取到 <code>VITE_BACKEND_API_BASE_URL</code> 在不同环境下的值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BACKEND_API_BASE_URL</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">addStudent</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">`<span class="subst">$&#123;<span class="keyword">import</span>.meta.env.VITE_BACKEND_API_BASE_URL&#125;</span>/api/student`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>默认情况下，不能智能提示自定义的环境变量，做如下配置：新增文件 <code>src/env.d.ts</code> 并添加如下内容</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference types=&quot;vite/client&quot; /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ImportMetaEnv</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">VITE_BACKEND_API_BASE_URL</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="comment">// 更多环境变量...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ImportMeta</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">env</span>: <span class="title class_">ImportMetaEnv</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>参考文档地址 <a target="_blank" rel="noopener" href="https://cn.vitejs.dev/guide/env-and-mode.html">环境变量和模式 | Vite 官方中文文档 (vitejs.dev)</a></li>
</ul>
<h5 id="baseURL"><a href="#baseURL" class="headerlink" title="baseURL"></a>baseURL</h5><p>可以自己创建一个 axios 对象，方便添加默认设置，新建文件 /src/api/request.ts</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建新的 axios 对象</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BACKEND_API_BASE_URL</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> _axios</span><br></pre></td></tr></table></figure>

<p>然后在其它组件中引用这个 ts 文件，例如 /src/views/E8.vue，就不用自己拼接路径前缀了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &#x27;../api/request&#x27;</span><br><span class="line">// ...</span><br><span class="line">await axios.post(&#x27;/api/students&#x27;, ...)    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h5 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建新的 axios 对象</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">const</span> _axios = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BACKEND_API_BASE_URL</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">config</span>)=&gt;</span>&#123; <span class="comment">// 统一添加请求头</span></span><br><span class="line">    config.<span class="property">headers</span> = &#123;</span><br><span class="line">      <span class="title class_">Authorization</span>: <span class="string">&#x27;aaa.bbb.ccc&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>)=&gt;</span>&#123; <span class="comment">// 请求出错时的处理</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>)=&gt;</span>&#123; <span class="comment">// 状态码  2xx</span></span><br><span class="line">    <span class="comment">// 这里的code是自定义的错误码</span></span><br><span class="line">    <span class="keyword">if</span>(response.<span class="property">data</span>.<span class="property">code</span> === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response</span><br><span class="line">    &#125;     </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(response.<span class="property">data</span>.<span class="property">code</span> === <span class="number">401</span>) &#123;       </span><br><span class="line">      <span class="comment">// 情况1</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>)=&gt;</span>&#123; <span class="comment">// 状态码 &gt; 2xx, 400,401,403,404,500</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error) <span class="comment">// 处理了异常</span></span><br><span class="line">    <span class="keyword">if</span>(error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">400</span>) &#123;</span><br><span class="line">      <span class="comment">// 情况1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="comment">// 情况2</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123;&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> _axios</span><br></pre></td></tr></table></figure>

<p>处理响应时，又分成两种情况</p>
<ol>
<li>后端返回的是标准响应状态码，这时会走响应拦截器第二个箭头函数，用 error.response.status 做分支判断</li>
<li>后端返回的响应状态码总是200，用自定义错误码表示出错，这时会走响应拦截器第一个箭头函数，用 response.data.code 做分支判断</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">加上<span class="doctag">@ResponseStatus</span>，返回的状态码就是code的值</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="meta">@ExceptionHandler</span></span><br><span class="line"><span class="meta">@ResponseStatus(code = HttpStatus.UNAUTHORIZED)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">handler401</span><span class="params">(Exception401 e)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> R.error(<span class="number">401</span>, e.getMessage())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>另外</p>
<ul>
<li>Promise.reject(error) 类似于将异常继续向上抛出，异常由调用者（Vue组件）来配合 try … catch 来处理</li>
<li>Promise.resolve({}) 表示错误已解决，返回一个空对象，调用者中接到这个空对象时，需要配合 ?. 来避免访问不存在的属性</li>
</ul>
<h4 id="条件与列表"><a href="#条件与列表" class="headerlink" title="条件与列表"></a>条件与列表</h4><p>首先，新增模型数据 src/model/Model8080.ts</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//自定义Student类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">sex</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果 spring 错误，返回的对象格式</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SpringError</span> &#123;</span><br><span class="line">  <span class="attr">timestamp</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">status</span>: <span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">error</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">message</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">path</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果 spring 成功，返回 list 情况</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SpringList</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">data</span>: T[],</span><br><span class="line">  message?: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果 spring 成功，返回 page 情况</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SpringPage</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">data</span>: &#123; <span class="attr">list</span>: T[], <span class="attr">total</span>: <span class="built_in">number</span> &#125;,</span><br><span class="line">  message?: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果 spring 成功，返回 string 情况</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SpringString</span> &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="built_in">string</span>,</span><br><span class="line">  message?: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespError</span> <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">SpringError</span>&gt; &#123; &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespList</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">SpringList</span>&lt;T&gt;&gt; &#123; &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespPage</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">SpringPage</span>&lt;T&gt;&gt; &#123; &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespString</span> <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">SpringString</span>&gt; &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>其中 </p>
<ul>
<li>AxiosRespPage 代表分页时的响应类型</li>
<li>AxiosRespList 代表返回集合时的响应类型</li>
<li>AxiosRespString 代表返回字符串时的响应类型</li>
<li>AxiosRespError 代表 Spring 出错时时的响应类型</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; Student, SpringList &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line"></span><br><span class="line">// 说明 students 数组类型为 Student[]</span><br><span class="line">const students = ref&lt;Student[]&gt;([]);</span><br><span class="line"></span><br><span class="line">async function getStudents() &#123;</span><br><span class="line">  // 说明 resp.data 类型是 SpringList&lt;Student&gt;</span><br><span class="line">  const resp = await axios.get&lt;SpringList&lt;Student&gt;&gt;(&quot;/api/students&quot;);  </span><br><span class="line">  console.log(resp.data.data);</span><br><span class="line">  students.value = resp.data.data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; getStudents());</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;outer&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;学生列表&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;thead&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;row bold&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;col&quot;&gt;编号&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;col&quot;&gt;姓名&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;col&quot;&gt;性别&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;col&quot;&gt;年龄&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;tbody&quot;&gt;</span><br><span class="line">      &lt;div v-if=&quot;students.length === 0&quot;&gt;暂无数据&lt;/div&gt;</span><br><span class="line">      &lt;template v-else&gt;</span><br><span class="line">        &lt;div class=&quot;row&quot; v-for=&quot;s of students&quot; :key=&quot;s.id&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;col&quot;&gt;&#123;&#123; s.id &#125;&#125;&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col&quot;&gt;&#123;&#123; s.name &#125;&#125;&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col&quot;&gt;&#123;&#123; s.sex &#125;&#125;&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;col&quot;&gt;&#123;&#123; s.age &#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.outer &#123;</span><br><span class="line">  font-family: 华文行楷;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">  width: 500px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title &#123;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">  font-size: 30px;</span><br><span class="line">  color: #333;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.row &#123;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.col &#123;</span><br><span class="line">  border: 1px solid #f0f0f0;</span><br><span class="line">  width: 15%;</span><br><span class="line">  height: 35px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 35px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bold .col &#123;</span><br><span class="line">  background-color: #f1f1f1;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>加入泛型是为了更好的提示</li>
<li>v-if 与 v-else 不能和 v-for 处于同一标签</li>
<li>template 标签还有一个用途，就是用它少生成一层真正 html 代码</li>
<li>可以看到将结果封装为响应式数据还是比较繁琐的，后面会使用 useRequest 改进</li>
</ul>
<h4 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h4><p>利用监听器，可以在【响应式】的基础上添加一些副作用，把更多的东西变成【响应式的】</p>
<ul>
<li><p>原本只是数据变化 =&gt; 页面更新</p>
</li>
<li><p>watch 可以在数据变化时 =&gt; 其它更新</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; v-model=&quot;name&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &quot;vue&quot;;</span><br><span class="line">function useStorage(name: string) &#123;</span><br><span class="line">  const data = ref(sessionStorage.getItem(name) ?? &quot;&quot;);</span><br><span class="line">  watch(data, (newValue) =&gt; &#123;</span><br><span class="line">    sessionStorage.setItem(name, newValue);</span><br><span class="line">  &#125;);</span><br><span class="line">  return data;</span><br><span class="line">&#125;</span><br><span class="line">const name = useStorage(&quot;name&quot;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>名称为 useXXXX 的函数，作用是返回带扩展功能的【响应式】数据</li>
<li>localStorage   即使浏览器关闭，数据还在</li>
<li>sessionStorage  数据工作在浏览器活动期间,浏览器关闭数据丢失</li>
</ul>
<h4 id="vueuse"><a href="#vueuse" class="headerlink" title="vueuse"></a>vueuse</h4><p><a target="_blank" rel="noopener" href="https://vueuse.org/">vueuse</a></p>
<p>安装</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install @vueuse/core</span><br></pre></td></tr></table></figure>

<p>一些函数的用法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h3&gt;X: &#123;&#123;x&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;h3&gt;Y: &#123;&#123;y&#125;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">  &lt;h3&gt;&#123;&#123;count&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; @click=&quot;inc()&quot; value=&quot;+&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; @click=&quot;dec()&quot; value=&quot;-&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useMouse, useCounter, useStorage &#125; from &#x27;@vueuse/core&#x27;</span><br><span class="line"></span><br><span class="line">const &#123;x, y&#125; = useMouse()</span><br><span class="line"></span><br><span class="line">const &#123;count, inc, dec&#125; = useCounter()</span><br><span class="line"></span><br><span class="line">const name = useStorage(&quot;name&quot;, &quot;&quot;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="useRequest"><a href="#useRequest" class="headerlink" title="useRequest"></a>useRequest</h4><p>响应式的 axios 封装，官网地址 <a target="_blank" rel="noopener" href="https://next.cn.attojs.org/">一个 Vue 请求库 | VueRequest (attojs.org)</a></p>
<p>首先安装 vue-request</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install vue-request@next</span><br></pre></td></tr></table></figure>

<p>组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h3 v-if=&quot;students.length === 0&quot;&gt;暂无数据&lt;/h3&gt;</span><br><span class="line">  &lt;ul v-else&gt;</span><br><span class="line">    &lt;li v-for=&quot;s of students&quot; :key=&quot;s.id&quot;&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.sex&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.age&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;</span><br><span class="line">import &#123; useRequest &#125; from &#x27;vue-request&#x27;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; AxiosRespList, Student &#125; from &#x27;../model/Model8080&#x27;</span><br><span class="line"></span><br><span class="line">// data 代表就是 axios 的响应对象</span><br><span class="line">const &#123; data &#125; = useRequest&lt;AxiosRespList&lt;Student&gt;&gt;(() =&gt; axios.get(&#x27;/api/students&#x27;))</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data?.value?.data.data || []</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">ul li &#123;</span><br><span class="line">  list-style: none;</span><br><span class="line">  font-family: &quot;华文行楷&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li span:nth-child(1) &#123;</span><br><span class="line">  font-size: 24px;</span><br><span class="line">&#125;</span><br><span class="line">li span:nth-child(2) &#123;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  color: crimson;</span><br><span class="line">  vertical-align: bottom;</span><br><span class="line">&#125;</span><br><span class="line">li span:nth-child(3) &#123;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  color: darkblue;</span><br><span class="line">  vertical-align: top;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>data.value 的取值一开始是 undefined，随着响应返回变成 axios 的响应对象</li>
<li>用 computed 进行适配</li>
</ul>
<h4 id="usePagination"><a href="#usePagination" class="headerlink" title="usePagination"></a>usePagination</h4><p>在 src/model/Model8080.ts 中补充类型说明</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">StudentQueryDto</span> &#123;</span><br><span class="line">  name?: <span class="built_in">string</span>,</span><br><span class="line">  sex?: <span class="built_in">string</span>,</span><br><span class="line">  age?: <span class="built_in">string</span>, <span class="comment">// 18,20</span></span><br><span class="line">  <span class="attr">page</span>: <span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">size</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>js 中类似于 18,20 这样以逗号分隔字符串，会在 get 传参时转换为 java 中的整数数组</li>
</ul>
<p>编写组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; placeholder=&quot;请输入姓名&quot; v-model=&quot;dto.name&quot;&gt;</span><br><span class="line">  &lt;select v-model=&quot;dto.sex&quot;&gt;</span><br><span class="line">    &lt;option value=&quot;&quot; selected&gt;请选择性别&lt;/option&gt;</span><br><span class="line">    &lt;option value=&quot;男&quot;&gt;男&lt;/option&gt;</span><br><span class="line">    &lt;option value=&quot;女&quot;&gt;女&lt;/option&gt;</span><br><span class="line">  &lt;/select&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; placeholder=&quot;请输入年龄范围&quot; v-model=&quot;dto.age&quot;&gt;</span><br><span class="line">  &lt;br&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; placeholder=&quot;请输入页码&quot; v-model=&quot;dto.page&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; placeholder=&quot;请输入页大小&quot; v-model=&quot;dto.size&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;button&quot; value=&quot;搜索&quot; @click=&quot;search&quot;&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;h3 v-if=&quot;students.length === 0&quot;&gt;暂无数据&lt;/h3&gt;</span><br><span class="line">  &lt;ul v-else&gt;</span><br><span class="line">    &lt;li v-for=&quot;s of students&quot; :key=&quot;s.id&quot;&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.sex&#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;s.age&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  总记录数&#123;&#123;total&#125;&#125; 总页数&#123;&#123;totalPage&#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;</span><br><span class="line">import &#123; usePagination &#125; from &#x27;vue-request&#x27;</span><br><span class="line">import &#123; computed, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; AxiosRespPage, Student, StudentQueryDto &#125; from &#x27;../model/Model8080&#x27;</span><br><span class="line"></span><br><span class="line">const dto = ref&lt;StudentQueryDto&gt;(&#123;name:&#x27;&#x27;, sex:&#x27;&#x27;, age:&#x27;&#x27;, page:1, size:5&#125;)</span><br><span class="line"></span><br><span class="line">// data 代表就是 axios 的响应对象</span><br><span class="line">// 泛型参数1: 响应类型</span><br><span class="line">// 泛型参数2: 请求类型</span><br><span class="line">const &#123; data, total, totalPage, run &#125; = usePagination&lt;AxiosRespPage&lt;Student&gt;, StudentQueryDto[]&gt;(</span><br><span class="line">  (d) =&gt; axios.get(&#x27;/api/students/q&#x27;, &#123;params: d&#125;), // 箭头函数</span><br><span class="line">  &#123;</span><br><span class="line">    defaultParams: [ dto.value ], // 默认参数, 会作为参数传递给上面的箭头函数</span><br><span class="line">    pagination: &#123;</span><br><span class="line">      currentKey: &#x27;page&#x27;, // 指明当前页属性</span><br><span class="line">      pageSizeKey: &#x27;size&#x27;, // 指明页大小属性</span><br><span class="line">      totalKey: &#x27;data.data.total&#x27; // 指明总记录数属性</span><br><span class="line">    &#125; </span><br><span class="line">  &#125; // 选项</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data?.value?.data.data.list || []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function search() &#123;</span><br><span class="line">  run(dto.value) // 会作为参数传递给usePagination的箭头函数</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">ul li &#123;</span><br><span class="line">  list-style: none;</span><br><span class="line">  font-family: &quot;华文行楷&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li span:nth-child(1) &#123;</span><br><span class="line">  font-size: 24px;</span><br><span class="line">&#125;</span><br><span class="line">li span:nth-child(2) &#123;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  color: crimson;</span><br><span class="line">  vertical-align: bottom;</span><br><span class="line">&#125;</span><br><span class="line">li span:nth-child(3) &#123;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  color: darkblue;</span><br><span class="line">  vertical-align: top;</span><br><span class="line">&#125;</span><br><span class="line">input,select &#123;</span><br><span class="line">  width: 100px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>usePagination 只需要定义一次，后续还想用它内部的 axios 发请求，只需调用 run 函数</li>
</ul>
<h4 id="子组件"><a href="#子组件" class="headerlink" title="子组件"></a>子组件</h4><h5 id="例1"><a href="#例1" class="headerlink" title="例1"></a>例1</h5><p>定义子组件 Child1</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;card&quot;&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p class=&quot;name&quot;&gt;&#123;&#123;name&#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p class=&quot;location&quot;&gt;&#123;&#123;country&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;img :src=&quot;avatar || &#x27;/src/assets/vue.svg&#x27;&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">// 定义属性,  编译宏</span><br><span class="line">defineProps&lt;&#123;name:string,country:string,avatar?:string&#125;&gt;()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-wrap: wrap;</span><br><span class="line">  justify-content: space-evenly;</span><br><span class="line">  flex-direction: row-reverse;</span><br><span class="line">&#125;</span><br><span class="line">.name &#123;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line">.location &#123;</span><br><span class="line">  font-size: 0.8em;</span><br><span class="line">  color: #6d597a;</span><br><span class="line">&#125;</span><br><span class="line">.card &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-evenly;</span><br><span class="line">  padding: 1em;</span><br><span class="line">  margin: 1rem;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  background: #fff;</span><br><span class="line">  width: 200px;</span><br><span class="line">  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card:hover &#123;</span><br><span class="line">  transform: rotate(-5deg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card img &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  max-width: 55px;</span><br><span class="line">  max-height: 55px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>父组件引用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Child1 name=&quot;张三&quot; country=&quot;中国&quot; avatar=&quot;/src/assets/vue.svg&quot;&gt;&lt;/Child1&gt;</span><br><span class="line">  &lt;Child1 name=&quot;李四&quot; country=&quot;印度&quot; avatar=&quot;/vite.svg&quot;&gt;&lt;/Child1&gt;</span><br><span class="line">  &lt;Child1 name=&quot;王五&quot; country=&quot;韩国&quot; &gt;&lt;/Child1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import Child1 from &#x27;../components/Child1.vue&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h5 id="例2"><a href="#例2" class="headerlink" title="例2"></a>例2</h5><p>首先添加类型说明 model/ModelRandomUser.ts</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AxiosRespResults</span> <span class="keyword">extends</span> <span class="title class_">AxiosResponse</span>&lt;<span class="title class_">Results</span>&gt;&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Results</span> &#123;</span><br><span class="line">  <span class="attr">info</span>: &#123;</span><br><span class="line">    <span class="attr">page</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">results</span>: <span class="built_in">number</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">results</span>: <span class="title class_">Result</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Result</span> &#123;</span><br><span class="line">  <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span> | <span class="string">&#x27;female&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: &#123;</span><br><span class="line">    <span class="attr">first</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">last</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">location</span>: &#123;</span><br><span class="line">    <span class="attr">country</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">picture</span>: &#123;</span><br><span class="line">    <span class="attr">medium</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">login</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子组件不变，父组件使用子组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Child1 v-for=&quot;u of users&quot; </span><br><span class="line">    :name=&quot;u.name.first&quot; </span><br><span class="line">    :country=&quot;u.location.country&quot; </span><br><span class="line">    :avatar=&quot;u.picture.medium&quot;</span><br><span class="line">    :key=&quot;u.login.username&quot;&gt;&lt;/Child1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; AxiosRespResults &#125; from &#x27;../model/ModelRandomUser&#x27;</span><br><span class="line">import Child1 from &quot;../components/Child1.vue&quot;;</span><br><span class="line"></span><br><span class="line">const &#123; data &#125; = useRequest&lt;AxiosRespResults&gt;(</span><br><span class="line">  ()=&gt;axios.get(&#x27;https://randomuser.me/api/?results=3&#x27;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const users = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.results || []</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>如果觉得 Result 数据结构嵌套太复杂，还可以做一个类型映射</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Child1 v-for=&quot;u of users&quot; </span><br><span class="line">    :name=&quot;u.name&quot; </span><br><span class="line">    :country=&quot;u.country&quot; </span><br><span class="line">    :avatar=&quot;u.avatar&quot;</span><br><span class="line">    :key=&quot;u.username&quot;&gt;&lt;/Child1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; AxiosRespResults, Result &#125; from &#x27;../model/ModelRandomUser&#x27;</span><br><span class="line">import Child1 from &quot;../components/Child1.vue&quot;;</span><br><span class="line"></span><br><span class="line">const &#123; data &#125; = useRequest&lt;AxiosRespResults&gt;(</span><br><span class="line">  ()=&gt;axios.get(&#x27;https://randomuser.me/api/?results=3&#x27;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const users = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.results.map(resultToUser) || []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">interface User &#123;</span><br><span class="line">  name: string,</span><br><span class="line">  country: string,</span><br><span class="line">  avatar: string,</span><br><span class="line">  username: string</span><br><span class="line">&#125;</span><br><span class="line">function resultToUser(r:Result):User &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    name: r.name.first,</span><br><span class="line">    country: r.location.country,</span><br><span class="line">    avatar: r.picture.medium,</span><br><span class="line">    username: r.login.username</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>resultToUser 将 Result 类型映射为 User 类型</li>
</ul>
<h2 id="Vue-进阶"><a href="#Vue-进阶" class="headerlink" title="Vue 进阶"></a>Vue 进阶</h2><h3 id="ElementUI"><a href="#ElementUI" class="headerlink" title="ElementUI"></a>ElementUI</h3><p>安装</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install element-plus --save</span><br></pre></td></tr></table></figure>



<p>引入组件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>



<p>测试，在自己的组件中使用 ElementUI 的组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-button&gt;按钮&lt;/el-button&gt;</span><br></pre></td></tr></table></figure>



<h4 id="表格组件"><a href="#表格组件" class="headerlink" title="表格组件"></a>表格组件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-form</span><br><span class="line">    ref=&quot;ruleFormRef&quot;</span><br><span class="line">    :model=&quot;ruleForm&quot;</span><br><span class="line">    :rules=&quot;rules&quot;</span><br><span class="line">    label-width=&quot;120px&quot;</span><br><span class="line">    class=&quot;demo-ruleForm&quot;</span><br><span class="line">    :size=&quot;formSize&quot;</span><br><span class="line">    status-icon</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-form-item label=&quot;Activity name&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;ruleForm.name&quot; /&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;Activity zone&quot; prop=&quot;region&quot;&gt;</span><br><span class="line">      &lt;el-select v-model=&quot;ruleForm.region&quot; placeholder=&quot;Activity zone&quot;&gt;</span><br><span class="line">        &lt;el-option label=&quot;Zone one&quot; value=&quot;shanghai&quot; /&gt;</span><br><span class="line">        &lt;el-option label=&quot;Zone two&quot; value=&quot;beijing&quot; /&gt;</span><br><span class="line">      &lt;/el-select&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;Activity count&quot; prop=&quot;count&quot;&gt;</span><br><span class="line">      &lt;el-select-v2</span><br><span class="line">        v-model=&quot;ruleForm.count&quot;</span><br><span class="line">        placeholder=&quot;Activity count&quot;</span><br><span class="line">        :options=&quot;options&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;Activity time&quot; required&gt;</span><br><span class="line">      &lt;el-col :span=&quot;11&quot;&gt;</span><br><span class="line">        &lt;el-form-item prop=&quot;date1&quot;&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model=&quot;ruleForm.date1&quot;</span><br><span class="line">            type=&quot;date&quot;</span><br><span class="line">            label=&quot;Pick a date&quot;</span><br><span class="line">            placeholder=&quot;Pick a date&quot;</span><br><span class="line">            style=&quot;width: 100%&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col class=&quot;text-center&quot; :span=&quot;2&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;text-gray-500&quot;&gt;-&lt;/span&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;11&quot;&gt;</span><br><span class="line">        &lt;el-form-item prop=&quot;date2&quot;&gt;</span><br><span class="line">          &lt;el-time-picker</span><br><span class="line">            v-model=&quot;ruleForm.date2&quot;</span><br><span class="line">            label=&quot;Pick a time&quot;</span><br><span class="line">            placeholder=&quot;Pick a time&quot;</span><br><span class="line">            style=&quot;width: 100%&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;Instant delivery&quot; prop=&quot;delivery&quot;&gt;</span><br><span class="line">      &lt;el-switch v-model=&quot;ruleForm.delivery&quot; /&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;Activity type&quot; prop=&quot;type&quot;&gt;</span><br><span class="line">      &lt;el-checkbox-group v-model=&quot;ruleForm.type&quot;&gt;</span><br><span class="line">        &lt;el-checkbox label=&quot;Online activities&quot; name=&quot;type&quot; /&gt;</span><br><span class="line">        &lt;el-checkbox label=&quot;Promotion activities&quot; name=&quot;type&quot; /&gt;</span><br><span class="line">        &lt;el-checkbox label=&quot;Offline activities&quot; name=&quot;type&quot; /&gt;</span><br><span class="line">        &lt;el-checkbox label=&quot;Simple brand exposure&quot; name=&quot;type&quot; /&gt;</span><br><span class="line">      &lt;/el-checkbox-group&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;Resources&quot; prop=&quot;resource&quot;&gt;</span><br><span class="line">      &lt;el-radio-group v-model=&quot;ruleForm.resource&quot;&gt;</span><br><span class="line">        &lt;el-radio label=&quot;Sponsorship&quot; /&gt;</span><br><span class="line">        &lt;el-radio label=&quot;Venue&quot; /&gt;</span><br><span class="line">      &lt;/el-radio-group&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label=&quot;Activity form&quot; prop=&quot;desc&quot;&gt;</span><br><span class="line">      &lt;el-input v-model=&quot;ruleForm.desc&quot; type=&quot;textarea&quot; /&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item&gt;</span><br><span class="line">      &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm(ruleFormRef)&quot;&gt;</span><br><span class="line">        Create</span><br><span class="line">      &lt;/el-button&gt;</span><br><span class="line">      &lt;el-button @click=&quot;resetForm(ruleFormRef)&quot;&gt;Reset&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import type &#123; FormInstance, FormRules &#125; from &#x27;element-plus&#x27;</span><br><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line"></span><br><span class="line">const formSize = ref(&#x27;default&#x27;)</span><br><span class="line">const ruleFormRef = ref&lt;FormInstance&gt;()</span><br><span class="line">const ruleForm = reactive(&#123;</span><br><span class="line">  name: &#x27;Hello&#x27;,</span><br><span class="line">  region: &#x27;&#x27;,</span><br><span class="line">  count: &#x27;&#x27;,</span><br><span class="line">  date1: &#x27;&#x27;,</span><br><span class="line">  date2: &#x27;&#x27;,</span><br><span class="line">  delivery: false,</span><br><span class="line">  type: [],</span><br><span class="line">  resource: &#x27;&#x27;,</span><br><span class="line">  desc: &#x27;&#x27;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const rules = reactive&lt;FormRules&gt;(&#123;</span><br><span class="line">  name: [</span><br><span class="line">    &#123; required: true, message: &#x27;Please input Activity name&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">    &#123; min: 3, max: 5, message: &#x27;Length should be 3 to 5&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">  ],</span><br><span class="line">  region: [</span><br><span class="line">    &#123;</span><br><span class="line">      required: true,</span><br><span class="line">      message: &#x27;Please select Activity zone&#x27;,</span><br><span class="line">      trigger: &#x27;change&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  count: [</span><br><span class="line">    &#123;</span><br><span class="line">      required: true,</span><br><span class="line">      message: &#x27;Please select Activity count&#x27;,</span><br><span class="line">      trigger: &#x27;change&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  date1: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: &#x27;date&#x27;,</span><br><span class="line">      required: true,</span><br><span class="line">      message: &#x27;Please pick a date&#x27;,</span><br><span class="line">      trigger: &#x27;change&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  date2: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: &#x27;date&#x27;,</span><br><span class="line">      required: true,</span><br><span class="line">      message: &#x27;Please pick a time&#x27;,</span><br><span class="line">      trigger: &#x27;change&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  type: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: &#x27;array&#x27;,</span><br><span class="line">      required: true,</span><br><span class="line">      message: &#x27;Please select at least one activity type&#x27;,</span><br><span class="line">      trigger: &#x27;change&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  resource: [</span><br><span class="line">    &#123;</span><br><span class="line">      required: true,</span><br><span class="line">      message: &#x27;Please select activity resource&#x27;,</span><br><span class="line">      trigger: &#x27;change&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  desc: [</span><br><span class="line">    &#123; required: true, message: &#x27;Please input activity form&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const submitForm = async (formEl: FormInstance | undefined) =&gt; &#123;</span><br><span class="line">  if (!formEl) return</span><br><span class="line">  await formEl.validate((valid, fields) =&gt; &#123;</span><br><span class="line">    if (valid) &#123;</span><br><span class="line">      const response =  axios.post(&#x27;/create-activity&#x27;, ruleForm)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      console.log(&#x27;error submit!&#x27;, fields)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const resetForm = (formEl: FormInstance | undefined) =&gt; &#123;</span><br><span class="line">  if (!formEl) return</span><br><span class="line">  formEl.resetFields()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const options = Array.from(&#123; length: 10000 &#125;).map((_, idx) =&gt; (&#123;</span><br><span class="line">  value: `$&#123;idx + 1&#125;`,</span><br><span class="line">  label: `$&#123;idx + 1&#125;`,</span><br><span class="line">&#125;))</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="分页组件"><a href="#分页组件" class="headerlink" title="分页组件"></a>分页组件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-table v-bind:data=&quot;students&quot;&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;编号&quot; prop=&quot;id&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;姓名&quot; prop=&quot;name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;性别&quot; prop=&quot;sex&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;年龄&quot; prop=&quot;age&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;el-pagination </span><br><span class="line">            :total=&quot;total&quot;</span><br><span class="line">            :page-size=&quot;queryDto.size&quot;</span><br><span class="line">            :current-page=&quot;queryDto.page&quot;</span><br><span class="line">            layout=&quot;prev,pager,next,sizes,-&gt;,total&quot;</span><br><span class="line">            :page-sizes=&quot;[5,10,15,20]&quot;</span><br><span class="line">            @current-change=&quot;currentChange&quot;</span><br><span class="line">            @size-change=&quot;sizeChange&quot;</span><br><span class="line">        &gt;&lt;/el-pagination&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../util/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.query();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        currentChange(page) &#123;</span><br><span class="line">            this.queryDto.page = page;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        sizeChange(size)&#123;</span><br><span class="line">            this.queryDto.size = size;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        async query() &#123;</span><br><span class="line">            const resp = await axios.get(&#x27;/api/students/q&#x27;, &#123;</span><br><span class="line">                params: this.queryDto</span><br><span class="line">            &#125;);</span><br><span class="line">            this.students = resp.data.data.list;</span><br><span class="line">            this.total = resp.data.data.total;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: [],</span><br><span class="line">            total: 0,</span><br><span class="line">            queryDto: &#123;</span><br><span class="line">                page: 1,</span><br><span class="line">                size: 5</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>三种情况都应该触发查询<ul>
<li>mounted 组件挂载完成后</li>
<li>页号变化时</li>
<li>页大小变化时</li>
</ul>
</li>
<li>查询传参应该根据后台需求，灵活采用不同方式<ul>
<li>本例中因为是 get 请求，无法采用请求体，只能用 params 方式传参</li>
</ul>
</li>
<li>返回响应的格式也许会很复杂，需要掌握【根据返回的响应结构，获取数据】的能力</li>
</ul>
<h4 id="分页搜索"><a href="#分页搜索" class="headerlink" title="分页搜索"></a>分页搜索</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-input placeholder=&quot;请输入姓名&quot; size=&quot;mini&quot; v-model=&quot;queryDto.name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;el-select placeholder=&quot;请选择性别&quot; size=&quot;mini&quot; v-model=&quot;queryDto.sex&quot; clearable&gt;</span><br><span class="line">            &lt;el-option value=&quot;男&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;女&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">        &lt;el-select placeholder=&quot;请选择年龄&quot; size=&quot;mini&quot; v-model=&quot;queryDto.age&quot; clearable&gt;</span><br><span class="line">            &lt;el-option value=&quot;0,20&quot; label=&quot;0到20岁&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;21,30&quot; label=&quot;21到30岁&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;31,40&quot; label=&quot;31到40岁&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option value=&quot;41,120&quot; label=&quot;41到120岁&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; size=&quot;mini&quot; @click=&quot;search()&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">        &lt;el-divider&gt;&lt;/el-divider&gt;</span><br><span class="line">        &lt;el-table v-bind:data=&quot;students&quot;&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;编号&quot; prop=&quot;id&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;姓名&quot; prop=&quot;name&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;性别&quot; prop=&quot;sex&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;年龄&quot; prop=&quot;age&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;el-pagination :total=&quot;total&quot; :page-size=&quot;queryDto.size&quot; :current-page=&quot;queryDto.page&quot;</span><br><span class="line">            layout=&quot;prev,pager,next,sizes,-&gt;,total&quot; :page-sizes=&quot;[5, 10, 15, 20]&quot; @current-change=&quot;currentChange&quot;</span><br><span class="line">            @size-change=&quot;sizeChange&quot;&gt;&lt;/el-pagination&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../util/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.query();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        currentChange(page) &#123;</span><br><span class="line">            this.queryDto.page = page;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        sizeChange(size) &#123;</span><br><span class="line">            this.queryDto.size = size;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;,</span><br><span class="line">        async query() &#123;</span><br><span class="line">            const resp = await axios.get(&#x27;/api/students/q&#x27;, &#123;</span><br><span class="line">                params: this.queryDto</span><br><span class="line">            &#125;);</span><br><span class="line">            this.students = resp.data.data.list;</span><br><span class="line">            this.total = resp.data.data.total;</span><br><span class="line">        &#125;,</span><br><span class="line">        search() &#123;</span><br><span class="line">            this.query();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            students: [],</span><br><span class="line">            total: 0,</span><br><span class="line">            queryDto: &#123;</span><br><span class="line">                name: &#x27;&#x27;,</span><br><span class="line">                sex: &#x27;&#x27;,</span><br><span class="line">                age: &#x27;&#x27;,  </span><br><span class="line">                page: 1,</span><br><span class="line">                size: 5</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>sex 与  age 均用 <code>&#39;&#39;</code> 表示用户没有选择的情况</li>
<li>age 取值 <code>0,20</code> 会被 spring 转换为 <code>new int[]&#123;0, 20&#125;</code></li>
<li>age 取值 <code>&#39;&#39;</code> 会被 spring 转换为 <code>new int[0]</code></li>
</ul>
<h4 id="级联选择"><a href="#级联选择" class="headerlink" title="级联选择"></a>级联选择</h4><p>级联选择器中选项的数据结构为</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;<span class="attr">value</span>:<span class="number">100</span>, <span class="attr">label</span>:<span class="string">&#x27;主页&#x27;</span>,<span class="attr">children</span>:[</span><br><span class="line">        &#123;<span class="attr">value</span>:<span class="number">101</span>, <span class="attr">label</span>:<span class="string">&#x27;菜单1&#x27;</span>, <span class="attr">children</span>:[</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">105</span>, <span class="attr">label</span>:<span class="string">&#x27;子项1&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">106</span>, <span class="attr">label</span>:<span class="string">&#x27;子项2&#x27;</span>&#125;</span><br><span class="line">        ]&#125;,</span><br><span class="line">        &#123;<span class="attr">value</span>:<span class="number">102</span>, <span class="attr">label</span>:<span class="string">&#x27;菜单2&#x27;</span>, <span class="attr">children</span>:[</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">107</span>, <span class="attr">label</span>:<span class="string">&#x27;子项3&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">108</span>, <span class="attr">label</span>:<span class="string">&#x27;子项4&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">109</span>, <span class="attr">label</span>:<span class="string">&#x27;子项5&#x27;</span>&#125;</span><br><span class="line">        ]&#125;,</span><br><span class="line">        &#123;<span class="attr">value</span>:<span class="number">103</span>, <span class="attr">label</span>:<span class="string">&#x27;菜单3&#x27;</span>, <span class="attr">children</span>:[</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">110</span>, <span class="attr">label</span>:<span class="string">&#x27;子项6&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">value</span>:<span class="number">111</span>, <span class="attr">label</span>:<span class="string">&#x27;子项7&#x27;</span>&#125;</span><br><span class="line">        ]&#125;,</span><br><span class="line">        &#123;<span class="attr">value</span>:<span class="number">104</span>, <span class="attr">label</span>:<span class="string">&#x27;菜单4&#x27;</span>&#125;</span><br><span class="line">    ]&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>下面的例子是将后端返回的一维数组【树化】</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;el-cascader :options=&quot;ops&quot;&gt;&lt;/el-cascader&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;../util/myaxios&#x27;</span><br><span class="line">const options = &#123;</span><br><span class="line">    async mounted() &#123;</span><br><span class="line">        const resp = await axios.get(&#x27;/api/menu&#x27;)</span><br><span class="line">        console.log(resp.data.data)</span><br><span class="line">        const array = resp.data.data;</span><br><span class="line"></span><br><span class="line">        const map = new Map(); </span><br><span class="line"></span><br><span class="line">        // 1. 将所有数据存入 map 集合(为了接下来查找效率)</span><br><span class="line">        for(const &#123;id,name,pid&#125; of array) &#123;</span><br><span class="line">            map.set(id, &#123;value:id, label:name, pid:pid&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        // 2. 建立父子关系</span><br><span class="line">        // 3. 找到顶层对象</span><br><span class="line">        const top = [];</span><br><span class="line">        for(const obj of map.values()) &#123;</span><br><span class="line">            const parent = map.get(obj.pid);</span><br><span class="line">            if(parent !== undefined) &#123;</span><br><span class="line">                parent.children ??= [];</span><br><span class="line">                parent.children.push(obj);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                top.push(obj)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        this.ops = top;</span><br><span class="line">    &#125;,</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            ops: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">export default options;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="Antdv"><a href="#Antdv" class="headerlink" title="Antdv"></a>Antdv</h3><p>添加必要插件</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install ant-design-vue</span><br></pre></td></tr></table></figure>

<ul>
<li>ant-design-vue 组件库插件</li>
</ul>
<p>引入 antdv 功能，修改 main.ts</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> antd <span class="keyword">from</span> <span class="string">&#x27;ant-design-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;ant-design-vue/dist/antd.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(antd).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h4 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- &lt;a-table :columns=&quot;columns&quot; :dataSource=&quot;students&quot; rowKey=&quot;id&quot;&gt;&lt;/a-table&gt; --&gt;</span><br><span class="line">  &lt;a-table :columns=&quot;columns&quot; :dataSource=&quot;students&quot; :rowKey=&quot;rowKey&quot;&gt;&lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; AxiosRespList, Student &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line"></span><br><span class="line">const &#123;data&#125; = useRequest&lt;AxiosRespList&lt;Student&gt;&gt;(</span><br><span class="line">  ()=&gt;axios.get(&#x27;/api/students&#x27;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.data || []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function rowKey(r:Student) &#123;</span><br><span class="line">  return r.id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const columns = ref([</span><br><span class="line">  &#123;</span><br><span class="line">    title:&#x27;编号&#x27;,</span><br><span class="line">    dataIndex:&#x27;id&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title:&#x27;姓名&#x27;,</span><br><span class="line">    dataIndex:&#x27;name&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title:&#x27;性别&#x27;,</span><br><span class="line">    dataIndex:&#x27;sex&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title:&#x27;年龄&#x27;,</span><br><span class="line">    dataIndex:&#x27;age&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在Table中，dataSource和columns里的数据值都需要指定key值。对于dataSource默认将每列数据的key属性作为唯一的标识。如果数据没有这个属性，务必使用rowKey来指定数据列的主键。若没有指定，控制台会出现缺少key的提示，表格组件也会出错，可以使用id作为唯一标识。</p>
<h4 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-table :columns=&quot;columns&quot; :data-source=&quot;students&quot; row-key=&quot;id&quot;</span><br><span class="line">   :pagination=&quot;pagination&quot; @change=&quot;tableChange&quot;&gt;&lt;/a-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; usePagination &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; AxiosRespPage, Student, StudentQueryDto &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line">import &#123; PaginationProps &#125; from &quot;ant-design-vue&quot;;</span><br><span class="line">import DateBody from &quot;ant-design-vue/lib/vc-picker/panels/DatePanel/DateBody&quot;;</span><br><span class="line"></span><br><span class="line">const dto = ref(&#123;page: 1, size: 5&#125;)</span><br><span class="line"></span><br><span class="line">//执行后会返回一个名为run的函数</span><br><span class="line">const &#123;data, total, run&#125; = usePagination&lt;AxiosRespPage&lt;Student&gt;, StudentQueryDto[]&gt;(</span><br><span class="line">  (d)=&gt; axios.get(&#x27;/api/students/q&#x27;, &#123;params:d&#125;),</span><br><span class="line">  &#123;</span><br><span class="line">    defaultParams: [dto.value],</span><br><span class="line">    pagination: &#123;</span><br><span class="line">      currentKey: &quot;page&quot;,</span><br><span class="line">      pageSizeKey: &#x27;size&#x27;,</span><br><span class="line">      totalKey: &#x27;data.data.total&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// 在页号或页大小改变时调用</span><br><span class="line">function tableChange(pagination: PaginationProps) &#123; </span><br><span class="line">  console.log(pagination)</span><br><span class="line">  dto.value.page = pagination.current ?? 1</span><br><span class="line">  dto.value.size = pagination.pageSize ?? 5</span><br><span class="line">  run(dto.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const pagination = computed&lt;PaginationProps&gt;(()=&gt;&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    current: dto.value.page, // 当前页</span><br><span class="line">    pageSize: dto.value.size, // 页大小</span><br><span class="line">    total: total.value,       // 总记录数</span><br><span class="line">    showSizeChanger: true,    // 显示页大小的下拉列表</span><br><span class="line">    pageSizeOptions: [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;] // 自定义下拉列表内容，每页显示几条</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.data.list || []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const columns = ref([</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;编号&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;姓名&quot;,</span><br><span class="line">    dataIndex: &quot;name&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;性别&quot;,</span><br><span class="line">    dataIndex: &quot;sex&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;年龄&quot;,</span><br><span class="line">    dataIndex: &quot;age&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>totalKey</code> 被设置为 <code>&#39;data.data.total&#39;</code>，表示总项目数保存在返回的数据对象中的 <code>data</code> 属性下的 <code>total</code> 属性中。</p>
<p><code>currentKey</code> 被设置为 <code>&#39;page&#39;</code>，表示当前页数保存在请求参数对象的 <code>page</code> 属性中。</p>
<p><code>total</code> 是一个被解构出来的对象属性，表示获取到的数据总共有多少条项目。</p>
<h4 id="搜索、删除"><a href="#搜索、删除" class="headerlink" title="搜索、删除"></a>搜索、删除</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-row&gt;</span><br><span class="line">    &lt;a-col :span=&quot;2&quot;&gt;</span><br><span class="line">      &lt;a-button type=&quot;primary&quot; size=&quot;small&quot;&gt;新增&lt;/a-button&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">      &lt;a-popconfirm title=&quot;确认要删除选中学生吗?&quot;</span><br><span class="line">        ok-text=&quot;确定&quot; cancel-text=&quot;取消&quot; @confirm=&quot;onDeleteIds&quot;</span><br><span class="line">        @visibleChange=&quot;onVisibleChange&quot; :visible=&quot;visible&quot;&gt;</span><br><span class="line">        &lt;a-button type=&quot;primary&quot; size=&quot;small&quot;&gt;删除选中&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-popconfirm&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">      &lt;a-input v-model:value=&quot;dto.name&quot; placeholder=&quot;输姓名&quot; size=&quot;small&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">      &lt;a-select v-model:value=&quot;dto.sex&quot; placeholder=&quot;选性别&quot; :allowClear=&quot;true&quot; size=&quot;small&quot;&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;男&quot;&gt;男&lt;/a-select-option&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;女&quot;&gt;女&lt;/a-select-option&gt;</span><br><span class="line">      &lt;/a-select&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;4&quot;&gt;</span><br><span class="line">      &lt;a-select v-model:value=&quot;dto.age&quot; placeholder=&quot;选年龄&quot; :allowClear=&quot;true&quot; size=&quot;small&quot;&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;0,20&quot;&gt;20以下&lt;/a-select-option&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;21,30&quot;&gt;21~30&lt;/a-select-option&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;31,40&quot;&gt;31~40&lt;/a-select-option&gt;</span><br><span class="line">        &lt;a-select-option value=&quot;40,120&quot;&gt;40以上&lt;/a-select-option&gt;</span><br><span class="line">      &lt;/a-select&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">    &lt;a-col :span=&quot;2&quot;&gt;</span><br><span class="line">      &lt;a-button @click=&quot;tableChange&quot; type=&quot;primary&quot; size=&quot;small&quot;&gt;搜索&lt;/a-button&gt;</span><br><span class="line">    &lt;/a-col&gt;</span><br><span class="line">  &lt;/a-row&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;a-table :columns=&quot;columns&quot; :data-source=&quot;students&quot; row-key=&quot;id&quot;</span><br><span class="line">    :pagination=&quot;pagination&quot; @change=&quot;tableChange&quot;</span><br><span class="line">    :row-selection=&quot;&#123;selectedRowKeys:ids,onChange:onSelectChange&#125;&quot;&gt;</span><br><span class="line">    &lt;template #bodyCell=&quot;&#123;column, record&#125;&quot;&gt;</span><br><span class="line">      &lt;template v-if=&quot;column.dataIndex===&#x27;name&#x27;&quot;&gt;</span><br><span class="line">      &#123;&#123;record.name + (record.sex===&#x27;男&#x27;?&#x27;(大侠)&#x27;:&#x27;(女侠)&#x27;)&#125;&#125;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;template v-else-if=&quot;column.dataIndex===&#x27;operation&#x27;&quot;&gt;</span><br><span class="line">      &lt;a&gt;修改&lt;/a&gt;</span><br><span class="line">      &lt;a-divider type=&quot;vertical&quot;&gt;&lt;/a-divider&gt;</span><br><span class="line">      &lt;a-popconfirm title=&quot;确认要删除该学生吗?&quot;</span><br><span class="line">        ok-text=&quot;确定&quot; cancel-text=&quot;取消&quot; @confirm=&quot;onDelete(record.id)&quot;&gt;</span><br><span class="line">        &lt;a&gt;删除&lt;/a&gt;   </span><br><span class="line">      &lt;/a-popconfirm&gt;         </span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/a-table&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; usePagination, useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; AxiosRespPage, AxiosRespString, Student, StudentQueryDto &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line">import &#123; PaginationProps &#125; from &quot;ant-design-vue&quot;;</span><br><span class="line"></span><br><span class="line">// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 搜索功能开始</span><br><span class="line">const dto = ref(&#123;page: 1, size: 5, name: &#x27;&#x27;, sex: null, age: null&#125;)</span><br><span class="line"></span><br><span class="line">const &#123;data, total, run: search&#125; = usePagination&lt;AxiosRespPage&lt;Student&gt;, StudentQueryDto[]&gt;(</span><br><span class="line">  (d) =&gt; axios.get(&#x27;/api/students/q&#x27;, &#123;params:d&#125;),</span><br><span class="line">  &#123;</span><br><span class="line">    defaultParams: [dto.value],</span><br><span class="line">    pagination: &#123;</span><br><span class="line">      currentKey: &quot;page&quot;,</span><br><span class="line">      pageSizeKey: &#x27;size&#x27;,</span><br><span class="line">      totalKey: &#x27;data.data.total&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">function tableChange(pagination: PaginationProps) &#123; </span><br><span class="line">  // console.log(pagination)</span><br><span class="line">  dto.value.page = pagination.current ?? 1</span><br><span class="line">  dto.value.size = pagination.pageSize ?? 5</span><br><span class="line">  search(dto.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const pagination = computed&lt;PaginationProps&gt;(()=&gt;&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    current: dto.value.page, // 当前页</span><br><span class="line">    pageSize: dto.value.size, // 页大小</span><br><span class="line">    total: total.value,       // 总记录数</span><br><span class="line">    showSizeChanger: true,    // 显示页大小的下拉列表</span><br><span class="line">    pageSizeOptions: [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;] // 自定义下拉列表内容</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const students = computed(()=&gt;&#123;</span><br><span class="line">  return data.value?.data.data.list || []</span><br><span class="line">&#125;)</span><br><span class="line">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 搜索功能结束</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 删除功能开始</span><br><span class="line">async function onDelete(id:number) &#123;</span><br><span class="line">  // console.log(&quot;学生id是:&quot;+id)</span><br><span class="line">  await deleteById(id)      // 删除请求 删除响应</span><br><span class="line">  search(dto.value)        //                   查询请求 查询响应</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const &#123; runAsync: deleteById &#125; = useRequest&lt;AxiosRespString, number[]&gt;(</span><br><span class="line">  (id) =&gt; axios.delete(`/api/students/$&#123;id&#125;`),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 删除功能结束</span><br><span class="line"></span><br><span class="line">// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 删除选中开始</span><br><span class="line">const ids = ref&lt;number[]&gt;([])</span><br><span class="line"></span><br><span class="line">function onSelectChange(keys:number[]) &#123;</span><br><span class="line">  // console.log(keys)</span><br><span class="line">  ids.value = keys</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">async function onDeleteIds() &#123;</span><br><span class="line">  await deleteByIds(ids.value)</span><br><span class="line">  ids.value = []</span><br><span class="line">  search(dto.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const &#123; runAsync: deleteByIds &#125; = useRequest&lt;AxiosRespString, number[][]&gt;(</span><br><span class="line">  (ids)=&gt;axios.delete(&#x27;/api/students&#x27;, &#123;data: ids&#125;),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const visible = ref(false)</span><br><span class="line"></span><br><span class="line">function onVisibleChange(v:boolean) &#123;</span><br><span class="line">  if(!v) &#123; // 希望隐藏</span><br><span class="line">    visible.value = false</span><br><span class="line">  &#125; else &#123; // 希望显示</span><br><span class="line">    visible.value = ids.value.length &gt; 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 删除选中结束</span><br><span class="line"></span><br><span class="line">const columns = ref([</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;编号&quot;,</span><br><span class="line">    dataIndex: &quot;id&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;姓名&quot;,</span><br><span class="line">    dataIndex: &quot;name&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;性别&quot;,</span><br><span class="line">    dataIndex: &quot;sex&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &quot;年龄&quot;,</span><br><span class="line">    dataIndex: &quot;age&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: &#x27;操作&#x27;,</span><br><span class="line">    dataIndex: &#x27;operation&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .ant-input, .ant-select &#123;</span><br><span class="line">    width: 80px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h4 id="新增、修改"><a href="#新增、修改" class="headerlink" title="新增、修改"></a>新增、修改</h4><p>子组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-modal :visible=&quot;visible&quot; :title=&quot;title&quot; </span><br><span class="line">    @ok=&quot;onOk&quot; @cancel=&quot;onCancel&quot;&gt;</span><br><span class="line">    &lt;a-form&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;编号&quot; v-if=&quot;id&quot;&gt;</span><br><span class="line">        &lt;a-input readonly v-model:value=&quot;id&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;姓名&quot;&gt;</span><br><span class="line">        &lt;a-input v-model:value=&quot;dto.name&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;性别&quot;&gt;</span><br><span class="line">        &lt;a-radio-group v-model:value=&quot;dto.sex&quot;&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;男&quot;&gt;男&lt;/a-radio-button&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;女&quot;&gt;女&lt;/a-radio-button&gt;</span><br><span class="line">        &lt;/a-radio-group&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;年龄&quot;&gt;</span><br><span class="line">        &lt;a-input-number v-model:value=&quot;dto.age&quot;&gt;&lt;/a-input-number&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/a-modal&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; StudentSaveDto, AxiosRespString &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line">import &#123; Form &#125; from &#x27;ant-design-vue&#x27;</span><br><span class="line"></span><br><span class="line">// 定义属性</span><br><span class="line">const props = defineProps&lt;&#123;id:number, dto:StudentSaveDto, visible:boolean&#125;&gt;()</span><br><span class="line"></span><br><span class="line">const title = computed(()=&gt; props.id===0?&#x27;新增学生&#x27;:&#x27;修改学生&#x27;)</span><br><span class="line"></span><br><span class="line">// 定义事件</span><br><span class="line">const emit = defineEmits([&#x27;update:visible&#x27;, &#x27;saved&#x27;])</span><br><span class="line"></span><br><span class="line">async function onOk() &#123;</span><br><span class="line">  if(props.id === 0) &#123;</span><br><span class="line">    await insert(props.dto)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    await update(props.dto)</span><br><span class="line">  &#125;</span><br><span class="line">  emit(&#x27;saved&#x27;)</span><br><span class="line">  // 发送事件给父组件, 希望把 visible 改为 false</span><br><span class="line">  emit(&#x27;update:visible&#x27;, false) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function onCancel() &#123;</span><br><span class="line">  // 发送事件给父组件, 希望把 visible 改为 false</span><br><span class="line">  emit(&#x27;update:visible&#x27;, false)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const &#123;runAsync:insert&#125; = useRequest&lt;AxiosRespString,StudentSaveDto[]&gt;(</span><br><span class="line">  (dto)=&gt;axios.post(&#x27;/api/students&#x27;, dto),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const &#123;runAsync:update&#125; = useRequest&lt;AxiosRespString,StudentSaveDto[]&gt;(</span><br><span class="line">  (dto)=&gt;axios.put(`/api/students/$&#123;props.id&#125;`, dto),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>父组件使用子组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;A4Save :id=&quot;id&quot; :dto=&quot;saveDto&quot; v-model:visible=&quot;saveVisible&quot;&gt;&lt;/A4Save&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">// ...</span><br><span class="line">// &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 新增、修改开始</span><br><span class="line">const saveVisible = ref(false)</span><br><span class="line">const id = ref(0)</span><br><span class="line">const saveDto = reactive(&#123;name:&#x27;&#x27;, sex:&#x27;男&#x27;, age:18&#125;)</span><br><span class="line"></span><br><span class="line">function onInsert() &#123;</span><br><span class="line">  saveVisible.value = true</span><br><span class="line">  id.value = 0</span><br><span class="line">  Object.assign(saveDto, &#123;name:&#x27;&#x27;, sex:&#x27;男&#x27;, age:18&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function onUpdate(record: Student) &#123;</span><br><span class="line">  saveVisible.value = true</span><br><span class="line">  id.value = record.id</span><br><span class="line">  Object.assign(saveDto, record)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function onSaved() &#123;</span><br><span class="line">  search(dto.value)</span><br><span class="line">&#125;    </span><br><span class="line">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 新增、修改结束</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>saveDto 使用 reactive 包装，是为了解决后续表单校验失效问题</p>
</li>
<li><p>Object.assign 是将源对象（参数2）的属性值赋值给目标对象（参数1）的同名属性，效果等价于</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">saveDto.<span class="property">name</span> = record.<span class="property">name</span></span><br><span class="line">saveDto.<span class="property">sex</span> = record.<span class="property">sex</span></span><br><span class="line">saveDto.<span class="property">age</span> = record.<span class="property">age</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="全局消息"><a href="#全局消息" class="headerlink" title="全局消息"></a>全局消息</h4><p>在 request.ts 中对响应消息统一处理</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; message &#125; <span class="keyword">from</span> <span class="string">&#x27;ant-design-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">_axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>)=&gt;</span>&#123; <span class="comment">// 状态码  2xx</span></span><br><span class="line">    <span class="keyword">if</span>(response.<span class="property">data</span>.<span class="property">message</span>) &#123;</span><br><span class="line">      message.<span class="title function_">success</span>(response.<span class="property">data</span>.<span class="property">message</span>, <span class="number">3</span>)</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>)=&gt;</span>&#123; <span class="comment">// 状态码 &gt; 2xx, 400,401,403,404,500</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h4 id="表单校验"><a href="#表单校验" class="headerlink" title="表单校验"></a>表单校验</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-modal :visible=&quot;visible&quot; :title=&quot;title&quot; </span><br><span class="line">    @ok=&quot;onOk&quot; @cancel=&quot;onCancel&quot;&gt;</span><br><span class="line">    &lt;a-form&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;编号&quot; v-if=&quot;id&quot;&gt;</span><br><span class="line">        &lt;a-input readonly v-model:value=&quot;id&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;姓名&quot; v-bind=&quot;validateInfos.name&quot;&gt;</span><br><span class="line">        &lt;a-input v-model:value=&quot;dto.name&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;性别&quot; v-bind=&quot;validateInfos.sex&quot;&gt;</span><br><span class="line">        &lt;a-radio-group v-model:value=&quot;dto.sex&quot;&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;男&quot;&gt;男&lt;/a-radio-button&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;女&quot;&gt;女&lt;/a-radio-button&gt;</span><br><span class="line">        &lt;/a-radio-group&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;年龄&quot; v-bind=&quot;validateInfos.age&quot;&gt;</span><br><span class="line">        &lt;a-input-number v-model:value=&quot;dto.age&quot;&gt;&lt;/a-input-number&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/a-modal&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import axios from &quot;../api/request&quot;;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRequest &#125; from &quot;vue-request&quot;;</span><br><span class="line">import &#123; StudentSaveDto, AxiosRespString &#125; from &quot;../model/Model8080&quot;;</span><br><span class="line">import &#123; Form &#125; from &#x27;ant-design-vue&#x27;</span><br><span class="line"></span><br><span class="line">// 定义属性</span><br><span class="line">const props = defineProps&lt;&#123;id:number, dto:StudentSaveDto, visible:boolean&#125;&gt;()</span><br><span class="line"></span><br><span class="line">const title = computed(()=&gt; props.id===0?&#x27;新增学生&#x27;:&#x27;修改学生&#x27;)</span><br><span class="line"></span><br><span class="line">// 定义事件</span><br><span class="line">const emit = defineEmits([&#x27;update:visible&#x27;, &#x27;saved&#x27;])</span><br><span class="line"></span><br><span class="line">async function onOk() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    // 提交前校验</span><br><span class="line">    await validate()</span><br><span class="line">    if(props.id === 0) &#123;</span><br><span class="line">      await insert(props.dto)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      await update(props.dto)</span><br><span class="line">    &#125;</span><br><span class="line">    emit(&#x27;saved&#x27;)</span><br><span class="line">    // 发送事件给父组件, 希望把 visible 改为 false</span><br><span class="line">    emit(&#x27;update:visible&#x27;, false) </span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.error(e)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function onCancel() &#123;</span><br><span class="line">  // 发送事件给父组件, 希望把 visible 改为 false</span><br><span class="line">  emit(&#x27;update:visible&#x27;, false)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const &#123;runAsync:insert&#125; = useRequest&lt;AxiosRespString,StudentSaveDto[]&gt;(</span><br><span class="line">  (dto)=&gt;axios.post(&#x27;/api/students&#x27;, dto),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const &#123;runAsync:update&#125; = useRequest&lt;AxiosRespString,StudentSaveDto[]&gt;(</span><br><span class="line">  (dto)=&gt;axios.put(`/api/students/$&#123;props.id&#125;`, dto),</span><br><span class="line">  &#123;</span><br><span class="line">    manual: true</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const rules = ref(&#123;</span><br><span class="line">  name: [</span><br><span class="line">    &#123;required: true, message:&#x27;姓名必须&#x27;&#125;,</span><br><span class="line">    &#123;min:2, message:&#x27;字符数至少为2&#x27;&#125;</span><br><span class="line">  ],</span><br><span class="line">  sex: [</span><br><span class="line">    &#123;required: true, message:&#x27;性别必须&#x27;&#125;</span><br><span class="line">  ],</span><br><span class="line">  age: [</span><br><span class="line">    &#123;required: true, message:&#x27;年龄必须&#x27;&#125;,</span><br><span class="line">    &#123;min:10, message:&#x27;年龄最小为10岁&#x27;, type:&#x27;number&#x27;&#125;,</span><br><span class="line">    &#123;max:120, message:&#x27;年龄最大为120岁&#x27;, type:&#x27;number&#x27;&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 参数1: 待校验的数据</span><br><span class="line">// 参数2: 校验规则</span><br><span class="line">const &#123; validateInfos, validate &#125; = Form.useForm(props.dto, rules)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install vue-router@<span class="number">4</span></span><br></pre></td></tr></table></figure>



<h4 id="创建-router"><a href="#创建-router" class="headerlink" title="创建 router"></a>创建 router</h4><p>首先创建一个 /src/router/a5router.ts 文件，在其中定义路由</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="comment">// 路由 =&gt; 路径和组件之间的对应关系</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a1&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="variable constant_">A51</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a2&#x27;</span>, </span><br><span class="line">    <span class="attr">component</span>: <span class="variable constant_">A52</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123; </span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(), <span class="comment">// 路径格式</span></span><br><span class="line">  <span class="attr">routes</span>: routes <span class="comment">// 路由数组</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<ul>
<li><p>createWebHashHistory 是用 # 符号作为【单页面】跳转技术，上面两个路由访问时路径格式为</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://localhost:7070/#/a1">http://localhost:7070/#/a1</a></li>
<li><a target="_blank" rel="noopener" href="http://localhost:7070/#/a2">http://localhost:7070/#/a2</a></li>
</ul>
</li>
<li><p>每个路由都有两个必须属性</p>
<ul>
<li><p>path：路径</p>
</li>
<li><p>component：组件</p>
</li>
</ul>
</li>
<li><p>createRouter 用来创建 router 对象，作为默认导出</p>
</li>
</ul>
<p>需要在 main.ts 中导入 router 对象：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A5</span> <span class="keyword">from</span> <span class="string">&#x27;./views/A5.vue&#x27;</span>  <span class="comment">// vue-router</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/a5router&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="variable constant_">A5</span>).<span class="title function_">use</span>(antdv).<span class="title function_">use</span>(router).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>A5 是根组件，不必在 router 中定义，但需要在其中定义 router-view，用来控制路由跳转后，A51、A52 这些组件的显示位置，内容如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a5&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<h4 id="动态导入"><a href="#动态导入" class="headerlink" title="动态导入"></a>动态导入</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a3&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A53.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>用 import 关键字导入，效果是打包时会将组件的 js 代码都打包成一个大的 js 文件，如果组件非常多，会影响页面加载速度</li>
<li>而 import 函数导入（动态导入），则是按需加载，即<ul>
<li>当路由跳转到 /a3 路径时，才会去加载 A53 组件对应的 js 代码</li>
<li>vue-router 官方推荐采用动态导入</li>
</ul>
</li>
</ul>
<h4 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h4><p>如果希望再嵌套更深层次的路由跳转，例如：希望在 A53 组件内再进行路由跳转</p>
<p>首先，修改 A53.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a53&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>其次，再修改 /src/router/a5router.ts 文件 内容</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a3&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A53.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A531.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;teacher&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A532.vue&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>



<h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><p>用法1</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a3&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A53.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/a3/student&#x27;</span>, <span class="comment">// 重定向到另外路径</span></span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A531.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;teacher&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A532.vue&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>效果是，页面输入 /a3，紧接着会重定向跳转到 /a3/student</p>
<p>用法2</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A51</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A51.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">A52</span> <span class="keyword">from</span> <span class="string">&#x27;../views/A52.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a1&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="variable constant_">A51</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/a2&#x27;</span>, </span><br><span class="line">    <span class="attr">component</span>: <span class="variable constant_">A52</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/:pathMatcher(.*)*&#x27;</span>, <span class="comment">// 可以匹配剩余的路径</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/a2&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>效果是，当页面输入一个不存在路径 /aaa 时，会被 <code>path: &#39;/:pathMatcher(.*)*&#39;</code> 匹配到，然后重定向跳转到 A52 组件去</p>
<h4 id="主页布局"><a href="#主页布局" class="headerlink" title="主页布局"></a>主页布局</h4><p>借助 antdv 的 layout 组件，可以实现主页【上】【左】【右】布局</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a53&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;&lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;a-layout-sider&gt;&lt;/a-layout-sider&gt;</span><br><span class="line">        &lt;a-layout-content&gt;</span><br><span class="line">          &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/a-layout-content&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.a53 &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  background-color: rgb(220, 225, 255);</span><br><span class="line">  background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3E%3Ctext x=&#x27;35&#x27; y=&#x27;10&#x27; font-size=&#x27;14&#x27; font-family=&#x27;system-ui, sans-serif&#x27; text-anchor=&#x27;middle&#x27; dominant-baseline=&#x27;middle&#x27;%3EA53(主页)%3C/text%3E%3C/svg%3E&quot;);</span><br><span class="line">  padding: 20px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">.ant-layout-header &#123;</span><br><span class="line">  height: 50px;</span><br><span class="line">  background-color:darkseagreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-sider &#123;</span><br><span class="line">  background-color:lightsalmon;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-content &#123;</span><br><span class="line">  background-color: aliceblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-footer &#123;</span><br><span class="line">  background-color:darkslateblue;</span><br><span class="line">  height: 30px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-has-sider &#123;</span><br><span class="line">  height: calc(100% - 50px);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h4 id="侧边栏菜单"><a href="#侧边栏菜单" class="headerlink" title="侧边栏菜单"></a>侧边栏菜单</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a53&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;&lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;a-layout-sider&gt;</span><br><span class="line">          &lt;a-menu theme=&quot;dark&quot; mode=&quot;inline&quot;&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;1&quot;&gt;</span><br><span class="line">              &lt;router-link to=&quot;/a3/student&quot;&gt;菜单1&lt;/router-link&gt;</span><br><span class="line">            &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;2&quot;&gt;</span><br><span class="line">              &lt;router-link to=&quot;/a3/teacher&quot;&gt;菜单2&lt;/router-link&gt;</span><br><span class="line">            &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;3&quot;&gt;菜单3&lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-sub-menu :key=&quot;4&quot; title=&quot;菜单4&quot;&gt;</span><br><span class="line">              &lt;a-menu-item :key=&quot;41&quot;&gt;菜单41&lt;/a-menu-item&gt;</span><br><span class="line">              &lt;a-menu-item :key=&quot;42&quot;&gt;菜单42&lt;/a-menu-item&gt;</span><br><span class="line">            &lt;/a-sub-menu&gt;</span><br><span class="line">          &lt;/a-menu&gt;</span><br><span class="line">        &lt;/a-layout-sider&gt;</span><br><span class="line">        &lt;a-layout-content&gt;</span><br><span class="line">          &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/a-layout-content&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>a-menu-item 与 a-sub-menu 都必须为 key 属性唯一赋值，否则会产生混乱</li>
<li>router-link 标签用来切换路由，to 是目标路由的路径</li>
<li>theme 属性定义菜单的主题（默认亮色主题，dark 为暗色主题）</li>
<li>mode 属性定义子菜单的展示模式（默认弹出，inline 显示在下方）</li>
</ul>
<h4 id="菜单图标"><a href="#菜单图标" class="headerlink" title="菜单图标"></a>菜单图标</h4><p>安装图标依赖</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install @ant-design/icons-vue</span><br></pre></td></tr></table></figure>

<p>菜单中使用图标</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a53&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;&lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;a-layout-sider&gt;</span><br><span class="line">          &lt;a-menu theme=&quot;dark&quot; mode=&quot;inline&quot;&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;1&quot;&gt;</span><br><span class="line">              &lt;template #icon&gt;</span><br><span class="line">                &lt;highlight-outlined /&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">              &lt;router-link to=&quot;/a3/student&quot;&gt;菜单1&lt;/router-link&gt;</span><br><span class="line">            &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;2&quot;&gt;</span><br><span class="line">              &lt;template #icon&gt;</span><br><span class="line">                &lt;align-center-outlined /&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">              &lt;router-link to=&quot;/a3/teacher&quot;&gt;菜单2&lt;/router-link&gt;</span><br><span class="line">            &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-menu-item :key=&quot;3&quot;&gt;</span><br><span class="line">              &lt;template #icon&gt;</span><br><span class="line">                &lt;strikethrough-outlined /&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">              菜单3&lt;/a-menu-item&gt;</span><br><span class="line">            &lt;a-sub-menu :key=&quot;4&quot; title=&quot;菜单4&quot;&gt;</span><br><span class="line">              &lt;template #icon&gt;</span><br><span class="line">                &lt;sort-descending-outlined /&gt;</span><br><span class="line">              &lt;/template&gt;</span><br><span class="line">              &lt;a-menu-item :key=&quot;41&quot;&gt;菜单41&lt;/a-menu-item&gt;</span><br><span class="line">              &lt;a-menu-item :key=&quot;42&quot;&gt;菜单42&lt;/a-menu-item&gt;</span><br><span class="line">            &lt;/a-sub-menu&gt;</span><br><span class="line">          &lt;/a-menu&gt;</span><br><span class="line">        &lt;/a-layout-sider&gt;</span><br><span class="line">        &lt;a-layout-content&gt;</span><br><span class="line">          &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/a-layout-content&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123;HighlightOutlined, AlignCenterOutlined, StrikethroughOutlined, SortDescendingOutlined&#125; from &#x27;@ant-design/icons-vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>图标组件没有全局绑定，需要 import 之后才能使用</li>
<li>用 <code>&lt;template #icon&gt;&lt;/template&gt;</code> 插槽，才能确定图标展示的位置（菜单文字之前）</li>
</ul>
<h4 id="二次封装图标组件"><a href="#二次封装图标组件" class="headerlink" title="二次封装图标组件"></a>二次封装图标组件</h4><p>最终希望用统一的图标组件去使用图标，图标名只是作为一个属性值传递进去，例如：</p>
<p>使用者</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;a-icon icon=&quot;highlight-outlined&quot;&gt;&lt;/a-icon&gt;</span><br><span class="line">  &lt;a-icon icon=&quot;align-center-outlined&quot;&gt;&lt;/a-icon&gt;</span><br><span class="line">  &lt;a-icon icon=&quot;strikethrough-outlined&quot;&gt;&lt;/a-icon&gt;</span><br><span class="line">  &lt;a-icon icon=&quot;sort-descending-outlined&quot;&gt;&lt;/a-icon&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import AIcon from &#x27;../components/AIcon1.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="方法1，使用-vue-组件"><a href="#方法1，使用-vue-组件" class="headerlink" title="方法1，使用 vue 组件"></a>方法1，使用 vue 组件</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123;HighlightOutlined, AlignCenterOutlined, StrikethroughOutlined, SortDescendingOutlined&#125; from &#x27;@ant-design/icons-vue&#x27;</span><br><span class="line">const props = defineProps&lt;&#123;icon:string&#125;&gt;()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;highlight-outlined v-if=&quot;icon===&#x27;highlight-outlined&#x27;&quot;&gt;&lt;/highlight-outlined&gt;</span><br><span class="line">  &lt;align-center-outlined v-else-if=&quot;icon===&#x27;align-center-outlined&#x27;&quot;&gt;&lt;/align-center-outlined&gt;</span><br><span class="line">  &lt;strikethrough-outlined v-else-if=&quot;icon===&#x27;strikethrough-outlined&#x27;&quot;&gt;&lt;/strikethrough-outlined&gt;</span><br><span class="line">  &lt;sort-descending-outlined v-else-if=&quot;icon===&#x27;sort-descending-outlined&#x27;&quot;&gt;&lt;/sort-descending-outlined&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>缺点：实现太笨</li>
</ul>
<h5 id="方法2，使用函数式组件"><a href="#方法2，使用函数式组件" class="headerlink" title="方法2，使用函数式组件"></a>方法2，使用函数式组件</h5><p>示例</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//导入h函数(htmml)</span></span><br><span class="line"><span class="keyword">import</span> &#123;h&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Hello</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">  <span class="comment">//参数一：标签名</span></span><br><span class="line">  <span class="comment">//参数二：属性</span></span><br><span class="line">  <span class="comment">//参数三：内容</span></span><br><span class="line">  <span class="comment">//&lt;h3 id=&#x27;&#x27;&gt;HelloWorld&lt;/h3&gt;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;h3&#x27;</span>,&#123;<span class="attr">id</span>:<span class="string">&#x27;test&#x27;</span>&#125;,<span class="string">&quot;HelloWorld&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Hello</span> <span class="keyword">from</span> <span class="string">&#x27;../components/Hello&#x27;</span></span><br><span class="line">&lt;<span class="title class_">Hello</span>&gt;&lt;<span class="title class_">Hello</span>&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Module</span> &#123;</span><br><span class="line">  [<span class="attr">p</span>:<span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数1: 组件属性</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">AIcon</span> = (<span class="params">props:&#123;icon:<span class="built_in">string</span>&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// console.log(props.icon)</span></span><br><span class="line">  <span class="comment">// console.log(Icons)</span></span><br><span class="line">  <span class="comment">// 参数1: 组件对象</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">im</span>: <span class="title class_">Module</span> = <span class="title class_">Icons</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">h</span>(im[<span class="title function_">toCamelCase</span>(props.<span class="property">icon</span>)])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">AIcon</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将-分隔的单词转换为大驼峰命名的单词</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toCamelCase</span>(<span class="params">str: <span class="built_in">string</span></span>) &#123; <span class="comment">// highlight-outlined</span></span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>) <span class="comment">// [&#x27;highlight&#x27;, &#x27;outlined&#x27;]</span></span><br><span class="line">    .<span class="title function_">map</span>(<span class="function">(<span class="params">e</span>)=&gt;</span> e.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + e.<span class="title function_">slice</span>(<span class="number">1</span>) ) <span class="comment">// [&#x27;Highlight&#x27;, &#x27;Outlined&#x27;]</span></span><br><span class="line">    .<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Icons 的结构如下</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">  HighlightOutlined: HighlightOutlined组件对象,</span></span><br><span class="line"><span class="comment">  MonitorOutlined: MonitorOutlined组件对象,</span></span><br><span class="line"><span class="comment">  ...</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>需要动态生成标签的时候，可以考虑使用函数式组件</li>
</ul>
<h5 id="方法3，使用-jsx-组件"><a href="#方法3，使用-jsx-组件" class="headerlink" title="方法3，使用 jsx 组件"></a>方法3，使用 jsx 组件</h5><p>首先，安装  </p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install @vitejs/plugin-vue-jsx -D</span><br></pre></td></tr></table></figure>

<p>配置 vite.config.ts</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vueJsx <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue-jsx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">vueJsx</span>()]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>编写一个 Hi.tsx 组件</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="title class_">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params">props: &#123; msg: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>&#123;props.msg&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后被其它组件使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import Hi from &#x27;../components/Hi&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Hi msg=&quot;Hello,World&quot;&gt;&lt;/Hi&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>用 jsx 实现图标组件</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Module</span> &#123;</span><br><span class="line">  [<span class="attr">p</span>:<span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toCamelCase</span>(<span class="params">str: <span class="built_in">string</span></span>) &#123; <span class="comment">// highlight-outlined</span></span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line">    .<span class="title function_">split</span>(<span class="string">&quot;-&quot;</span>) <span class="comment">// [&#x27;highlight&#x27;, &#x27;outlined&#x27;]</span></span><br><span class="line">    .<span class="title function_">map</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> e.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + e.<span class="title function_">slice</span>(<span class="number">1</span>)) <span class="comment">// [&#x27;Highlight&#x27;, &#x27;Outlined&#x27;]</span></span><br><span class="line">    .<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>); <span class="comment">// HighlightOutlined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">icon</span>: <span class="title class_">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params">props: &#123;icon: <span class="built_in">string</span>&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">im</span>: <span class="title class_">Module</span> = <span class="title class_">Icons</span></span><br><span class="line">    <span class="keyword">const</span> tag = im[<span class="title function_">toCamelCase</span>(props.<span class="property">icon</span>)] <span class="comment">// 图标组件</span></span><br><span class="line">    <span class="comment">// HighlightOutlined</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">()=&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">tag</span>&gt;</span><span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span> <span class="comment">// 返回组件标签</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="动态路由与菜单"><a href="#动态路由与菜单" class="headerlink" title="动态路由与菜单"></a>动态路由与菜单</h4><h5 id="路由文件"><a href="#路由文件" class="headerlink" title="路由文件"></a>路由文件</h5><p>a6router.js</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useStorage &#125; <span class="keyword">from</span> <span class="string">&#x27;@vueuse/core&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Route</span>, <span class="title class_">Menu</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Model8080&#x27;</span></span><br><span class="line"><span class="keyword">const</span> clientRoutes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A6Login.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;404&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A6NotFound.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;main&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/A6Main.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/:pathMatcher(.*)*&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;remaining&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),<span class="comment">//路径格式</span></span><br><span class="line">  <span class="attr">routes</span>: clientRoutes <span class="comment">//路由数组</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> serverMenus = useStorage&lt;<span class="title class_">Menu</span>[]&gt;(<span class="string">&#x27;serverMenus&#x27;</span>, [])</span><br><span class="line"><span class="keyword">const</span> serverRoutes = useStorage&lt;<span class="title class_">Route</span>[]&gt;(<span class="string">&#x27;serverRoutes&#x27;</span>, [])</span><br><span class="line"><span class="title function_">addServerRoutes</span>(serverRoutes.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addServerRoutes</span>(<span class="params">routeList: Route[]</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> r <span class="keyword">of</span> routeList) &#123;</span><br><span class="line">      <span class="comment">//参数一：父路由的名字</span></span><br><span class="line">      <span class="comment">//参数二：路由对象</span></span><br><span class="line">    <span class="keyword">if</span> (r.<span class="property">parentName</span>) &#123;</span><br><span class="line">      router.<span class="title function_">addRoute</span>(r.<span class="property">parentName</span>, &#123;</span><br><span class="line">        <span class="attr">path</span>: r.<span class="property">path</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(r.<span class="property">component</span>),</span><br><span class="line">        <span class="attr">name</span>: r.<span class="property">name</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  serverRoutes.<span class="property">value</span> = routeList</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">resetRoutes</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> r <span class="keyword">of</span> clientRoutes) &#123;</span><br><span class="line">    router.<span class="title function_">addRoute</span>(r)</span><br><span class="line">  &#125;</span><br><span class="line">  serverRoutes.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">  serverMenus.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>本文件重要的函数及变量</p>
<ul>
<li>addServerRoutes 函数向路由表中添加由服务器提供的路由，路由分成两部分<ul>
<li>clientRoutes 这是客户端固定的路由</li>
<li>serverRoutes 这是服务器变化的路由，存储于 localStorage</li>
</ul>
</li>
<li>resetRoutes 函数用来将路由重置为 clientRoutes <ul>
<li>vue-router@4 中的 addRoute 方法会【覆盖】同名路由，这是这种实现的关键</li>
<li>因此，服务器返回的路由最好是 main 的子路由，这样重置时就会比较简单，用之前的 main 一覆盖就完事了</li>
</ul>
</li>
<li>serverMenus 变量记录服务器变化的菜单，存储于 localStorage</li>
</ul>
<h5 id="登录组件"><a href="#登录组件" class="headerlink" title="登录组件"></a>登录组件</h5><p>动态路由应当在登录时生成，A6Login.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;login&quot;&gt;</span><br><span class="line">    &lt;a-form :label-col=&quot;&#123; span: 6 &#125;&quot; autocomplete=&quot;off&quot;&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;用户名&quot; v-bind=&quot;validateInfos.username&quot;&gt;</span><br><span class="line">        &lt;a-input v-model:value=&quot;dto.username&quot; /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;密码&quot; v-bind=&quot;validateInfos.password&quot;&gt;</span><br><span class="line">        &lt;a-input-password v-model:value=&quot;dto.password&quot; /&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item :wrapper-col=&quot;&#123; offset: 6, span: 16 &#125;&quot;&gt;</span><br><span class="line">        &lt;a-button type=&quot;primary&quot; @click=&quot;onClick&quot;&gt;Submit&lt;/a-button&gt;</span><br><span class="line">      &lt;/a-form-item&gt;      </span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; Form &#125; from &#x27;ant-design-vue&#x27;</span><br><span class="line">import &#123; useRouter &#125; from &#x27;vue-router&#x27;</span><br><span class="line">import axios from &#x27;../api/request&#x27;</span><br><span class="line">import &#123; useRequest &#125; from &#x27;vue-request&#x27;</span><br><span class="line">import &#123; AxiosRespToken, LoginDto, AxiosRespMenuAndRoute &#125; from &#x27;../model/Model8080&#x27;</span><br><span class="line">import &#123; resetRoutes, addServerRoutes, serverMenus &#125; from &#x27;../router/a6router&#x27;</span><br><span class="line">const dto = ref(&#123;username:&#x27;&#x27;, password:&#x27;&#x27;&#125;)</span><br><span class="line">const rules = ref(&#123;</span><br><span class="line">  username: [</span><br><span class="line">    &#123;required: true, message:&#x27;用户名必填&#x27;&#125;</span><br><span class="line">  ],</span><br><span class="line">  password:[</span><br><span class="line">    &#123;required: true, message:&#x27;密码必填&#x27;&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line">const &#123; validateInfos, validate &#125; = Form.useForm(dto, rules)</span><br><span class="line">const router = useRouter()</span><br><span class="line">const &#123; runAsync:login &#125; = useRequest&lt;AxiosRespToken, LoginDto[]&gt;((dto)=&gt; axios.post(&#x27;/api/loginJwt&#x27;, dto), &#123;manual:true&#125;)</span><br><span class="line">const &#123; runAsync:menu &#125; = useRequest&lt;AxiosRespMenuAndRoute, string[]&gt;((username)=&gt; axios.get(`/api/menu/$&#123;username&#125;`), &#123;manual:true&#125;)</span><br><span class="line">async function onClick() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    await validate()</span><br><span class="line">    const loginResp = await login(dto.value</span><br><span class="line">    if(loginResp.data.code === 200) &#123; // 登录成功</span><br><span class="line">      const token = loginResp.data.data.token</span><br><span class="line">      const menuResp = await menu(dto.value.username)</span><br><span class="line">      const routeList = menuResp.data.data.routeList</span><br><span class="line">      addServerRoutes(routeList)</span><br><span class="line">      serverMenus.value = menuResp.data.data.menuTree</span><br><span class="line">      router.push(&#x27;/&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.error(e)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  resetRoutes()</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.login&#123;</span><br><span class="line">  margin: 200px auto;</span><br><span class="line">  width: 25%;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  height: 180px;</span><br><span class="line">  background-color: antiquewhite;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>登录成功后去请求 <code>/api/menu/&#123;username&#125;</code>  获取该用户的菜单和路由</li>
<li>router.push 方法用来以编程方式跳转至主页路由</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/api/loginJwt&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">loginJwt</span><span class="params">(<span class="meta">@RequestBody</span> loginDto dto)</span>&#123;</span><br><span class="line">	userService.login(dto.username(),dto.password());</span><br><span class="line">	<span class="type">SecreKey</span> <span class="variable">secreKey</span> <span class="operator">=</span> secreKeyService.getSecretKey();</span><br><span class="line">	<span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> Jwts.builder().signWith(secretKey).setSubject(dto.username().compact());</span><br><span class="line">	<span class="keyword">return</span> R.ok(Map.of(<span class="string">&quot;token&quot;</span>),token);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="主页组件"><a href="#主页组件" class="headerlink" title="主页组件"></a>主页组件</h5><p>A6Main.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a6main&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;</span><br><span class="line">      &lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;a-layout-sider&gt;</span><br><span class="line">          &lt;a-menu mode=&quot;inline&quot; theme=&quot;dark&quot;&gt;</span><br><span class="line">            &lt;template v-for=&quot;m1 of serverMenus&quot;&gt;</span><br><span class="line">              &lt;a-sub-menu v-if=&quot;m1.children&quot; :key=&quot;m1.id&quot; :title=&quot;m1.title&quot;&gt;</span><br><span class="line">                &lt;template #icon&gt;&lt;a-icon :icon=&quot;m1.icon&quot;&gt;&lt;/a-icon&gt;&lt;/template&gt;</span><br><span class="line">                &lt;a-menu-item v-for=&quot;m2 of m1.children&quot; :key=&quot;m2.id&quot;&gt;</span><br><span class="line">                  &lt;template #icon&gt;&lt;a-icon :icon=&quot;m2.icon&quot;&gt;&lt;/a-icon&gt;&lt;/template&gt;</span><br><span class="line">                  &lt;router-link v-if=&quot;m2.routePath&quot; :to=&quot;m2.routePath&quot;&gt;&#123;&#123;m2.title&#125;&#125;&lt;/router-link&gt;</span><br><span class="line">                  &lt;span v-else&gt;&#123;&#123;m2.title&#125;&#125;&lt;/span&gt;</span><br><span class="line">                &lt;/a-menu-item&gt;</span><br><span class="line">              &lt;/a-sub-menu&gt;</span><br><span class="line">              &lt;a-menu-item v-else :key=&quot;m1.id&quot;&gt;</span><br><span class="line">                &lt;template #icon&gt;&lt;a-icon :icon=&quot;m1.icon&quot;&gt;&lt;/a-icon&gt;&lt;/template&gt;</span><br><span class="line">                &lt;router-link v-if=&quot;m1.routePath&quot; :to=&quot;m1.routePath&quot;&gt;&#123;&#123;m1.title&#125;&#125;&lt;/router-link&gt;</span><br><span class="line">                &lt;span v-else&gt;&#123;&#123;m1.title&#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/a-menu-item&gt;</span><br><span class="line">            &lt;/template&gt;            </span><br><span class="line">          &lt;/a-menu&gt;</span><br><span class="line">        &lt;/a-layout-sider&gt;</span><br><span class="line">        &lt;a-layout-content&gt;</span><br><span class="line">          &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/a-layout-content&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import AIcon from &#x27;../components/AIcon3&#x27; // jsx icon 组件</span><br><span class="line">import &#123; serverMenus &#125; from &#x27;../router/a6router&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.a6main &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  background-color: rgb(220, 225, 255);</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">.ant-layout-header &#123;</span><br><span class="line">  height: 50px;</span><br><span class="line">  background-color:darkseagreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-sider &#123;</span><br><span class="line">  background-color:lightsalmon;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-content &#123;</span><br><span class="line">  background-color: aliceblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-footer &#123;</span><br><span class="line">  background-color:darkslateblue;</span><br><span class="line">  height: 30px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ant-layout-has-sider &#123;</span><br><span class="line">  height: calc(100% - 50px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h4 id="token-使用"><a href="#token-使用" class="headerlink" title="token 使用"></a>token 使用</h4><ol>
<li>获取用户信息，例如服务器端可以把用户名、该用户的路由、菜单信息都统一从 token 返回</li>
<li>前端路由跳转依据，例如跳转前检查 token，如果不存在，表示未登录，就避免跳转至某些路由</li>
<li>后端 api 访问依据，例如每次发请求携带 token，后端需要身份校验的 api 需要用到</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.service.SecretKeyService;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.ExpiredJwtException;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jwts;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.MalformedJwtException;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.UnsupportedJwtException;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.security.SignatureException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKey;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SecretKeyService secretKeyService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;interceptor.mode&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">InterceptorMode</span> <span class="variable">interceptorMode</span> <span class="operator">=</span> InterceptorMode.NONE;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;interceptor.whiteList&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String[] interceptorWhiteList;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;OPTIONS&quot;</span>.equals(request.getMethod()) ||</span><br><span class="line">                Stream.of(interceptorWhiteList).anyMatch(p -&gt; p.equals(request.getRequestURI()))) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (interceptorMode) &#123;</span><br><span class="line">            <span class="keyword">case</span> JWT -&gt; &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Authorization&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (token == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception401</span>(<span class="string">&quot;未携带 token&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">SecretKey</span> <span class="variable">secretKey</span> <span class="operator">=</span> secretKeyService.getSecretKey();</span><br><span class="line">                    Jwts.parserBuilder().setSigningKey(secretKey).build().parseClaimsJws(token);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ExpiredJwtException | UnsupportedJwtException | MalformedJwtException | SignatureException |</span><br><span class="line">                         IllegalArgumentException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception401</span>(<span class="string">&quot;校验 token 失败&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> SESSION -&gt; &#123;</span><br><span class="line">                <span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> request.getSession().getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception401</span>(<span class="string">&quot;校验 session 失败&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> NONE -&gt; &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">enum</span> <span class="title class_">InterceptorMode</span> &#123;</span><br><span class="line">        NONE, JWT, SESSION;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="pinia"><a href="#pinia" class="headerlink" title="pinia"></a>pinia</h3><p>需求：在组件 p1 里更新了数据，主页组件也同步更新显示</p>
<ul>
<li>storage 虽然可以实现多个组件的数据共享，但是需要【主动访问】才能获取更新后的数据</li>
<li>本例中由于没有涉及主页组件的 mounted 操作，因此并不会【主动】获取 storage 的数据 </li>
</ul>
<h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install pinia</span><br></pre></td></tr></table></figure>

<p>在 main.ts 中引入</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="variable constant_">A6</span>).<span class="title function_">use</span>(antdv).<span class="title function_">use</span>(router).<span class="title function_">use</span>(<span class="title function_">createPinia</span>()).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h4 id="定义Store"><a href="#定义Store" class="headerlink" title="定义Store"></a>定义Store</h4><p>再新建 store 目录来管理共享数据，下面是 /src/store/UserInfo.ts</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;../api/request&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserInfoDto</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Model8080&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserInfo = <span class="title function_">defineStore</span>(<span class="string">&#x27;userInfo&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sex</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">get</span>(<span class="params">username: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">`/api/info/<span class="subst">$&#123;username&#125;</span>`</span>)</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">this</span>, resp.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">update</span>(<span class="params">dto: UserInfoDto</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;/api/info&#x27;</span>, dto)</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">this</span>, dto)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>定义了 useUserInfo 函数，用来获取共享数据，它可能用于多个组件</p>
<ul>
<li>命名习惯上，函数变量以 use 打头</li>
</ul>
</li>
<li><p>state 定义数据格式</p>
</li>
<li><p>actions 定义操作数据的方法</p>
<ul>
<li><p>get 方法用来获取用户信息</p>
</li>
<li><p>update 方法用来修改用户信息</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>由于 useRequest 必须放在 setup 函数内，这里简化起见，直接使用了 axios</li>
<li>Object.assign：把第二个对象的值赋给第一个对象</li>
</ul>
<p>获取用户信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a6main&quot;&gt;</span><br><span class="line">    &lt;a-layout&gt;</span><br><span class="line">      &lt;a-layout-header&gt;</span><br><span class="line">        &lt;span&gt;[&#123;&#123;serverUsername&#125;&#125; &#123;&#123;userInfo.name&#125;&#125; - &#123;&#123;userInfo.sex&#125;&#125;]&lt;/span&gt;</span><br><span class="line">      &lt;/a-layout-header&gt;</span><br><span class="line">      &lt;a-layout&gt;</span><br><span class="line">        &lt;!-- ... --&gt;</span><br><span class="line">      &lt;/a-layout&gt;</span><br><span class="line">    &lt;/a-layout&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line">import AIcon from &#x27;../components/AIcon3&#x27; // jsx icon 组件</span><br><span class="line">import &#123; serverMenus, serverUsername &#125; from &#x27;../router/a6router&#x27;</span><br><span class="line">import &#123; useUserInfo &#125; from &#x27;../store/UserInfo&#x27;</span><br><span class="line">const userInfo = useUserInfo()</span><br><span class="line"></span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  userInfo.get(serverUsername.value)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>修改用户信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a6p1&quot;&gt;</span><br><span class="line">    &lt;h3&gt;修改用户信息&lt;/h3&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;a-form&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;用户名&quot;&gt;</span><br><span class="line">        &lt;a-input readonly v-model:value=&quot;dto.username&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;姓名&quot; v-bind=&quot;validateInfos.name&quot;&gt;</span><br><span class="line">        &lt;a-input v-model:value=&quot;dto.name&quot;&gt;&lt;/a-input&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">      &lt;a-form-item label=&quot;性别&quot;&gt;</span><br><span class="line">        &lt;a-radio-group v-model:value=&quot;dto.sex&quot;&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;男&quot;&gt;男&lt;/a-radio-button&gt;</span><br><span class="line">          &lt;a-radio-button value=&quot;女&quot;&gt;女&lt;/a-radio-button&gt;</span><br><span class="line">        &lt;/a-radio-group&gt;</span><br><span class="line">      &lt;/a-form-item&gt;</span><br><span class="line">    &lt;/a-form&gt;</span><br><span class="line">    &lt;a-button type=&quot;primary&quot; @click=&quot;onClick&quot;&gt;确定&lt;/a-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; Form &#125; from &#x27;ant-design-vue&#x27;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; UserInfoDto &#125; from &#x27;../model/Model8080&#x27;</span><br><span class="line">import &#123; useUserInfo &#125; from &#x27;../store/UserInfo&#x27;;</span><br><span class="line">const dto = ref&lt;UserInfoDto&gt;(&#123; username: &#x27;&#x27;, name: &#x27;&#x27;, sex: &#x27;&#x27; &#125;)</span><br><span class="line">const userInfo = useUserInfo()</span><br><span class="line">onMounted(()=&gt;&#123;</span><br><span class="line">  Object.assign(dto.value, userInfo)</span><br><span class="line">&#125;)</span><br><span class="line">const rules = ref(&#123;</span><br><span class="line">  name: [</span><br><span class="line">    &#123;required: true, message:&#x27;姓名必填&#x27;&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line">const &#123; validateInfos, validate &#125; = Form.useForm(dto, rules)</span><br><span class="line">async function onClick() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    await validate()</span><br><span class="line">    await userInfo.update(dto.value)</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.error(e)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>不能直接把 userInfo 绑定到表单，需要 dto 中转一下</li>
<li>userInfo.update 和 useInfo.get 返回的都是 Promise 对象，可以配合 await 一起用</li>
</ul>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>vite + vue3 + vue-router + ts 还没有太多成熟的项目范例，可以参考 <a target="_blank" rel="noopener" href="https://github.com/sendya/preview-pro">GitHub - sendya/preview-pro: Use pro-layout in vitejs. preview https://sendya.github.io/preview-pro/index.html</a>，它提供了基本的布局和样例代码</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">Snoopy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2022-08-27-%E5%89%8D%E7%AB%AF.html">http://example.com/2022-08-27-%E5%89%8D%E7%AB%AF.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/HTML/">HTML</a><a class="post-meta__tags" href="/tags/CSS/">CSS</a><a class="post-meta__tags" href="/tags/JS/">JS</a><a class="post-meta__tags" href="/tags/VUE/">VUE</a></div><div class="post_share"><div class="social-share" data-image="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/1.jpg" data-sites="wechat,weibo,qq,facebook,twitter"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Snoopy</div><div class="author-info__description">青青草原最会编程的羊</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/new-zxp"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/new-zxp" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:xxkk3851@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content"><div style="font-size: 18px; font-weight: bold; text-align: center;">
  🎉欢迎来到我的blog🎉
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#HTML"><span class="toc-number">1.</span> <span class="toc-text">HTML</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTML-%E5%85%83%E7%B4%A0"><span class="toc-number">1.1.</span> <span class="toc-text">HTML 元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTML-%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.2.</span> <span class="toc-text">HTML 页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%85%83%E7%B4%A0"><span class="toc-number">1.3.</span> <span class="toc-text">常见元素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC"><span class="toc-number">1.3.1.</span> <span class="toc-text">文本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Heading"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">Heading</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Paragraph"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">Paragraph</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#List"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">List</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Anchor"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">Anchor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hr"><span class="toc-number">1.3.1.5.</span> <span class="toc-text">hr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#br"><span class="toc-number">1.3.1.6.</span> <span class="toc-text">br</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%AA%92%E4%BD%93"><span class="toc-number">1.3.2.</span> <span class="toc-text">多媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Image"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">Image</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Video"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">Video</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Audio"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">Audio</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95"><span class="toc-number">1.3.3.</span> <span class="toc-text">表单</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E4%B8%8E%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">作用与语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%A1%A8%E5%8D%95%E9%A1%B9"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">常见的表单项</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E6%A1%86"><span class="toc-number">1.3.3.2.1.</span> <span class="toc-text">文本框</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%86%E7%A0%81%E6%A1%86"><span class="toc-number">1.3.3.2.2.</span> <span class="toc-text">密码框</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E6%A1%86"><span class="toc-number">1.3.3.2.3.</span> <span class="toc-text">隐藏框</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%A1%86"><span class="toc-number">1.3.3.2.4.</span> <span class="toc-text">日期框</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E9%80%89"><span class="toc-number">1.3.3.2.5.</span> <span class="toc-text">单选</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E9%80%89"><span class="toc-number">1.3.3.2.6.</span> <span class="toc-text">多选</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.3.3.2.7.</span> <span class="toc-text">文件上传</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E8%AF%B7%E6%B1%82"><span class="toc-number">1.4.</span> <span class="toc-text">HTTP 请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E7%BB%84%E6%88%90"><span class="toc-number">1.4.1.</span> <span class="toc-text">请求组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F%E4%B8%8E%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.4.2.</span> <span class="toc-text">请求方式与数据格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#get-%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">get 请求示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#post-%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">post 请求示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#json-%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">json 请求示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#multipart-%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.4.2.4.</span> <span class="toc-text">multipart 请求示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%B0%8F%E7%BB%93"><span class="toc-number">1.4.2.5.</span> <span class="toc-text">数据格式小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.3.</span> <span class="toc-text">session 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jwt-%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.4.</span> <span class="toc-text">jwt 原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Element-UI"><span class="toc-number">1.5.</span> <span class="toc-text">Element-UI</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CSS"><span class="toc-number">2.</span> <span class="toc-text">CSS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E5%99%A8"><span class="toc-number">2.1.</span> <span class="toc-text">选择器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E5%92%8C%E5%80%BC"><span class="toc-number">2.2.</span> <span class="toc-text">属性和值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%83%E5%B1%80"><span class="toc-number">2.3.</span> <span class="toc-text">布局</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E4%BD%93"><span class="toc-number">2.4.</span> <span class="toc-text">字体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AE%B5%E8%90%BD"><span class="toc-number">2.5.</span> <span class="toc-text">段落</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Javascript"><span class="toc-number">3.</span> <span class="toc-text">Javascript</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">变量与数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F"><span class="toc-number">3.1.1.</span> <span class="toc-text">声明变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#let-star"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">let :star:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#const-star"><span class="toc-number">3.1.1.2.</span> <span class="toc-text">const :star:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#var"><span class="toc-number">3.1.1.3.</span> <span class="toc-text">var</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">基本类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#undefined-%E5%92%8C-null"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">undefined 和 null</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#string-star"><span class="toc-number">3.1.2.2.</span> <span class="toc-text">string :star:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#number-%E5%92%8C-bigint-star"><span class="toc-number">3.1.2.3.</span> <span class="toc-text">number 和 bigint:star:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#boolean-star"><span class="toc-number">3.1.2.4.</span> <span class="toc-text">boolean :star:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#symbol"><span class="toc-number">3.1.2.5.</span> <span class="toc-text">symbol</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.3.</span> <span class="toc-text">对象类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Function-star-star"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">Function :star::star:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.3.1.1.</span> <span class="toc-text">定义函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.3.1.2.</span> <span class="toc-text">调用函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0"><span class="toc-number">3.1.3.1.3.</span> <span class="toc-text">默认参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.3.1.4.</span> <span class="toc-text">匿名函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.3.1.5.</span> <span class="toc-text">箭头函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%98%AF%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.1.3.1.6.</span> <span class="toc-text">函数是对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">3.1.3.1.7.</span> <span class="toc-text">函数作用域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%97%AD%E5%8C%85"><span class="toc-number">3.1.3.1.8.</span> <span class="toc-text">闭包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#let%E3%80%81var-%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">3.1.3.1.9.</span> <span class="toc-text">let、var 与作用域</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Array-star"><span class="toc-number">3.1.3.2.</span> <span class="toc-text">Array :star:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Object-star-star"><span class="toc-number">3.1.3.3.</span> <span class="toc-text">Object :star::star:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">3.1.3.3.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E8%89%B2%EF%BC%9A%E5%B1%9E%E6%80%A7%E5%A2%9E%E5%88%A0"><span class="toc-number">3.1.3.3.2.</span> <span class="toc-text">特色：属性增删</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E8%89%B2%EF%BC%9Athis"><span class="toc-number">3.1.3.3.3.</span> <span class="toc-text">特色：this</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E8%89%B2%EF%BC%9A%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF"><span class="toc-number">3.1.3.3.4.</span> <span class="toc-text">特色：原型继承</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E8%89%B2%EF%BC%9A%E5%9F%BA%E4%BA%8E%E5%87%BD%E6%95%B0%E7%9A%84%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF"><span class="toc-number">3.1.3.3.5.</span> <span class="toc-text">特色：基于函数的原型继承</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JSON"><span class="toc-number">3.1.3.3.6.</span> <span class="toc-text">JSON</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.4.</span> <span class="toc-text">动态类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">运算符与表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.2.1.</span> <span class="toc-text">&#x3D;&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">3.2.2.</span> <span class="toc-text">||</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E"><span class="toc-number">3.2.3.</span> <span class="toc-text">?? 与 ?.</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#-2"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">??</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-3"><span class="toc-number">3.2.3.2.</span> <span class="toc-text">?.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%80%A6"><span class="toc-number">3.2.4.</span> <span class="toc-text">…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-4"><span class="toc-number">3.2.5.</span> <span class="toc-text">[] {}</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#-5"><span class="toc-number">3.2.5.1.</span> <span class="toc-text">[]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-6"><span class="toc-number">3.2.5.2.</span> <span class="toc-text">{}</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.3.</span> <span class="toc-text">控制语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#for-in"><span class="toc-number">3.3.1.</span> <span class="toc-text">for in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#for-of"><span class="toc-number">3.3.2.</span> <span class="toc-text">for of</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#try-catch"><span class="toc-number">3.3.3.</span> <span class="toc-text">try catch</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API"><span class="toc-number">3.4.</span> <span class="toc-text">API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">3.4.1.</span> <span class="toc-text">环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-nvm"><span class="toc-number">3.4.1.1.</span> <span class="toc-text">安装 nvm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5-npm"><span class="toc-number">3.4.1.2.</span> <span class="toc-text">检查 npm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">3.4.1.3.</span> <span class="toc-text">搭建前端服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E6%A1%88%E4%BE%8B"><span class="toc-number">3.4.2.</span> <span class="toc-text">前端案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">查找元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%85%83%E7%B4%A0%E5%86%85%E5%AE%B9"><span class="toc-number">3.4.2.2.</span> <span class="toc-text">修改元素内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E6%A8%A1%E6%9D%BF"><span class="toc-number">3.4.2.3.</span> <span class="toc-text">利用模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fetch-API"><span class="toc-number">3.4.2.4.</span> <span class="toc-text">Fetch API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">3.4.2.5.</span> <span class="toc-text">模块化</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue-3"><span class="toc-number">4.</span> <span class="toc-text">Vue 3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#TypeScript"><span class="toc-number">4.1.</span> <span class="toc-text">TypeScript</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">4.1.1.</span> <span class="toc-text">动态类型的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A5%E9%97%A8"><span class="toc-number">4.1.2.</span> <span class="toc-text">入门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.3.</span> <span class="toc-text">类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E6%B3%A8%E4%BD%8D%E7%BD%AE"><span class="toc-number">4.1.3.1.</span> <span class="toc-text">标注位置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%87%E6%B3%A8%E5%8F%98%E9%87%8F"><span class="toc-number">4.1.3.1.1.</span> <span class="toc-text">标注变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%87%E6%B3%A8%E5%8F%82%E6%95%B0"><span class="toc-number">4.1.3.1.2.</span> <span class="toc-text">标注参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%87%E6%B3%A8%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">4.1.3.1.3.</span> <span class="toc-text">标注返回值</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.3.2.</span> <span class="toc-text">复杂类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#type"><span class="toc-number">4.1.3.2.1.</span> <span class="toc-text">type</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#interface"><span class="toc-number">4.1.3.2.2.</span> <span class="toc-text">interface</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AF%E9%80%89%E5%B1%9E%E6%80%A7"><span class="toc-number">4.1.3.2.3.</span> <span class="toc-text">可选属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.3.2.4.</span> <span class="toc-text">鸭子类型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.3.3.</span> <span class="toc-text">方法类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.3.4.</span> <span class="toc-text">字面量类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nullish-%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.3.5.</span> <span class="toc-text">nullish 类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B"><span class="toc-number">4.1.3.6.</span> <span class="toc-text">泛型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%84%8F%E4%B9%89"><span class="toc-number">4.1.4.</span> <span class="toc-text">意义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E5%A5%BD%E7%90%86%E8%A7%A3%E6%A1%86%E6%9E%B6"><span class="toc-number">4.1.4.1.</span> <span class="toc-text">更好理解框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E5%A5%BD%E7%9A%84%E6%8F%90%E7%A4%BA"><span class="toc-number">4.1.4.2.</span> <span class="toc-text">更好的提示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB"><span class="toc-number">4.1.5.</span> <span class="toc-text">类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">4.1.5.1.</span> <span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AA%E8%AF%BB%E5%B1%9E%E6%80%A7"><span class="toc-number">4.1.5.2.</span> <span class="toc-text">只读属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.5.3.</span> <span class="toc-text">方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#get%EF%BC%8Cset"><span class="toc-number">4.1.5.4.</span> <span class="toc-text">get，set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E4%B8%8E%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.1.5.5.</span> <span class="toc-text">类与接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.1.5.6.</span> <span class="toc-text">继承与接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%87%8D%E5%86%99"><span class="toc-number">4.1.5.7.</span> <span class="toc-text">方法重写</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3-%E5%9F%BA%E7%A1%80"><span class="toc-number">4.2.</span> <span class="toc-text">Vue3 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">4.2.1.</span> <span class="toc-text">跨域问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E8%A7%A3%E5%86%B3"><span class="toc-number">4.2.1.1.</span> <span class="toc-text">代理解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E8%A7%A3%E5%86%B3"><span class="toc-number">4.2.1.2.</span> <span class="toc-text">注解解决</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="toc-number">4.2.2.</span> <span class="toc-text">技术选型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87-1"><span class="toc-number">4.2.3.</span> <span class="toc-text">环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.2.3.1.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A0%81-IDE"><span class="toc-number">4.2.3.2.</span> <span class="toc-text">编码 IDE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-devtools"><span class="toc-number">4.2.3.3.</span> <span class="toc-text">安装 devtools</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%AB%AF%E5%8F%A3"><span class="toc-number">4.2.3.4.</span> <span class="toc-text">修改端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-number">4.2.3.5.</span> <span class="toc-text">配置代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.3.6.</span> <span class="toc-text">项目结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-%E7%BB%84%E4%BB%B6"><span class="toc-number">4.2.4.</span> <span class="toc-text">Vue 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#main-ts"><span class="toc-number">4.2.4.1.</span> <span class="toc-text">main.ts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ref-%E4%B8%8E-reactive"><span class="toc-number">4.2.4.2.</span> <span class="toc-text">ref 与 reactive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="toc-number">4.2.4.3.</span> <span class="toc-text">属性绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">4.2.4.4.</span> <span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E7%BB%91%E5%AE%9A"><span class="toc-number">4.2.4.5.</span> <span class="toc-text">表单绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">4.2.4.6.</span> <span class="toc-text">计算属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xhr"><span class="toc-number">4.2.4.7.</span> <span class="toc-text">xhr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">4.2.4.8.</span> <span class="toc-text">状态码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#axios"><span class="toc-number">4.2.4.9.</span> <span class="toc-text">axios</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">4.2.4.9.1.</span> <span class="toc-text">基本用法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">4.2.4.9.2.</span> <span class="toc-text">环境变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#baseURL"><span class="toc-number">4.2.4.9.3.</span> <span class="toc-text">baseURL</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">4.2.4.9.4.</span> <span class="toc-text">拦截器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E4%B8%8E%E5%88%97%E8%A1%A8"><span class="toc-number">4.2.4.10.</span> <span class="toc-text">条件与列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">4.2.4.11.</span> <span class="toc-text">监听器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vueuse"><span class="toc-number">4.2.4.12.</span> <span class="toc-text">vueuse</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#useRequest"><span class="toc-number">4.2.4.13.</span> <span class="toc-text">useRequest</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#usePagination"><span class="toc-number">4.2.4.14.</span> <span class="toc-text">usePagination</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E7%BB%84%E4%BB%B6"><span class="toc-number">4.2.4.15.</span> <span class="toc-text">子组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B1"><span class="toc-number">4.2.4.15.1.</span> <span class="toc-text">例1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B2"><span class="toc-number">4.2.4.15.2.</span> <span class="toc-text">例2</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-%E8%BF%9B%E9%98%B6"><span class="toc-number">4.3.</span> <span class="toc-text">Vue 进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ElementUI"><span class="toc-number">4.3.1.</span> <span class="toc-text">ElementUI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E6%A0%BC%E7%BB%84%E4%BB%B6"><span class="toc-number">4.3.1.1.</span> <span class="toc-text">表格组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E7%BB%84%E4%BB%B6"><span class="toc-number">4.3.1.2.</span> <span class="toc-text">分页组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%90%9C%E7%B4%A2"><span class="toc-number">4.3.1.3.</span> <span class="toc-text">分页搜索</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A7%E8%81%94%E9%80%89%E6%8B%A9"><span class="toc-number">4.3.1.4.</span> <span class="toc-text">级联选择</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Antdv"><span class="toc-number">4.3.2.</span> <span class="toc-text">Antdv</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E6%A0%BC"><span class="toc-number">4.3.2.1.</span> <span class="toc-text">表格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-number">4.3.2.2.</span> <span class="toc-text">分页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E3%80%81%E5%88%A0%E9%99%A4"><span class="toc-number">4.3.2.3.</span> <span class="toc-text">搜索、删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E3%80%81%E4%BF%AE%E6%94%B9"><span class="toc-number">4.3.2.4.</span> <span class="toc-text">新增、修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%B6%88%E6%81%AF"><span class="toc-number">4.3.2.5.</span> <span class="toc-text">全局消息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C"><span class="toc-number">4.3.2.6.</span> <span class="toc-text">表单校验</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue-router"><span class="toc-number">4.3.3.</span> <span class="toc-text">vue-router</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">4.3.3.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-router"><span class="toc-number">4.3.3.2.</span> <span class="toc-text">创建 router</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%AF%BC%E5%85%A5"><span class="toc-number">4.3.3.3.</span> <span class="toc-text">动态导入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1"><span class="toc-number">4.3.3.4.</span> <span class="toc-text">嵌套路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.3.3.5.</span> <span class="toc-text">重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E5%B8%83%E5%B1%80"><span class="toc-number">4.3.3.6.</span> <span class="toc-text">主页布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%A7%E8%BE%B9%E6%A0%8F%E8%8F%9C%E5%8D%95"><span class="toc-number">4.3.3.7.</span> <span class="toc-text">侧边栏菜单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8F%9C%E5%8D%95%E5%9B%BE%E6%A0%87"><span class="toc-number">4.3.3.8.</span> <span class="toc-text">菜单图标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85%E5%9B%BE%E6%A0%87%E7%BB%84%E4%BB%B6"><span class="toc-number">4.3.3.9.</span> <span class="toc-text">二次封装图标组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%951%EF%BC%8C%E4%BD%BF%E7%94%A8-vue-%E7%BB%84%E4%BB%B6"><span class="toc-number">4.3.3.9.1.</span> <span class="toc-text">方法1，使用 vue 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%952%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">4.3.3.9.2.</span> <span class="toc-text">方法2，使用函数式组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%953%EF%BC%8C%E4%BD%BF%E7%94%A8-jsx-%E7%BB%84%E4%BB%B6"><span class="toc-number">4.3.3.9.3.</span> <span class="toc-text">方法3，使用 jsx 组件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%8F%9C%E5%8D%95"><span class="toc-number">4.3.3.10.</span> <span class="toc-text">动态路由与菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E6%96%87%E4%BB%B6"><span class="toc-number">4.3.3.10.1.</span> <span class="toc-text">路由文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E7%BB%84%E4%BB%B6"><span class="toc-number">4.3.3.10.2.</span> <span class="toc-text">登录组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E7%BB%84%E4%BB%B6"><span class="toc-number">4.3.3.10.3.</span> <span class="toc-text">主页组件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#token-%E4%BD%BF%E7%94%A8"><span class="toc-number">4.3.3.11.</span> <span class="toc-text">token 使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pinia"><span class="toc-number">4.3.4.</span> <span class="toc-text">pinia</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-1"><span class="toc-number">4.3.4.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89Store"><span class="toc-number">4.3.4.2.</span> <span class="toc-text">定义Store</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E8%AE%B0"><span class="toc-number">4.3.5.</span> <span class="toc-text">后记</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024-02-29-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" title="数据结构"><img src="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据结构"/></a><div class="content"><a class="title" href="/2024-02-29-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" title="数据结构">数据结构</a><time datetime="2024-02-29T01:56:41.000Z" title="Created 2024-02-29 09:56:41">2024-02-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023-08-09-c.html" title="c语言笔记"><img src="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="c语言笔记"/></a><div class="content"><a class="title" href="/2023-08-09-c.html" title="c语言笔记">c语言笔记</a><time datetime="2023-08-09T01:56:41.000Z" title="Created 2023-08-09 09:56:41">2023-08-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023-01-16-Greenland.html" title="格陵兰冰盖多要素监测网络平台"><img src="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="格陵兰冰盖多要素监测网络平台"/></a><div class="content"><a class="title" href="/2023-01-16-Greenland.html" title="格陵兰冰盖多要素监测网络平台">格陵兰冰盖多要素监测网络平台</a><time datetime="2023-01-16T02:00:00.000Z" title="Created 2023-01-16 10:00:00">2023-01-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022-11-16-TT%E5%A4%96%E5%8D%96.html" title="TT外卖项目开发"><img src="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/11.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TT外卖项目开发"/></a><div class="content"><a class="title" href="/2022-11-16-TT%E5%A4%96%E5%8D%96.html" title="TT外卖项目开发">TT外卖项目开发</a><time datetime="2022-11-16T02:00:00.000Z" title="Created 2022-11-16 10:00:00">2022-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022-08-27-%E5%89%8D%E7%AB%AF.html" title="前端"><img src="https://zhuxinpeng.oss-cn-hangzhou.aliyuncs.com/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端"/></a><div class="content"><a class="title" href="/2022-08-27-%E5%89%8D%E7%AB%AF.html" title="前端">前端</a><time datetime="2022-08-27T02:37:48.000Z" title="Created 2022-08-27 10:37:48">2022-08-27</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Snoopy</div><div class="framework-info"></div><div class="footer_custom_text">欢迎来到我的blog</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>